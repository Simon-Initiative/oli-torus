<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.25.2">
    <meta name="project" content="OLI Torus v0.18.4">

    <title>Oli.Accounts â€” OLI Torus v0.18.4</title>
    <link rel="stylesheet" href="dist/elixir-37545fd2f35b96531434.css" />

    <script src="dist/sidebar_items-756012d8e8.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-f97730d45ef67f3e6188.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="http://oli.cmu.edu" class="sidebar-projectName">
OLI Torus
      </a>
      <strong class="sidebar-projectVersion">
        v0.18.4
      </strong>
    </div>

      <a href="http://oli.cmu.edu">
        <img src="assets/logo.png" alt="OLI Torus" class="sidebar-projectImage">
      </a>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


      <li><a id="tasks-list-link" href="#full-list">Mix Tasks</a></li>

  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

      <h1>
Oli.Accounts <small class="app-vsn">(OLI Torus v0.18.4)</small>

          <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L1" title="View Source" class="view-source" rel="help">
            <span class="icon-code" aria-hidden="true"></span>
            <span class="sr-only">View Source</span>
          </a>

      </h1>



        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#author_signed_in?/1">author_signed_in?(conn)</a>

  </div>

    <div class="summary-synopsis"><p>Returns true if a author is signed in</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#author_with_email_exists?/1">author_with_email_exists?(email)</a>

  </div>

    <div class="summary-synopsis"><p>Returns true if a author exists</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#browse_authors/3">browse_authors(paging, sorting, options)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#browse_users/3">browse_users(paging, sorting, options)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#can_access?/2">can_access?(author, project)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#can_access_via_slug?/2">can_access_via_slug?(author, project_slug)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#create_author/1">create_author(params \\ %{})</a>

  </div>

    <div class="summary-synopsis"><p>Creates and returns a new author</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#create_guest_user/1">create_guest_user(attrs \\ %{})</a>

  </div>

    <div class="summary-synopsis"><p>Creates a guest user.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#create_user/1">create_user(attrs \\ %{})</a>

  </div>

    <div class="summary-synopsis"><p>Creates a user.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#delete_author/1">delete_author(author)</a>

  </div>

    <div class="summary-synopsis"><p>Deletes an author.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#delete_user/1">delete_user(user)</a>

  </div>

    <div class="summary-synopsis"><p>Deletes a user.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_author/1">get_author(id)</a>

  </div>

    <div class="summary-synopsis"><p>  Gets a single author.
  Returns nil if the Author does not exist.
  ## Examples</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_author!/1">get_author!(id)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a single author.
Raises <a href="https://hexdocs.pm/ecto/3.7.1/Ecto.NoResultsError.html"><code class="inline">Ecto.NoResultsError</code></a> if the Author does not exist.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_author_by_email/1">get_author_by_email(email)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a single author with the given email</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_author_preference/3">get_author_preference(author, key, default \\ nil)</a>

  </div>

    <div class="summary-synopsis"><p>Returns an author preference using the key provided. If the preference isn't set or
the author preferences have not been created yet, the default value will be returned.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_author_with_community_admin_count/1">get_author_with_community_admin_count(id)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a single author with the count of communities for which the author is an admin.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_user/2">get_user(id, list)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_user!/1">get_user!(id)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a single user.
Raises <a href="https://hexdocs.pm/ecto/3.7.1/Ecto.NoResultsError.html"><code class="inline">Ecto.NoResultsError</code></a> if the User does not exist.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_user!/2">get_user!(id, list)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_user_by/1">get_user_by(clauses)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a single user by query parameter</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#insert_or_update_author/1">insert_or_update_author(changes)</a>

  </div>

    <div class="summary-synopsis"><p>Returns an author if one matches given email, or creates and returns a new author</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#insert_or_update_lms_user/1">insert_or_update_lms_user(changes)</a>

  </div>

    <div class="summary-synopsis"><p>Updates user details if a record matches sub, otherwise creates a new user</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#is_admin?/1">is_admin?(arg1)</a>

  </div>

    <div class="summary-synopsis"><p>Returns true if an author is an administrator.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#link_user_author_account/2">link_user_author_account(user, author)</a>

  </div>

    <div class="summary-synopsis"><p>Links a User to Author account</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_admin_communities/1">list_admin_communities(author_id)</a>

  </div>

    <div class="summary-synopsis"><p>Get all the communities for which the author is an admin.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_authors/0">list_authors()</a>

  </div>

    <div class="summary-synopsis"><p>Returns the list of authors.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_users/0">list_users()</a>

  </div>

    <div class="summary-synopsis"><p>Returns the list of users.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#project_author_count/1">project_author_count(project)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#project_authors/1">project_authors(project_ids)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#search_authors_matching/1">search_authors_matching(query)</a>

  </div>

    <div class="summary-synopsis"><p>Searches for a list of authors with an email matching the exact string</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#set_author_preference/3">set_author_preference(author_id, key, value)</a>

  </div>

    <div class="summary-synopsis"><p>Set's an author preference to the provided value at a given key</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_author/2">update_author(author, attrs)</a>

  </div>

    <div class="summary-synopsis"><p>Updates an author.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_user/2">update_user(user, attrs)</a>

  </div>

    <div class="summary-synopsis"><p>Updates a user.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_user_platform_roles/2">update_user_platform_roles(user, roles)</a>

  </div>

    <div class="summary-synopsis"><p>Updates the platform roles associated with a user</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#user_confirmation_pending?/1">user_confirmation_pending?(user)</a>

  </div>

    <div class="summary-synopsis"><p>Returns whether the user account is waiting for confirmation or not.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#user_is_guest?/1">user_is_guest?(conn)</a>

  </div>

    <div class="summary-synopsis"><p>Returns true if a user is signed in as guest</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#user_is_independent_learner?/1">user_is_independent_learner?(current_user)</a>

  </div>

    <div class="summary-synopsis"><p>Returns true if a user is signed in as an independent learner</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#user_signed_in?/1">user_signed_in?(conn)</a>

  </div>

    <div class="summary-synopsis"><p>Returns true if a user is signed in</p></div>

</div>

  </div>

        </section>


        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Functions
          </h1>
          <div class="functions-list">
<section class="detail" id="author_signed_in?/1">

  <div class="detail-header">
    <a href="#author_signed_in?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">author_signed_in?(conn)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L462" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns true if a author is signed in</p>
  </section>
</section>
<section class="detail" id="author_with_email_exists?/1">

  <div class="detail-header">
    <a href="#author_with_email_exists?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">author_with_email_exists?(email)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L452" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns true if a author exists</p>
  </section>
</section>
<section class="detail" id="browse_authors/3">

  <div class="detail-header">
    <a href="#browse_authors/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">browse_authors(paging, sorting, options)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L72" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="browse_users/3">

  <div class="detail-header">
    <a href="#browse_users/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">browse_users(paging, sorting, options)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L19" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="can_access?/2">

  <div class="detail-header">
    <a href="#can_access?/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">can_access?(author, project)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L511" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="can_access_via_slug?/2">

  <div class="detail-header">
    <a href="#can_access_via_slug?/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">can_access_via_slug?(author, project_slug)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L533" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="create_author/1">

    <span id="create_author/0"></span>

  <div class="detail-header">
    <a href="#create_author/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">create_author(params \\ %{})</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L363" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Creates and returns a new author</p><h2 id="create_author/1-examples" class="section-heading">
  <a href="#create_author/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">create_author</span><span class="p" data-group-id="8534419825-1">(</span><span class="p" data-group-id="8534419825-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="8534419825-2">}</span><span class="p" data-group-id="8534419825-1">)</span><span class="w">
</span><span class="p" data-group-id="8534419825-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8534419825-4">%</span><span class="nc" data-group-id="8534419825-4">Author</span><span class="p" data-group-id="8534419825-4">{</span><span class="p" data-group-id="8534419825-4">}</span><span class="p" data-group-id="8534419825-3">}</span></code></pre>
  </section>
</section>
<section class="detail" id="create_guest_user/1">

    <span id="create_guest_user/0"></span>

  <div class="detail-header">
    <a href="#create_guest_user/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">create_guest_user(attrs \\ %{})</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L187" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Creates a guest user.</p><h2 id="create_guest_user/1-examples" class="section-heading">
  <a href="#create_guest_user/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">create_guest_user</span><span class="p" data-group-id="5291138852-1">(</span><span class="p" data-group-id="5291138852-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="5291138852-2">}</span><span class="p" data-group-id="5291138852-1">)</span><span class="w">
</span><span class="p" data-group-id="5291138852-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5291138852-4">%</span><span class="nc" data-group-id="5291138852-4">User</span><span class="p" data-group-id="5291138852-4">{</span><span class="p" data-group-id="5291138852-4">}</span><span class="p" data-group-id="5291138852-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">create_guest_user</span><span class="p" data-group-id="5291138852-5">(</span><span class="p" data-group-id="5291138852-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="5291138852-6">}</span><span class="p" data-group-id="5291138852-5">)</span><span class="w">
</span><span class="p" data-group-id="5291138852-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5291138852-8">%</span><span class="nc" data-group-id="5291138852-8">Ecto.Changeset</span><span class="p" data-group-id="5291138852-8">{</span><span class="p" data-group-id="5291138852-8">}</span><span class="p" data-group-id="5291138852-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="create_user/1">

    <span id="create_user/0"></span>

  <div class="detail-header">
    <a href="#create_user/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">create_user(attrs \\ %{})</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L173" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Creates a user.</p><h2 id="create_user/1-examples" class="section-heading">
  <a href="#create_user/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">create_user</span><span class="p" data-group-id="6574888379-1">(</span><span class="p" data-group-id="6574888379-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="6574888379-2">}</span><span class="p" data-group-id="6574888379-1">)</span><span class="w">
</span><span class="p" data-group-id="6574888379-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6574888379-4">%</span><span class="nc" data-group-id="6574888379-4">User</span><span class="p" data-group-id="6574888379-4">{</span><span class="p" data-group-id="6574888379-4">}</span><span class="p" data-group-id="6574888379-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">create_user</span><span class="p" data-group-id="6574888379-5">(</span><span class="p" data-group-id="6574888379-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="6574888379-6">}</span><span class="p" data-group-id="6574888379-5">)</span><span class="w">
</span><span class="p" data-group-id="6574888379-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6574888379-8">%</span><span class="nc" data-group-id="6574888379-8">Ecto.Changeset</span><span class="p" data-group-id="6574888379-8">{</span><span class="p" data-group-id="6574888379-8">}</span><span class="p" data-group-id="6574888379-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="delete_author/1">

  <div class="detail-header">
    <a href="#delete_author/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">delete_author(author)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L434" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Deletes an author.</p><h2 id="delete_author/1-examples" class="section-heading">
  <a href="#delete_author/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">delete_author</span><span class="p" data-group-id="7166121915-1">(</span><span class="n">author</span><span class="p" data-group-id="7166121915-1">)</span><span class="w">
</span><span class="p" data-group-id="7166121915-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7166121915-3">%</span><span class="nc" data-group-id="7166121915-3">Author</span><span class="p" data-group-id="7166121915-3">{</span><span class="p" data-group-id="7166121915-3">}</span><span class="p" data-group-id="7166121915-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">delete_author</span><span class="p" data-group-id="7166121915-4">(</span><span class="n">author</span><span class="p" data-group-id="7166121915-4">)</span><span class="w">
</span><span class="p" data-group-id="7166121915-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7166121915-6">%</span><span class="nc" data-group-id="7166121915-6">Ecto.Changeset</span><span class="p" data-group-id="7166121915-6">{</span><span class="p" data-group-id="7166121915-6">}</span><span class="p" data-group-id="7166121915-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="delete_user/1">

  <div class="detail-header">
    <a href="#delete_user/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">delete_user(user)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L220" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Deletes a user.</p><h2 id="delete_user/1-examples" class="section-heading">
  <a href="#delete_user/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">delete_user</span><span class="p" data-group-id="3654369998-1">(</span><span class="n">user</span><span class="p" data-group-id="3654369998-1">)</span><span class="w">
</span><span class="p" data-group-id="3654369998-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3654369998-3">%</span><span class="nc" data-group-id="3654369998-3">User</span><span class="p" data-group-id="3654369998-3">{</span><span class="p" data-group-id="3654369998-3">}</span><span class="p" data-group-id="3654369998-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">delete_user</span><span class="p" data-group-id="3654369998-4">(</span><span class="n">user</span><span class="p" data-group-id="3654369998-4">)</span><span class="w">
</span><span class="p" data-group-id="3654369998-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3654369998-6">%</span><span class="nc" data-group-id="3654369998-6">Ecto.Changeset</span><span class="p" data-group-id="3654369998-6">{</span><span class="p" data-group-id="3654369998-6">}</span><span class="p" data-group-id="3654369998-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="get_author/1">

  <div class="detail-header">
    <a href="#get_author/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_author(id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L391" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>  Gets a single author.
  Returns nil if the Author does not exist.
  ## Examples</p><pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_author</span><span class="p" data-group-id="4611983589-1">(</span><span class="mi">123</span><span class="p" data-group-id="4611983589-1">)</span><span class="w">
</span><span class="p" data-group-id="4611983589-2">%</span><span class="nc" data-group-id="4611983589-2">Author</span><span class="p" data-group-id="4611983589-2">{</span><span class="p" data-group-id="4611983589-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_author</span><span class="p" data-group-id="4611983589-3">(</span><span class="mi">456</span><span class="p" data-group-id="4611983589-3">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="get_author!/1">

  <div class="detail-header">
    <a href="#get_author!/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_author!(id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L379" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a single author.
Raises <a href="https://hexdocs.pm/ecto/3.7.1/Ecto.NoResultsError.html"><code class="inline">Ecto.NoResultsError</code></a> if the Author does not exist.</p><h2 id="get_author!/1-examples" class="section-heading">
  <a href="#get_author!/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_author!</span><span class="p" data-group-id="9854758195-1">(</span><span class="mi">123</span><span class="p" data-group-id="9854758195-1">)</span><span class="w">
</span><span class="p" data-group-id="9854758195-2">%</span><span class="nc" data-group-id="9854758195-2">Author</span><span class="p" data-group-id="9854758195-2">{</span><span class="p" data-group-id="9854758195-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_author!</span><span class="p" data-group-id="9854758195-3">(</span><span class="mi">456</span><span class="p" data-group-id="9854758195-3">)</span><span class="w">
</span><span class="gt">** (Ecto.NoResultsError)</span></code></pre>
  </section>
</section>
<section class="detail" id="get_author_by_email/1">

  <div class="detail-header">
    <a href="#get_author_by_email/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_author_by_email(email)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L422" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a single author with the given email</p>
  </section>
</section>
<section class="detail" id="get_author_preference/3">

    <span id="get_author_preference/2"></span>

  <div class="detail-header">
    <a href="#get_author_preference/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_author_preference(author, key, default \\ nil)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L476" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns an author preference using the key provided. If the preference isn't set or
the author preferences have not been created yet, the default value will be returned.</p><p>Accepts and Author struct or author id. If an id is given, the latest author record
will be queried from the database. Otherwise, the preferences in the Author struct
is used.</p><p>See AuthorPreferences for available key options</p>
  </section>
</section>
<section class="detail" id="get_author_with_community_admin_count/1">

  <div class="detail-header">
    <a href="#get_author_with_community_admin_count/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_author_with_community_admin_count(id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L404" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a single author with the count of communities for which the author is an admin.</p><h2 id="get_author_with_community_admin_count/1-examples" class="section-heading">
  <a href="#get_author_with_community_admin_count/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_author_with_community_admin_count</span><span class="p" data-group-id="5610428518-1">(</span><span class="mi">1</span><span class="p" data-group-id="5610428518-1">)</span><span class="w">
</span><span class="p" data-group-id="5610428518-2">%</span><span class="nc" data-group-id="5610428518-2">Author</span><span class="p" data-group-id="5610428518-2">{</span><span class="ss">community_admin_count</span><span class="p">:</span><span class="w"> </span><span class="mi">1</span><span class="p" data-group-id="5610428518-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">get_author_with_community_admin_count</span><span class="p" data-group-id="5610428518-3">(</span><span class="mi">456</span><span class="p" data-group-id="5610428518-3">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="get_user/2">

  <div class="detail-header">
    <a href="#get_user/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_user(id, list)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L153" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="get_user!/1">

  <div class="detail-header">
    <a href="#get_user!/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_user!(id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L149" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a single user.
Raises <a href="https://hexdocs.pm/ecto/3.7.1/Ecto.NoResultsError.html"><code class="inline">Ecto.NoResultsError</code></a> if the User does not exist.</p><h2 id="get_user!/1-examples" class="section-heading">
  <a href="#get_user!/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_user!</span><span class="p" data-group-id="3137362930-1">(</span><span class="mi">123</span><span class="p" data-group-id="3137362930-1">)</span><span class="w">
</span><span class="p" data-group-id="3137362930-2">%</span><span class="nc" data-group-id="3137362930-2">User</span><span class="p" data-group-id="3137362930-2">{</span><span class="p" data-group-id="3137362930-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_user!</span><span class="p" data-group-id="3137362930-3">(</span><span class="mi">456</span><span class="p" data-group-id="3137362930-3">)</span><span class="w">
</span><span class="gt">** (Ecto.NoResultsError)</span></code></pre>
  </section>
</section>
<section class="detail" id="get_user!/2">

  <div class="detail-header">
    <a href="#get_user!/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_user!(id, list)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L151" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="get_user_by/1">

  <div class="detail-header">
    <a href="#get_user_by/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_user_by(clauses)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L163" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a single user by query parameter</p><h2 id="get_user_by/1-examples" class="section-heading">
  <a href="#get_user_by/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_user_by</span><span class="p" data-group-id="5312588304-1">(</span><span class="ss">sub</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;123&quot;</span><span class="p" data-group-id="5312588304-1">)</span><span class="w">
</span><span class="p" data-group-id="5312588304-2">%</span><span class="nc" data-group-id="5312588304-2">User</span><span class="p" data-group-id="5312588304-2">{</span><span class="p" data-group-id="5312588304-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_user_by</span><span class="p" data-group-id="5312588304-3">(</span><span class="ss">sub</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;111&quot;</span><span class="p" data-group-id="5312588304-3">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="insert_or_update_author/1">

  <div class="detail-header">
    <a href="#insert_or_update_author/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">insert_or_update_author(changes)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L334" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns an author if one matches given email, or creates and returns a new author</p><h2 id="insert_or_update_author/1-examples" class="section-heading">
  <a href="#insert_or_update_author/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">insert_or_update_author</span><span class="p" data-group-id="9520237490-1">(</span><span class="p" data-group-id="9520237490-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="9520237490-2">}</span><span class="p" data-group-id="9520237490-1">)</span><span class="w">
</span><span class="p" data-group-id="9520237490-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9520237490-4">%</span><span class="nc" data-group-id="9520237490-4">Author</span><span class="p" data-group-id="9520237490-4">{</span><span class="p" data-group-id="9520237490-4">}</span><span class="p" data-group-id="9520237490-3">}</span></code></pre>
  </section>
</section>
<section class="detail" id="insert_or_update_lms_user/1">

  <div class="detail-header">
    <a href="#insert_or_update_lms_user/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">insert_or_update_lms_user(changes)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L234" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Updates user details if a record matches sub, otherwise creates a new user</p><h2 id="insert_or_update_lms_user/1-examples" class="section-heading">
  <a href="#insert_or_update_lms_user/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">insert_or_update_lms_user</span><span class="p" data-group-id="2899838407-1">(</span><span class="p" data-group-id="2899838407-2">%{</span><span class="n">sub</span><span class="p">,</span><span class="w"> </span><span class="s">&quot;123&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="2899838407-2">}</span><span class="p" data-group-id="2899838407-1">)</span><span class="w">
</span><span class="p" data-group-id="2899838407-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="2899838407-4">%</span><span class="nc" data-group-id="2899838407-4">User</span><span class="p" data-group-id="2899838407-4">{</span><span class="p" data-group-id="2899838407-4">}</span><span class="p" data-group-id="2899838407-3">}</span><span class="w">    </span><span class="o">-&gt;</span><span class="w"> </span><span class="c1"># Inserted or updated with success</span><span class="w">
</span><span class="p" data-group-id="2899838407-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">changeset</span><span class="p" data-group-id="2899838407-5">}</span><span class="w">         </span><span class="o">-&gt;</span><span class="w"> </span><span class="c1"># Something went wrong</span></code></pre>
  </section>
</section>
<section class="detail" id="is_admin?/1">

  <div class="detail-header">
    <a href="#is_admin?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">is_admin?(arg1)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L321" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns true if an author is an administrator.</p>
  </section>
</section>
<section class="detail" id="link_user_author_account/2">

  <div class="detail-header">
    <a href="#link_user_author_account/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">link_user_author_account(user, author)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L271" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Links a User to Author account</p><h2 id="link_user_author_account/2-examples" class="section-heading">
  <a href="#link_user_author_account/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">link_user_author_account</span><span class="p" data-group-id="4722535765-1">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">author_id</span><span class="p" data-group-id="4722535765-1">)</span><span class="w">
</span><span class="p" data-group-id="4722535765-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4722535765-3">%</span><span class="nc" data-group-id="4722535765-3">User</span><span class="p" data-group-id="4722535765-3">{</span><span class="p" data-group-id="4722535765-3">}</span><span class="p" data-group-id="4722535765-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">update_user</span><span class="p" data-group-id="4722535765-4">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4722535765-5">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="4722535765-5">}</span><span class="p" data-group-id="4722535765-4">)</span><span class="w">
</span><span class="p" data-group-id="4722535765-6">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4722535765-7">%</span><span class="nc" data-group-id="4722535765-7">Ecto.Changeset</span><span class="p" data-group-id="4722535765-7">{</span><span class="p" data-group-id="4722535765-7">}</span><span class="p" data-group-id="4722535765-6">}</span></code></pre>
  </section>
</section>
<section class="detail" id="list_admin_communities/1">

  <div class="detail-header">
    <a href="#list_admin_communities/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_admin_communities(author_id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L607" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Get all the communities for which the author is an admin.</p><h2 id="list_admin_communities/1-examples" class="section-heading">
  <a href="#list_admin_communities/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">list_admin_communities</span><span class="p" data-group-id="3917884574-1">(</span><span class="mi">1</span><span class="p" data-group-id="3917884574-1">)</span><span class="w">
</span><span class="p" data-group-id="3917884574-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3917884574-3">[</span><span class="p" data-group-id="3917884574-4">%</span><span class="nc" data-group-id="3917884574-4">Community</span><span class="p" data-group-id="3917884574-4">{</span><span class="p" data-group-id="3917884574-4">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="3917884574-3">]</span><span class="p" data-group-id="3917884574-2">}</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">list_admin_communities</span><span class="p" data-group-id="3917884574-5">(</span><span class="mi">123</span><span class="p" data-group-id="3917884574-5">)</span><span class="w">
</span><span class="p" data-group-id="3917884574-6">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="3917884574-7">[</span><span class="p" data-group-id="3917884574-7">]</span><span class="p" data-group-id="3917884574-6">}</span></code></pre>
  </section>
</section>
<section class="detail" id="list_authors/0">

  <div class="detail-header">
    <a href="#list_authors/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_authors()</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L135" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns the list of authors.</p><h2 id="list_authors/0-examples" class="section-heading">
  <a href="#list_authors/0-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">list_authors</span><span class="p" data-group-id="6391617739-1">(</span><span class="p" data-group-id="6391617739-1">)</span><span class="w">
</span><span class="p" data-group-id="6391617739-2">[</span><span class="p" data-group-id="6391617739-3">%</span><span class="nc" data-group-id="6391617739-3">Author</span><span class="p" data-group-id="6391617739-3">{</span><span class="p" data-group-id="6391617739-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="6391617739-2">]</span></code></pre>
  </section>
</section>
<section class="detail" id="list_users/0">

  <div class="detail-header">
    <a href="#list_users/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_users()</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L119" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns the list of users.</p><h2 id="list_users/0-examples" class="section-heading">
  <a href="#list_users/0-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">list_users</span><span class="p" data-group-id="9391446139-1">(</span><span class="p" data-group-id="9391446139-1">)</span><span class="w">
</span><span class="p" data-group-id="9391446139-2">[</span><span class="p" data-group-id="9391446139-3">%</span><span class="nc" data-group-id="9391446139-3">User</span><span class="p" data-group-id="9391446139-3">{</span><span class="p" data-group-id="9391446139-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="9391446139-2">]</span></code></pre>
  </section>
</section>
<section class="detail" id="project_author_count/1">

  <div class="detail-header">
    <a href="#project_author_count/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">project_author_count(project)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L557" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="project_authors/1">

  <div class="detail-header">
    <a href="#project_authors/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">project_authors(project_ids)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L570" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="search_authors_matching/1">

  <div class="detail-header">
    <a href="#search_authors_matching/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">search_authors_matching(query)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L441" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Searches for a list of authors with an email matching the exact string</p>
  </section>
</section>
<section class="detail" id="set_author_preference/3">

  <div class="detail-header">
    <a href="#set_author_preference/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">set_author_preference(author_id, key, value)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L496" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Set's an author preference to the provided value at a given key</p><p>See AuthorPreferences for available key options</p>
  </section>
</section>
<section class="detail" id="update_author/2">

  <div class="detail-header">
    <a href="#update_author/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">update_author(author, attrs)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L351" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Updates an author.</p><h2 id="update_author/2-examples" class="section-heading">
  <a href="#update_author/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">update_author</span><span class="p" data-group-id="5918625014-1">(</span><span class="n">author</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5918625014-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">new_value</span><span class="p" data-group-id="5918625014-2">}</span><span class="p" data-group-id="5918625014-1">)</span><span class="w">
</span><span class="p" data-group-id="5918625014-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5918625014-4">%</span><span class="nc" data-group-id="5918625014-4">Author</span><span class="p" data-group-id="5918625014-4">{</span><span class="p" data-group-id="5918625014-4">}</span><span class="p" data-group-id="5918625014-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">update_author</span><span class="p" data-group-id="5918625014-5">(</span><span class="n">author</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5918625014-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="5918625014-6">}</span><span class="p" data-group-id="5918625014-5">)</span><span class="w">
</span><span class="p" data-group-id="5918625014-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5918625014-8">%</span><span class="nc" data-group-id="5918625014-8">Ecto.Changeset</span><span class="p" data-group-id="5918625014-8">{</span><span class="p" data-group-id="5918625014-8">}</span><span class="p" data-group-id="5918625014-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="update_user/2">

  <div class="detail-header">
    <a href="#update_user/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">update_user(user, attrs)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L206" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Updates a user.</p><h2 id="update_user/2-examples" class="section-heading">
  <a href="#update_user/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">update_user</span><span class="p" data-group-id="9073145521-1">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9073145521-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">new_value</span><span class="p" data-group-id="9073145521-2">}</span><span class="p" data-group-id="9073145521-1">)</span><span class="w">
</span><span class="p" data-group-id="9073145521-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9073145521-4">%</span><span class="nc" data-group-id="9073145521-4">User</span><span class="p" data-group-id="9073145521-4">{</span><span class="p" data-group-id="9073145521-4">}</span><span class="p" data-group-id="9073145521-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">update_user</span><span class="p" data-group-id="9073145521-5">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9073145521-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="9073145521-6">}</span><span class="p" data-group-id="9073145521-5">)</span><span class="w">
</span><span class="p" data-group-id="9073145521-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9073145521-8">%</span><span class="nc" data-group-id="9073145521-8">Ecto.Changeset</span><span class="p" data-group-id="9073145521-8">{</span><span class="p" data-group-id="9073145521-8">}</span><span class="p" data-group-id="9073145521-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="update_user_platform_roles/2">

  <div class="detail-header">
    <a href="#update_user_platform_roles/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">update_user_platform_roles(user, roles)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L252" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Updates the platform roles associated with a user</p><h2 id="update_user_platform_roles/2-examples" class="section-heading">
  <a href="#update_user_platform_roles/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">update_user_platform_roles</span><span class="p" data-group-id="8500107148-1">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">roles</span><span class="p" data-group-id="8500107148-1">)</span><span class="w">
</span><span class="p" data-group-id="8500107148-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="n">user</span><span class="p" data-group-id="8500107148-2">}</span><span class="w">       </span><span class="o">-&gt;</span><span class="w"> </span><span class="c1"># Updated with success</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">update_user_platform_roles</span><span class="p" data-group-id="8500107148-3">(</span><span class="n">user</span><span class="p">,</span><span class="w"> </span><span class="n">roles</span><span class="p" data-group-id="8500107148-3">)</span><span class="w">
</span><span class="p" data-group-id="8500107148-4">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">changeset</span><span class="p" data-group-id="8500107148-4">}</span><span class="w"> </span><span class="o">-&gt;</span><span class="w"> </span><span class="c1"># Something went wrong</span></code></pre>
  </section>
</section>
<section class="detail" id="user_confirmation_pending?/1">

  <div class="detail-header">
    <a href="#user_confirmation_pending?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">user_confirmation_pending?(user)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L629" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns whether the user account is waiting for confirmation or not.</p><h2 id="user_confirmation_pending?/1-examples" class="section-heading">
  <a href="#user_confirmation_pending?/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">user_confirmation_pending?</span><span class="p" data-group-id="0731776541-1">(</span><span class="p" data-group-id="0731776541-2">%{</span><span class="ss">email_confirmation_token</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;token&quot;</span><span class="p">,</span><span class="w"> </span><span class="ss">email_confirmed_at</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p" data-group-id="0731776541-2">}</span><span class="p" data-group-id="0731776541-1">)</span><span class="w">
</span><span class="no">true</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">user_confirmation_pending?</span><span class="p" data-group-id="0731776541-3">(</span><span class="p" data-group-id="0731776541-4">%{</span><span class="ss">email_confirmation_token</span><span class="p">:</span><span class="w"> </span><span class="no">nil</span><span class="p">,</span><span class="w"> </span><span class="ss">email_confirmed_at</span><span class="p">:</span><span class="w"> </span><span class="sx">~U[2022-01-11 16:54:00Z]</span><span class="p" data-group-id="0731776541-4">}</span><span class="p" data-group-id="0731776541-3">)</span><span class="w">
</span><span class="no">false</span></code></pre>
  </section>
</section>
<section class="detail" id="user_is_guest?/1">

  <div class="detail-header">
    <a href="#user_is_guest?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">user_is_guest?(conn)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L295" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns true if a user is signed in as guest</p>
  </section>
</section>
<section class="detail" id="user_is_independent_learner?/1">

  <div class="detail-header">
    <a href="#user_is_independent_learner?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">user_is_independent_learner?(current_user)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L308" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns true if a user is signed in as an independent learner</p>
  </section>
</section>
<section class="detail" id="user_signed_in?/1">

  <div class="detail-header">
    <a href="#user_signed_in?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">user_signed_in?(conn)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/accounts.ex#L288" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns true if a user is signed in</p>
  </section>
</section>

          </div>
        </section>

      <footer class="footer">

        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.25.2) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
