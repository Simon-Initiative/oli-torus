{"version":3,"file":"modal.js","sourceRoot":"","sources":["../../../src/hooks/modal.ts"],"names":[],"mappings":"AAAA,MAAM,CAAC,MAAM,WAAW,GAAG;IACzB,OAAO;QACL,iCAAiC;QACjC,MAAM,EAAE,GAAG,IAAI,CAAC,EAAE,CAAC,YAAY,CAAC,IAAI,CAAC,CAAC;QACrC,CAAC,CAAC,GAAG,GAAG,EAAE,CAAS,CAAC,KAAK,CAAC,EAAE,CAAC,CAAC;QAE/B,IAAI,CAAC,UAAU,EAAE,CAAC;QAElB,iCAAiC;QAChC,IAAY,CAAC,WAAW,CAAC,eAAe,EAAE,GAAG,EAAE;YAC7C,CAAC,CAAC,GAAG,GAAG,EAAE,CAAS,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;QACrC,CAAC,CAAC,CAAC;QAEH,iEAAiE;QACjE,2CAA2C;QAC3C,CAAC,CAAC,IAAI,EAAE,EAAE,CAAC,CAAC,EAAE,CAAC,iBAAiB,EAAE,GAAG,EAAE;YACpC,IAAY,CAAC,SAAS,CAAC,kBAAkB,CAAC,CAAC;YAC5C,IAAI,CAAC,YAAY,EAAE,CAAC;QACtB,CAAC,CAAC,CAAC;IACL,CAAC;IACD,UAAU;QACR,0FAA0F;QAC1F,oFAAoF;QACpF,MAAM,cAAc,GAAG,MAAM,CAAC,UAAU,GAAG,QAAQ,CAAC,eAAe,CAAC,WAAW,CAAC;QAChF,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,GAAG,cAAc,IAAI,CAAC;QACzD,2BAA2B;QAC3B,IAAI,CAAC,cAAc,GAAG,MAAM,CAAC,WAAW,IAAI,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC;QACpE,0CAA0C;QAC1C,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,GAAG,CAAC,cAAc,CAAC,CAAC;QAC5C,+DAA+D;QAC/D,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,IAAI,IAAI,CAAC,cAAc,IAAI,CAAC;IACxD,CAAC;IACD,YAAY;QACV,0FAA0F;QAC1F,8BAA8B;QAC9B,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,YAAY,GAAG,EAAE,CAAC;QACtC,6CAA6C;QAC7C,QAAQ,CAAC,IAAI,CAAC,SAAS,CAAC,MAAM,CAAC,cAAc,CAAC,CAAC;QAC/C,+DAA+D;QAC/D,QAAQ,CAAC,eAAe,CAAC,SAAS,GAAG,IAAI,CAAC,cAAc,CAAC;QACzD,iDAAiD;QACjD,QAAQ,CAAC,IAAI,CAAC,KAAK,CAAC,GAAG,GAAG,EAAE,CAAC;IAC/B,CAAC;CACF,CAAC","sourcesContent":["export const ModalLaunch = {\n  mounted(): void {\n    // initialize the bootstrap modal\n    const id = this.el.getAttribute('id');\n    ($('#' + id) as any).modal({});\n\n    this.lockScroll();\n\n    // wire up server-side hide event\n    (this as any).handleEvent('_bsmodal.hide', () => {\n      ($('#' + id) as any).modal('hide');\n    });\n\n    // handle hiding of a modal as a result of many different methods\n    // (modal close button, escape key, etc...)\n    $(`#${id}`).on('hidden.bs.modal', () => {\n      (this as any).pushEvent('_bsmodal.unmount');\n      this.unlockScroll();\n    });\n  },\n  lockScroll(): void {\n    // From https://github.com/excid3/tailwindcss-stimulus-components/blob/master/src/modal.js\n    // Add right padding to the body so the page doesn't shift when we disable scrolling\n    const scrollbarWidth = window.innerWidth - document.documentElement.clientWidth;\n    document.body.style.paddingRight = `${scrollbarWidth}px`;\n    // Save the scroll position\n    this.scrollPosition = window.pageYOffset || document.body.scrollTop;\n    // Add classes to body to fix its position\n    document.body.classList.add('fix-position');\n    // Add negative top position in order for body to stay in place\n    document.body.style.top = `-${this.scrollPosition}px`;\n  },\n  unlockScroll(): void {\n    // From https://github.com/excid3/tailwindcss-stimulus-components/blob/master/src/modal.js\n    // Remove tweaks for scrollbar\n    document.body.style.paddingRight = '';\n    // Remove classes from body to unfix position\n    document.body.classList.remove('fix-position');\n    // Restore the scroll position of the body before it got locked\n    document.documentElement.scrollTop = this.scrollPosition;\n    // Remove the negative top inline style from body\n    document.body.style.top = '';\n  },\n};\n"]}