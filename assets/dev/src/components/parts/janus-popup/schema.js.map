{"version":3,"file":"schema.js","sourceRoot":"","sources":["../../../../../src/components/parts/janus-popup/schema.ts"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable @typescript-eslint/no-non-null-assertion */\nimport { CapiVariableTypes } from '../../../adaptivity/capi';\nimport CustomFieldTemplate from 'apps/authoring/components/PropertyEditor/custom/CustomFieldTemplate';\nimport chroma from 'chroma-js';\nimport { JSONSchema7Object } from 'json-schema';\nimport { parseNumString } from 'utils/common';\nimport { ColorPalette, JanusAbsolutePositioned, JanusCustomCss } from '../types/parts';\n\nexport interface PopupModel extends JanusAbsolutePositioned, JanusCustomCss {\n  description: string;\n  showLabel: boolean;\n  openByDefault: boolean;\n  defaultURL: string;\n  iconURL: string;\n  useToggleBehavior: boolean;\n  isOpen: boolean;\n  visible: boolean;\n  popup: any; // TODO: layout model\n}\n\nexport const schema: JSONSchema7Object = {\n  customCssClass: {\n    title: 'Custom CSS Class',\n    type: 'string',\n  },\n  description: {\n    title: 'Description',\n    type: 'string',\n    default: 'Additional Information',\n    description: 'provides alt text and aria-label content',\n  },\n  showLabel: {\n    title: 'Show Label',\n    type: 'boolean',\n    description: 'specifies whether label is visible',\n    default: true,\n  },\n  openByDefault: {\n    title: 'Open By Default',\n    type: 'boolean',\n    description: 'specifies whether popup should open by default',\n    default: false,\n  },\n  defaultURL: {\n    title: 'Default URL',\n    type: 'string',\n    description: 'default URL for the button icon',\n    default: '/repo/icons/question_mark_orange_32x32.png',\n    enum: [\n      '/repo/icons/question_mark_orange_32x32.png',\n      '/repo/icons/question_mark_red_32x32.png',\n      '/repo/icons/question_mark_green_32x32.png',\n      '/repo/icons/question_mark_blue_32x32.png',\n      '/repo/icons/information_mark_orange_32x32.png',\n      '/repo/icons/information_mark_red_32x32.png',\n      '/repo/icons/information_mark_green_32x32.png',\n      '/repo/icons/information_mark_blue_32x32.png',\n      '/repo/icons/exclamation_mark_orange_32x32.png',\n      '/repo/icons/exclamation_mark_red_32x32.png',\n      '/repo/icons/exclamation_mark_green_32x32.png',\n      '/repo/icons/exclamation_mark_blue_32x32.png',\n    ],\n  },\n  iconURL: {\n    title: 'Icon URL',\n    type: 'string',\n    description: 'Custom URL for the button icon',\n  },\n  useToggleBehavior: {\n    title: 'Use Toggle Behaviour',\n    type: 'boolean',\n    description: 'specifies whether popup toggles open/closed on click or on mouse hover',\n    default: true,\n  },\n  isOpen: {\n    title: 'Is Open',\n    type: 'boolean',\n    description: 'specifies whether popup is opened',\n    default: false,\n  },\n  visible: {\n    title: 'Visible',\n    type: 'boolean',\n    description: 'specifies whether popup will be visible on the screen',\n    default: true,\n  },\n  popup: {\n    type: 'object',\n    properties: {\n      Size: {\n        type: 'object',\n        title: 'Dimensions',\n        properties: {\n          width: { type: 'number' },\n          height: { type: 'number' },\n        },\n      },\n      Position: {\n        type: 'object',\n        title: 'Dimensions',\n        properties: {\n          x: { type: 'number' },\n          y: { type: 'number' },\n          z: { type: 'number' },\n        },\n      },\n      customCssClass: {\n        title: 'Custom CSS Class',\n        type: 'string',\n      },\n      palette: {\n        type: 'object',\n        properties: {\n          backgroundColor: { type: 'string', title: 'Background Color' },\n          borderColor: { type: 'string', title: 'Border Color' },\n          borderRadius: { type: 'string', title: 'Border Radius' },\n          borderStyle: { type: 'string', title: 'Border Style' },\n          borderWidth: { type: 'string', title: 'Border Width' },\n        },\n      },\n    },\n  },\n};\n\nexport const uiSchema = {\n  popup: {\n    'ui:ObjectFieldTemplate': CustomFieldTemplate,\n    'ui:title': 'Popup Window',\n    Position: {\n      'ui:ObjectFieldTemplate': CustomFieldTemplate,\n      'ui:title': 'Position',\n      x: {\n        classNames: 'col-4',\n      },\n      y: {\n        classNames: 'col-4',\n      },\n      z: {\n        classNames: 'col-4',\n      },\n    },\n    Size: {\n      'ui:ObjectFieldTemplate': CustomFieldTemplate,\n      'ui:title': 'Dimensions',\n      width: {\n        classNames: 'col-6',\n      },\n      height: {\n        classNames: 'col-6',\n      },\n    },\n    palette: {\n      'ui:ObjectFieldTemplate': CustomFieldTemplate,\n      'ui:title': 'Background & Border',\n      backgroundColor: {\n        'ui:widget': 'ColorPicker',\n      },\n      borderColor: {\n        'ui:widget': 'ColorPicker',\n      },\n      borderStyle: { classNames: 'col-6' },\n      borderWidth: { classNames: 'col-6' },\n    },\n  },\n};\n\nexport const createSchema = (): Partial<PopupModel> => ({\n  width: 32,\n  height: 32,\n  customCssClass: '',\n  description: '',\n  questionFlow: 'LRTB',\n  showLabel: true,\n  openByDefault: false,\n  defaultURL: '/repo/icons/question_mark_orange_32x32.png',\n  iconURL: '',\n  useToggleBehavior: true,\n  isOpen: false,\n  visible: true,\n  popup: {\n    custom: {\n      customCssClass: '',\n      x: 0,\n      y: 0,\n      z: 0,\n      width: 350,\n      height: 350,\n      palette: {\n        useHtmlProps: true,\n        backgroundColor: '#ffffff',\n        borderColor: '#ffffff',\n        borderRadius: '0',\n        borderStyle: 'solid',\n        borderWidth: '1px',\n      },\n    },\n    partsLayout: [\n      {\n        id: 'header-text',\n        type: 'janus-text-flow',\n        custom: {\n          x: 10,\n          y: 10,\n          z: 0,\n          width: 100,\n          height: 50,\n          nodes: [\n            {\n              tag: 'p',\n              style: {},\n              children: [\n                {\n                  tag: 'span',\n                  style: {\n                    color: '#000',\n                    fontWeight: 'bold',\n                  },\n                  children: [\n                    {\n                      tag: 'text',\n                      style: {},\n                      text: 'Popup Window Text',\n                      children: [],\n                    },\n                  ],\n                },\n              ],\n            },\n          ],\n        },\n      },\n    ],\n  },\n});\n\nexport const transformModelToSchema = (model: Partial<PopupModel>) => {\n  const { popup } = model;\n\n  if (!popup || !popup.custom) {\n    // TODO: fix it? or what?\n    console.warn('no popup???', { model });\n    return model;\n  }\n\n  const { x, y, z, width, height, palette } = popup.custom;\n\n  const paletteStyles: Partial<ColorPalette> = {\n    backgroundColor: 'transparent',\n    borderColor: 'transparent',\n    borderStyle: 'none',\n    borderWidth: 0,\n    borderRadius: 0,\n  };\n\n  if (palette) {\n    if (palette.useHtmlProps) {\n      paletteStyles.backgroundColor = palette.backgroundColor;\n      paletteStyles.borderColor = palette.borderColor;\n      paletteStyles.borderWidth = parseNumString(palette.borderWidth.toString());\n      paletteStyles.borderStyle = palette.borderStyle;\n      paletteStyles.borderRadius = parseNumString(palette.borderRadius.toString());\n    } else {\n      paletteStyles.borderWidth = `${palette.lineThickness ? palette.lineThickness + 'px' : 0}`;\n      paletteStyles.borderRadius = 0;\n      paletteStyles.borderStyle = palette.lineStyle === 0 ? 'none' : 'solid';\n      let borderColor = 'transparent';\n      if (palette.lineColor! >= 0) {\n        borderColor = chroma(palette.lineColor || 0)\n          .alpha(palette.lineAlpha || 0)\n          .css();\n      }\n      paletteStyles.borderColor = borderColor;\n\n      let bgColor = 'transparent';\n      if (palette.fillColor! >= 0) {\n        bgColor = chroma(palette.fillColor || 0)\n          .alpha(palette.fillAlpha || 0)\n          .css();\n      }\n      paletteStyles.backgroundColor = bgColor;\n    }\n  }\n\n  const result = {\n    ...model,\n    popup: {\n      partsLayout: popup.partsLayout, // pass this along so we don't lose it, but it's not edited here\n      Size: { width, height },\n      Position: { x, y, z },\n      palette: paletteStyles,\n      customCssClass: popup.custom.customCssClass,\n    },\n  };\n\n  /* console.log('POPUP [transformModelToSchema]', { model, result }); */\n\n  return result;\n};\n\n// this should only be returning the contents of the *custom* section of a part\nexport const transformSchemaToModel = (schema: Partial<PopupModel>) => {\n  const { popup: popupSchema } = schema;\n  const result: Partial<PopupModel> = {\n    ...schema,\n    // the parent needs to match the z of the popup, because the popup window lives inside of it\n    z: popupSchema.Position.z,\n    popup: {\n      partsLayout: popupSchema.partsLayout,\n      custom: {\n        x: popupSchema.Position.x,\n        y: popupSchema.Position.y,\n        z: popupSchema.Position.z,\n        width: popupSchema.Size.width,\n        height: popupSchema.Size.height,\n        customCssClass: popupSchema.customCssClass,\n      },\n    },\n  };\n\n  if (popupSchema.palette) {\n    result.popup.custom.palette = {\n      useHtmlProps: true,\n      backgroundColor: popupSchema.palette.backgroundColor || 'transparent',\n      borderColor: popupSchema.palette.borderColor || 'transparent',\n      borderRadius: parseNumString(popupSchema.palette.borderRadius.toString()) || 0,\n      borderWidth: parseNumString(popupSchema.palette.borderWidth.toString()) || 0,\n      borderStyle: popupSchema.palette.borderStyle || 'none',\n    };\n  }\n\n  /* console.log('POPUP [transformSchemaToModel]', { schema, result }); */\n\n  return result;\n};\n\nexport const getCapabilities = () => ({\n  configure: true,\n});\n\nexport const adaptivitySchema = {\n  isOpen: CapiVariableTypes.BOOLEAN,\n  openByDefault: CapiVariableTypes.BOOLEAN,\n  visible: CapiVariableTypes.BOOLEAN,\n};\n"]}