{"version":3,"file":"McqAuthor.jsx","sourceRoot":"","sources":["../../../../../src/components/parts/janus-mcq/McqAuthor.tsx"],"names":[],"mappings":";;;;;;;;;AACA,OAAO,KAAK,EAAE,EAAiB,WAAW,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAC/E,OAAO,QAAQ,MAAM,WAAW,CAAC;AACjC,OAAO,EAAE,KAAK,EAAE,YAAY,EAAE,MAAM,cAAc,CAAC;AAEnD,OAAO,EAAE,OAAO,EAAE,MAAM,0BAA0B,CAAC;AAEnD,OAAO,EAAE,cAAc,EAAE,OAAO,IAAI,kBAAkB,EAAE,MAAM,gCAAgC,CAAC;AAC/F,OAAO,EACL,gBAAgB,EAChB,uBAAuB,GACxB,MAAM,8CAA8C,CAAC;AACtD,OAAO,aAAa,MAAM,yEAAyE,CAAC;AACpG,8CAA8C;AAC9C,MAAM,MAAM,GAAkB,KAAK,CAAC,IAAI,CAAC,CAAC,EAAE,IAAI,EAAE,IAAI,EAAE,MAAM,EAAE,IAAI,EAAE,EAAE,EAAE;IACxE,MAAM,UAAU,GAA2D,EAAE,CAAC;IAC9E,IAAI,IAAI,EAAE;QACR,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC,SAAS,CAAC,IAAI,CAAC,CAAC;KACxC;IACD,IAAI,IAAI,EAAE;QACR,UAAU,CAAC,IAAI,GAAG,IAAI,CAAC;KACxB;IACD,UAAU,CAAC,gBAAgB,GAAG,IAAI,CAAC;IACnC,IAAI,IAAI,KAAK,CAAC,EAAE;QACd,MAAM,CAAC,GAAG,GAAG,EAAE,CAAC,CACd,CAAC,GAAG,CAAC,KAAK,CAAC,CAAC,EAAE,OAAO,EAAE,EAAE,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,aAAa,CAAC,kBAAkB,EAAE,UAAU,CAAC,CAAC,EAAE,GAAG,CAAC,CACzF,CAAC;QAEF,OAAO,MAAM,IAAI,QAAQ,CAAC,YAAY,CAAC,CAAC,CAAC,CAAC,AAAD,EAAG,EAAE,MAAM,CAAC,CAAC;KACvD;AACH,CAAC,CAAC,CAAC;AACH,MAAM,SAAS,GAAiD,CAAC,KAAK,EAAE,EAAE;IACxE,MAAM,EAAE,EAAE,EAAE,KAAK,EAAE,aAAa,EAAE,WAAW,EAAE,iBAAiB,EAAE,eAAe,EAAE,GAAG,KAAK,CAAC;IAE5F,MAAM,EACJ,CAAC,GAAG,CAAC,EACL,CAAC,GAAG,CAAC,EACL,CAAC,GAAG,CAAC,EACL,KAAK,EACL,iBAAiB,EACjB,QAAQ,EACR,WAAW,EACX,cAAc,EACd,UAAU,EACV,cAAc,GAAG,KAAK,GACvB,GAAG,KAAK,CAAC;IACV,MAAM,MAAM,GAAkB;QAC5B,KAAK;KACN,CAAC;IAEF,MAAM,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IAC3E,MAAM,CAAC,eAAe,EAAE,kBAAkB,CAAC,GAAG,QAAQ,CAAU,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC;IAC7F,MAAM,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IAC3E,MAAM,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IAC3E,MAAM,CAAC,mBAAmB,EAAE,sBAAsB,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IAC/E,MAAM,CAAC,SAAS,EAAE,YAAY,CAAC,GAAG,QAAQ,CAAQ,EAAE,CAAC,CAAC;IACtD,MAAM,CAAC,WAAW,EAAE,cAAc,CAAC,GAAG,QAAQ,CAAM,KAAK,CAAC,CAAC;IAC3D,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IACnD,MAAM,CAAC,YAAY,EAAE,eAAe,CAAC,GAAG,QAAQ,CAAS,CAAC,CAAC,CAAC;IAC5D,SAAS,CAAC,GAAG,EAAE;QACb,kBAAkB,CAAC,YAAY,CAAC,aAAa,CAAC,CAAC,CAAC;IAClD,CAAC,EAAE,CAAC,aAAa,CAAC,CAAC,CAAC;IAEpB,MAAM,sBAAsB,GAAG,WAAW,CAAC,GAAS,EAAE;QACpD,MAAM,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;QAChC,IAAI,mBAAmB,EAAE;YACvB,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,YAAY,EAAE,CAAC,CAAC,CAAC;SAC7C;aAAM;YACL,UAAU,CAAC,QAAQ,CAAC,YAAY,CAAC,CAAC,KAAK,GAAG,SAAS,CAAC;SACrD;QACD,MAAM,eAAe,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,UAAU,EAAE,CAAC,CAAC;QACpD,kBAAkB,CAAC,KAAK,CAAC,CAAC;QAE1B,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAC5B,sBAAsB,CAAC,KAAK,CAAC,CAAC;IAChC,CAAC,CAAA,EAAE,CAAC,KAAK,EAAE,SAAS,EAAE,YAAY,EAAE,QAAQ,EAAE,mBAAmB,EAAE,iBAAiB,CAAC,CAAC,CAAC;IAEvF,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAqB,IAAI,CAAC,CAAC;IACnE,MAAM,UAAU,GAAG,WAAW,CAAC,CAAO,MAAM,EAAE,EAAE;QAC9C,QAAQ,CAAC,IAAI,CAAC,CAAC;IACjB,CAAC,CAAA,EAAE,EAAE,CAAC,CAAC;IAEP,SAAS,CAAC,GAAG,EAAE;QACb,UAAU,CAAC,KAAK,CAAC,CAAC;IACpB,CAAC,EAAE,EAAE,CAAC,CAAC;IACP,SAAS,CAAC,GAAG,EAAE;QACb,yCAAyC;QACzC,UAAU,CAAC,GAAG,EAAE;YACd,MAAM,EAAE,GAAG,QAAQ,CAAC,cAAc,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC;YACjD,0DAA0D;YAC1D,IAAI,EAAE,EAAE;gBACN,WAAW,CAAC,EAAE,CAAC,CAAC;aACjB;QACH,CAAC,EAAE,EAAE,CAAC,CAAC;IACT,CAAC,EAAE,CAAC,eAAe,EAAE,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IAEpC,SAAS,CAAC,GAAG,EAAE;QACb,qCAAqC;QACrC,KAAK,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,GAAG,KAAK,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;IACvC,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,SAAS,CAAC,GAAG,EAAE;QACb,cAAc,EAAE,CAAC;IACnB,CAAC,EAAE,EAAE,CAAC,CAAC;IAEP,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YACjB,OAAO;SACR;QACD,MAAM,oBAAoB,GAAG;YAC3B,gBAAgB,CAAC,SAAS;YAC1B,gBAAgB,CAAC,cAAc;YAC/B,gBAAgB,CAAC,gBAAgB;SAClC,CAAC;QACF,MAAM,aAAa,GAAG,oBAAoB,CAAC,GAAG,CAAC,CAAC,gBAAkC,EAAE,EAAE;YACpF,MAAM,OAAO,GAAG,CAAC,OAAY,EAAE,EAAE;gBAC/B,8FAA8F;gBAC9F,IAAI,CAAC,OAAO,EAAE;oBACZ,2EAA2E;oBAC3E,iEAAiE;oBACjE,OAAO;iBACR;gBACD,QAAQ,gBAAgB,EAAE;oBACxB,KAAK,gBAAgB,CAAC,SAAS;wBAC7B;4BACE,MAAM,EAAE,MAAM,EAAE,SAAS,EAAE,GAAG,OAAO,CAAC;4BACtC,IAAI,MAAM,KAAK,EAAE,EAAE;gCACjB,kBAAkB,CAAC,KAAK,CAAC,CAAC;gCAC1B,oBAAoB,CAAC,CAAC,iBAAiB,CAAC,CAAC;6BAC1C;yBACF;wBACD,MAAM;oBACR,KAAK,gBAAgB,CAAC,cAAc;wBAClC;4BACE,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC;4BAC/B,IAAI,MAAM,KAAK,EAAE,EAAE;gCACjB,sBAAsB,EAAE,CAAC;6BAC1B;yBACF;wBACD,MAAM;oBACR,KAAK,gBAAgB,CAAC,gBAAgB;wBACpC;4BACE,MAAM,EAAE,EAAE,EAAE,MAAM,EAAE,GAAG,OAAO,CAAC;4BAC/B,IAAI,MAAM,KAAK,EAAE,EAAE;gCACjB,kBAAkB,CAAC,KAAK,CAAC,CAAC;6BAC3B;yBACF;wBACD,MAAM;iBACT;YACH,CAAC,CAAC;YACF,MAAM,KAAK,GAAG,uBAAuB,CAAC,KAAK,CAAC,MAAM,EAAE,gBAAgB,EAAE,OAAO,CAAC,CAAC;YAC/E,OAAO,KAAK,CAAC;QACf,CAAC,CAAC,CAAC;QACH,OAAO,GAAG,EAAE;YACV,aAAa,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;gBAC9B,KAAK,EAAE,CAAC;YACV,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,EAAE,sBAAsB,EAAE,YAAY,EAAE,iBAAiB,CAAC,CAAC,CAAC;IAE5E,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,gBAAgB,GAAG,CAAC,CAAM,EAAE,EAAE,GAAE,CAAC,CAAC;QAExC,MAAM,kBAAkB,GAAG,GAAG,EAAE;YAC9B,IAAI,CAAC,eAAe,EAAE;gBACpB,OAAO;aACR,CAAC,WAAW;YACb,mCAAmC;YACnC,kBAAkB,CAAC,KAAK,CAAC,CAAC;YAC1B,iBAAiB,CAAC,EAAE,EAAE,EAAE,CAAC,CAAC;QAC5B,CAAC,CAAC;QAEF,MAAM,kBAAkB,GAAG,CAAC,CAAM,EAAE,EAAE;YACpC,IAAI,CAAC,eAAe,EAAE;gBACpB,OAAO;aACR,CAAC,WAAW;YACb,MAAM,EAAE,OAAO,EAAE,QAAQ,EAAE,GAAG,CAAC,CAAC,MAAM,CAAC;YACvC,YAAY,CAAC,OAAO,CAAC,KAAK,CAAC,CAAC;QAC9B,CAAC,CAAC;QAEF,IAAI,eAAe,EAAE;YACnB,QAAQ,CAAC,gBAAgB,CAAC,GAAG,kBAAkB,SAAS,EAAE,kBAAkB,CAAC,CAAC;YAC9E,QAAQ,CAAC,gBAAgB,CAAC,GAAG,kBAAkB,OAAO,EAAE,gBAAgB,CAAC,CAAC;YAC1E,QAAQ,CAAC,gBAAgB,CAAC,GAAG,kBAAkB,SAAS,EAAE,kBAAkB,CAAC,CAAC;SAC/E;QAED,OAAO,GAAG,EAAE;YACV,QAAQ,CAAC,mBAAmB,CAAC,GAAG,kBAAkB,SAAS,EAAE,kBAAkB,CAAC,CAAC;YACjF,QAAQ,CAAC,mBAAmB,CAAC,GAAG,kBAAkB,OAAO,EAAE,gBAAgB,CAAC,CAAC;YAC7E,QAAQ,CAAC,mBAAmB,CAAC,GAAG,kBAAkB,SAAS,EAAE,kBAAkB,CAAC,CAAC;QACnF,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,KAAK,EAAE,eAAe,EAAE,KAAK,CAAC,CAAC,CAAC;IACpC,MAAM,OAAO,GAAU,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,GAAG,CAAC,CAAC,IAAS,EAAE,KAAa,EAAE,EAAE,CAAC,iCAC9D,IAAI,KACP,KAAK,EAAE,KAAK,EACZ,KAAK,EAAE,KAAK,GAAG,CAAC,IAChB,CAAC,CAAC;IAEJ,IAAI,OAAO,GAAG,CAAC,CAAC;IAChB,IAAI,cAAc,KAAK,aAAa,EAAE;QACpC,OAAO,GAAG,CAAC,CAAC;KACb;IACD,IAAI,cAAc,KAAK,eAAe,EAAE;QACtC,OAAO,GAAG,CAAC,CAAC;KACb;IACD,IAAI,cAAc,KAAK,cAAc,EAAE;QACrC,OAAO,GAAG,CAAC,CAAC;KACb;IACD,MAAM,CAAC,IAAI,EAAE,OAAO,CAAC,GAAG,QAAQ,CAAe,EAAE,CAAC,CAAC;IACnD,MAAM,OAAO,GAAG,CAAC,KAAU,EAAE,MAAc,EAAE,EAAE;QAC7C,eAAe,CAAC,KAAK,CAAC,CAAC;QACvB,IAAI,MAAM,KAAK,CAAC,EAAE;YAChB,oBAAoB,CAAC,IAAI,CAAC,CAAC;YAC3B,sBAAsB,CAAC,KAAK,CAAC,CAAC;YAC9B,IAAI,QAAQ,CAAC,KAAK,CAAC,CAAC,KAAK,IAAI,OAAO,QAAQ,CAAC,KAAK,CAAC,CAAC,KAAK,KAAK,QAAQ,EAAE;gBACtE,OAAO,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,KAA0B,CAAiB,CAAC,CAAC;aACjF;iBAAM,IAAI,KAAK,CAAC,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,EAAE;gBAC/C,OAAO,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;aAChC;YACD,YAAY,CAAC,QAAQ,CAAC,KAAK,CAAC,CAAC,KAAK,CAAC,CAAC;YAEpC,WAAW,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,IAAI,EAAE,OAAO,EAAE,EAAE,UAAU,EAAE,KAAK,EAAE,EAAE,CAAC,CAAC;SACtE;aAAM,IAAI,MAAM,KAAK,CAAC,EAAE;YACvB,oBAAoB,CAAC,KAAK,CAAC,CAAC;YAC5B,sBAAsB,CAAC,KAAK,CAAC,CAAC;YAC9B,MAAM,UAAU,GAAG,KAAK,CAAC,KAAK,CAAC,CAAC;YAChC,IAAI,mBAAmB,EAAE;gBACvB,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,EAAE,CAAC,CAAC,CAAC;aACtC;iBAAM;gBACL,UAAU,CAAC,QAAQ,CAAC,MAAM,CAAC,KAAK,GAAG,CAAC,EAAE,CAAC,EAAE;oBACvC,KAAK,EAAE;wBACL;4BACE,GAAG,EAAE,GAAG;4BACR,KAAK,EAAE,EAAE;4BACT,QAAQ,EAAE;gCACR;oCACE,QAAQ,EAAE,CAAC,EAAE,QAAQ,EAAE,EAAE,EAAE,GAAG,EAAE,MAAM,EAAE,IAAI,EAAE,UAAU,QAAQ,CAAC,MAAM,GAAG,CAAC,EAAE,EAAE,CAAC;oCAChF,KAAK,EAAE;wCACL,eAAe,EAAE,aAAa;wCAC9B,KAAK,EAAE,SAAS;wCAChB,QAAQ,EAAE,MAAM;qCACjB;oCACD,GAAG,EAAE,MAAM;iCACZ;6BACF;yBACF;qBACF;oBACD,UAAU,EAAE,CAAC;oBACb,KAAK,EAAE,QAAQ,CAAC,MAAM;oBACtB,KAAK,EAAE,QAAQ,CAAC,MAAM;iBACvB,CAAC,CAAC;aACJ;YACD,eAAe,CAAC,EAAE,EAAE,EAAE,QAAQ,EAAE,UAAU,EAAE,CAAC,CAAC;SAC/C;aAAM;YACL,oBAAoB,CAAC,IAAI,CAAC,CAAC;YAC3B,sBAAsB,CAAC,IAAI,CAAC,CAAC;YAC7B,oBAAoB,CAAC,KAAK,CAAC,CAAC;SAC7B;IACH,CAAC,CAAC;IACF,MAAM,gBAAgB,GAAG,GAAG,EAAE;QAC5B,oBAAoB,CAAC,KAAK,CAAC,CAAC;QAC5B,sBAAsB,EAAE,CAAC;IAC3B,CAAC,CAAC;IACF,OAAO,CACL,CAAC,KAAK,CAAC,QAAQ,CACb;MAAA,CAAC,iBAAiB,IAAI,QAAQ,IAAI,CAAC,MAAM,CAAC,IAAI,CAAC,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,EAAE,CAAC,IAAI,CAAC,CAAC,IAAI,CAAC,CAAC,MAAM,CAAC,CAAC,QAAQ,CAAC,EAAG,CAC3F;MAAA,CACE,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,MAAM,CAAC,CAAC,SAAS,CAAC,CAAC,WAAW,CAAC,CACnE;UAAA,CAAC,KAAK,CACJ;YAAA,CAAC;;;;;;;;;;;;;;;SAeJ,CACC;UAAA,EAAE,KAAK,CACP;UAAA,CAAC,OAAO,aAAP,OAAO,uBAAP,OAAO,CAAE,GAAG,CAAC,CAAC,IAAI,EAAE,KAAK,EAAE,EAAE,CAAC,CAC7B,CAAC,OAAO,CACN,KAAK,CAAC,CAAC,KAAK,CAAC,CACb,GAAG,CAAC,CAAC,GAAG,EAAE,SAAS,KAAK,EAAE,CAAC,CAC3B,UAAU,CAAC,CAAC,OAAO,CAAC,MAAM,CAAC,CAC3B,UAAU,CAAC,CAAC,UAAU,CAAC,CACvB,MAAM,CAAC,CAAC,GAAG,EAAE,SAAS,KAAK,EAAE,CAAC,CAC9B,OAAO,CAAC,CAAC,OAAO,EAAE,EAAE,CAAC,CACrB,GAAG,CAAC,CAAC,IAAI,CAAC,KAAK,CAAC,CAChB,IAAI,IAAI,CAAC,CACT,CAAC,CAAC,CAAC,CAAC,CAAC,CACL,CAAC,CAAC,CAAC,CAAC,CAAC,CACL,WAAW,CAAC,CAAC,WAAW,CAAC,CACzB,cAAc,CAAC,CAAC,cAAc,CAAC,CAC/B,QAAQ,CAAC,CAAC,KAAK,CAAC,CAChB,iBAAiB,CAAC,CAAC,iBAAiB,CAAC,CACrC,OAAO,CAAC,CAAC,OAAO,CAAC,CACjB,mBAAmB,CAAC,CAAC,OAAO,CAAC,CAC7B,aAAa,CAAC,CAAC,iBAAiB,CAAC,EACjC,CACH,CAAC,CACF;UAAA,CAAC,iBAAiB,IAAI,CACpB,CAAC,aAAa,CACZ,IAAI,CAAC,CAAC,iBAAiB,CAAC,CACxB,WAAW,CAAC,YAAY,CACxB,WAAW,CAAC,YAAY,CACxB,aAAa,CAAC,CAAC,GAAG,EAAE,CAAC,gBAAgB,EAAE,CAAC,CACxC,aAAa,CAAC,CAAC,GAAG,EAAE;oBAClB,oBAAoB,CAAC,KAAK,CAAC,CAAC;gBAC9B,CAAC,CAAC,EACF,CACH,CACH;QAAA,EAAE,GAAG,CAAC,CAEV;IAAA,EAAE,KAAK,CAAC,QAAQ,CAAC,CAClB,CAAC;AACJ,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,OAAO,GAAG,WAAW,CAAC;AAEnC,eAAe,SAAS,CAAC","sourcesContent":["import { AuthorPartComponentProps } from 'components/parts/types/parts';\nimport React, { CSSProperties, useCallback, useEffect, useState } from 'react';\nimport ReactDOM from 'react-dom';\nimport { clone, parseBoolean } from 'utils/common';\nimport { MarkupTree } from '../janus-text-flow/TextFlow';\nimport { MCQItem } from './MultipleChoiceQuestion';\nimport { McqModel } from './schema';\nimport { registerEditor, tagName as quillEditorTagName } from '../janus-text-flow/QuillEditor';\nimport {\n  NotificationType,\n  subscribeToNotification,\n} from 'apps/delivery/components/NotificationContext';\nimport ConfirmDelete from '../../../../src/apps/authoring/components/Modal/DeleteConfirmationModal';\n// eslint-disable-next-line react/display-name\nconst Editor: React.FC<any> = React.memo(({ html, tree, portal, type }) => {\n  const quillProps: { tree?: any; html?: any; showimagecontrol?: boolean } = {};\n  if (tree) {\n    quillProps.tree = JSON.stringify(tree);\n  }\n  if (html) {\n    quillProps.html = html;\n  }\n  quillProps.showimagecontrol = true;\n  if (type === 1) {\n    const E = () => (\n      <div style={{ padding: 20 }}>{React.createElement(quillEditorTagName, quillProps)}</div>\n    );\n\n    return portal && ReactDOM.createPortal(<E />, portal);\n  }\n});\nconst McqAuthor: React.FC<AuthorPartComponentProps<McqModel>> = (props) => {\n  const { id, model, configuremode, onConfigure, onCancelConfigure, onSaveConfigure } = props;\n\n  const {\n    x = 0,\n    y = 0,\n    z = 0,\n    width,\n    multipleSelection,\n    mcqItems,\n    verticalGap,\n    customCssClass,\n    layoutType,\n    overrideHeight = false,\n  } = model;\n  const styles: CSSProperties = {\n    width,\n  };\n\n  const [showConfirmDelete, setShowConfirmDelete] = useState<boolean>(false);\n  const [inConfigureMode, setInConfigureMode] = useState<boolean>(parseBoolean(configuremode));\n  const [showConfigureMode, setShowConfigureMode] = useState<boolean>(false);\n  const [editOptionClicked, setEditOptionClicked] = useState<boolean>(false);\n  const [deleteOptionClicked, setDeleteOptionClicked] = useState<boolean>(false);\n  const [textNodes, setTextNodes] = useState<any[]>([]);\n  const [windowModel, setWindowModel] = useState<any>(model);\n  const [ready, setReady] = useState<boolean>(false);\n  const [currentIndex, setCurrentIndex] = useState<number>(0);\n  useEffect(() => {\n    setInConfigureMode(parseBoolean(configuremode));\n  }, [configuremode]);\n\n  const handleNotificationSave = useCallback(async () => {\n    const modelClone = clone(model);\n    if (deleteOptionClicked) {\n      modelClone.mcqItems.splice(currentIndex, 1);\n    } else {\n      modelClone.mcqItems[currentIndex].nodes = textNodes;\n    }\n    await onSaveConfigure({ id, snapshot: modelClone });\n    setInConfigureMode(false);\n\n    setEditOptionClicked(false);\n    setDeleteOptionClicked(false);\n  }, [model, textNodes, currentIndex, mcqItems, deleteOptionClicked, editOptionClicked]);\n\n  const [portalEl, setPortalEl] = useState<HTMLElement | null>(null);\n  const initialize = useCallback(async (pModel) => {\n    setReady(true);\n  }, []);\n\n  useEffect(() => {\n    initialize(model);\n  }, []);\n  useEffect(() => {\n    // timeout to give modal a moment to load\n    setTimeout(() => {\n      const el = document.getElementById(props.portal);\n      // console.log('portal changed', { el, p: props.portal });\n      if (el) {\n        setPortalEl(el);\n      }\n    }, 10);\n  }, [inConfigureMode, props.portal]);\n\n  useEffect(() => {\n    // all activities *must* emit onReady\n    props.onReady({ id: `${props.id}` });\n  }, []);\n\n  useEffect(() => {\n    registerEditor();\n  }, []);\n\n  useEffect(() => {\n    if (!props.notify) {\n      return;\n    }\n    const notificationsHandled = [\n      NotificationType.CONFIGURE,\n      NotificationType.CONFIGURE_SAVE,\n      NotificationType.CONFIGURE_CANCEL,\n    ];\n    const notifications = notificationsHandled.map((notificationType: NotificationType) => {\n      const handler = (payload: any) => {\n        /* console.log(`${notificationType.toString()} notification event [PopupAuthor]`, payload); */\n        if (!payload) {\n          // if we don't have anything, we won't even have an id to know who it's for\n          // for these events we need something, it's not for *all* of them\n          return;\n        }\n        switch (notificationType) {\n          case NotificationType.CONFIGURE:\n            {\n              const { partId, configure } = payload;\n              if (partId === id) {\n                setInConfigureMode(false);\n                setShowConfigureMode(!showConfigureMode);\n              }\n            }\n            break;\n          case NotificationType.CONFIGURE_SAVE:\n            {\n              const { id: partId } = payload;\n              if (partId === id) {\n                handleNotificationSave();\n              }\n            }\n            break;\n          case NotificationType.CONFIGURE_CANCEL:\n            {\n              const { id: partId } = payload;\n              if (partId === id) {\n                setInConfigureMode(false);\n              }\n            }\n            break;\n        }\n      };\n      const unsub = subscribeToNotification(props.notify, notificationType, handler);\n      return unsub;\n    });\n    return () => {\n      notifications.forEach((unsub) => {\n        unsub();\n      });\n    };\n  }, [props.notify, handleNotificationSave, currentIndex, showConfigureMode]);\n\n  useEffect(() => {\n    const handleEditorSave = (e: any) => {};\n\n    const handleEditorCancel = () => {\n      if (!inConfigureMode) {\n        return;\n      } // not mine\n      // console.log('TF EDITOR CANCEL');\n      setInConfigureMode(false);\n      onCancelConfigure({ id });\n    };\n\n    const handleEditorChange = (e: any) => {\n      if (!inConfigureMode) {\n        return;\n      } // not mine\n      const { payload, callback } = e.detail;\n      setTextNodes(payload.value);\n    };\n\n    if (inConfigureMode) {\n      document.addEventListener(`${quillEditorTagName}-change`, handleEditorChange);\n      document.addEventListener(`${quillEditorTagName}-save`, handleEditorSave);\n      document.addEventListener(`${quillEditorTagName}-cancel`, handleEditorCancel);\n    }\n\n    return () => {\n      document.removeEventListener(`${quillEditorTagName}-change`, handleEditorChange);\n      document.removeEventListener(`${quillEditorTagName}-save`, handleEditorSave);\n      document.removeEventListener(`${quillEditorTagName}-cancel`, handleEditorCancel);\n    };\n  }, [ready, inConfigureMode, model]);\n  const options: any[] = mcqItems?.map((item: any, index: number) => ({\n    ...item,\n    index: index,\n    value: index + 1,\n  }));\n\n  let columns = 1;\n  if (customCssClass === 'two-columns') {\n    columns = 2;\n  }\n  if (customCssClass === 'three-columns') {\n    columns = 3;\n  }\n  if (customCssClass === 'four-columns') {\n    columns = 4;\n  }\n  const [tree, setTree] = useState<MarkupTree[]>([]);\n  const onClick = (index: any, option: number) => {\n    setCurrentIndex(index);\n    if (option === 1) {\n      setEditOptionClicked(true);\n      setDeleteOptionClicked(false);\n      if (mcqItems[index].nodes && typeof mcqItems[index].nodes === 'string') {\n        setTree(JSON.parse(mcqItems[index].nodes as unknown as string) as MarkupTree[]);\n      } else if (Array.isArray(mcqItems[index].nodes)) {\n        setTree(mcqItems[index].nodes);\n      }\n      setTextNodes(mcqItems[index].nodes);\n\n      onConfigure({ id, configure: true, context: { fullscreen: false } });\n    } else if (option === 3) {\n      setEditOptionClicked(false);\n      setDeleteOptionClicked(false);\n      const modelClone = clone(model);\n      if (deleteOptionClicked) {\n        modelClone.mcqItems.splice(index, 1);\n      } else {\n        modelClone.mcqItems.splice(index + 1, 0, {\n          nodes: [\n            {\n              tag: 'p',\n              style: {},\n              children: [\n                {\n                  children: [{ children: [], tag: 'text', text: `Option ${mcqItems.length + 1}` }],\n                  style: {\n                    backgroundColor: 'transparent',\n                    color: '#ebebeb',\n                    fontSize: '16px',\n                  },\n                  tag: 'span',\n                },\n              ],\n            },\n          ],\n          scoreValue: 0,\n          index: mcqItems.length,\n          value: mcqItems.length,\n        });\n      }\n      onSaveConfigure({ id, snapshot: modelClone });\n    } else {\n      setShowConfirmDelete(true);\n      setDeleteOptionClicked(true);\n      setEditOptionClicked(false);\n    }\n  };\n  const handleDeleteRule = () => {\n    setShowConfirmDelete(false);\n    handleNotificationSave();\n  };\n  return (\n    <React.Fragment>\n      {editOptionClicked && portalEl && <Editor type={1} html=\"\" tree={tree} portal={portalEl} />}\n      {\n        <div data-janus-type={tagName} style={styles} className={`mcq-input`}>\n          <style>\n            {`\n          .mcq-input>div {\n            margin: 1px 6px 10px 0;\n            display: block;\n            position: static !important;\n            min-height: 20px;\n            line-height: normal !important;\n            vertical-align: middle;\n          }\n          .mcq-input>div>label {\n            margin: 0 !important;\n          }\n          .mcq-input>br {\n            display: none !important;\n          }\n        `}\n          </style>\n          {options?.map((item, index) => (\n            <MCQItem\n              index={index}\n              key={`${id}-item-${index}`}\n              totalItems={options.length}\n              layoutType={layoutType}\n              itemId={`${id}-item-${index}`}\n              groupId={`mcq-${id}`}\n              val={item.value}\n              {...item}\n              x={0}\n              y={0}\n              verticalGap={verticalGap}\n              overrideHeight={overrideHeight}\n              disabled={false}\n              multipleSelection={multipleSelection}\n              columns={columns}\n              onConfigOptionClick={onClick}\n              configureMode={showConfigureMode}\n            />\n          ))}\n          {showConfirmDelete && (\n            <ConfirmDelete\n              show={showConfirmDelete}\n              elementType=\"MCQ Option\"\n              elementName=\"the Option\"\n              deleteHandler={() => handleDeleteRule()}\n              cancelHandler={() => {\n                setShowConfirmDelete(false);\n              }}\n            />\n          )}\n        </div>\n      }\n    </React.Fragment>\n  );\n};\n\nexport const tagName = 'janus-mcq';\n\nexport default McqAuthor;\n"]}