{"version":3,"file":"CapiVariablePicker.jsx","sourceRoot":"","sources":["../../../../../src/components/parts/janus-capi-iframe/CapiVariablePicker.tsx"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable react/react-in-jsx-scope */\nimport { useCallback, useState } from 'react';\nimport { ApplyStateOperation } from 'adaptivity/scripting';\nimport AutoDetectInput from '../../../../src/apps/delivery/components/preview-tools/inspector/AutoDetectInput';\n\ninterface StateDisplayProps {\n  label: string;\n  state: any;\n  onChange: (changeOp: ApplyStateOperation) => void;\n  onSave: (changeOp: ApplyStateOperation[]) => void;\n  onCancel: (changeOp: ApplyStateOperation[]) => void;\n  showSaveCancelButtons?: boolean;\n}\nconst CapiVariablePicker: React.FC<StateDisplayProps> = ({\n  label,\n  state,\n  onChange,\n  onSave,\n  onCancel,\n  showSaveCancelButtons = false,\n}) => {\n  const [changeOperations, setChangeOperations] = useState<ApplyStateOperation[]>([]);\n  const [expandedPanels, setExpandedPanels]: any = useState([]);\n  const handleValueChange = (changeOp: ApplyStateOperation) => {\n    onChange(changeOp);\n  };\n\n  const handleApplyChanges = () => {\n    onSave([]);\n  };\n\n  const handleCancelChanges = (e: any) => {\n    setChangeOperations([]);\n    onCancel(changeOperations);\n  };\n\n  return state.length > 0 ? (\n    <div>\n      {showSaveCancelButtons && (\n        <div className=\"apply-changes btn-group-sm p-2\" role=\"group\" aria-label=\"Apply changes\">\n          <button type=\"button\" className=\"btn btn-secondary mr-1\" onClick={handleCancelChanges}>\n            Cancel\n          </button>\n          <button type=\"button\" className=\"btn btn-primary ml-1\" onClick={handleApplyChanges}>\n            Save\n          </button>\n        </div>\n      )}\n      <div\n        id={`collapseRoot${label}`}\n        className={`${expandedPanels[`panel-Root${label}`] ? '' : 'visually-hidden'}`}\n        aria-labelledby={`headingRoot${label}`}\n        style={{ maxWidth: 450, overflowY: 'auto', maxHeight: 450 }}\n      >\n        <div className=\"card-body py-2\">\n          <ul className=\"list-group list-group-flush\">\n            {state.sort().map((level1: any, index: number) => {\n              return (\n                level1 && (\n                  <li key={`leaf-${level1}${index}`} className=\"list-group-item pr-0\">\n                    <div className=\"user-input\" style={{ display: 'flex', alignItems: 'center' }}>\n                      <span\n                        className=\"stateKey\"\n                        style={{\n                          display: 'flex',\n                          alignItems: 'center',\n                          flex: '1 0 60%',\n                          whiteSpace: 'nowrap',\n                          textOverflow: 'ellipsis',\n                          overflow: 'hidden',\n                        }}\n                        title={level1.key}\n                      >\n                        {level1.key}\n                      </span>\n                      <AutoDetectInput\n                        label={level1.key}\n                        value={level1}\n                        state={state}\n                        onChange={handleValueChange}\n                      />\n                    </div>\n                  </li>\n                )\n              );\n            })}\n          </ul>\n        </div>\n      </div>\n    </div>\n  ) : null;\n};\n\nexport default CapiVariablePicker;\n"]}