{"version":3,"file":"Video.jsx","sourceRoot":"","sources":["../../../../../src/components/parts/janus-video/Video.tsx"],"names":[],"mappings":";;;;;;;;;AAAA,qCAAqC;AACrC,OAAO,KAAK,EAAE,EAAiB,WAAW,EAAE,SAAS,EAAE,QAAQ,EAAE,MAAM,OAAO,CAAC;AAC/E,OAAO,OAAoB,MAAM,eAAe,CAAC;AACjD,OAAO,EAAE,iBAAiB,EAAE,MAAM,0BAA0B,CAAC;AAC7D,OAAO,EACL,gBAAgB,EAChB,uBAAuB,GACxB,MAAM,uDAAuD,CAAC;AAI/D,MAAM,KAAK,GAA6C,CAAC,KAAK,EAAE,EAAE;IAChE,MAAM,CAAC,MAAM,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAQ,KAAK,CAAC,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAC1F,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAM,OAAO,KAAK,CAAC,KAAK,KAAK,QAAQ,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;IAC5F,MAAM,CAAC,KAAK,EAAE,QAAQ,CAAC,GAAG,QAAQ,CAAU,KAAK,CAAC,CAAC;IACnD,MAAM,EAAE,GAAW,KAAK,CAAC,EAAE,CAAC;IAE5B,MAAM,CAAC,oBAAoB,EAAE,uBAAuB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IACxE,MAAM,CAAC,iBAAiB,EAAE,mBAAmB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IACjE,MAAM,CAAC,aAAa,EAAE,gBAAgB,CAAC,GAAG,QAAQ,CAAC,KAAK,CAAC,CAAC;IAC1D,MAAM,CAAC,iBAAiB,EAAE,oBAAoB,CAAC,GAAG,QAAQ,CAAC,IAAI,CAAC,CAAC;IACjE,MAAM,CAAC,QAAQ,EAAE,WAAW,CAAC,GAAG,QAAQ,CAAC,EAAE,CAAC,CAAC;IAE7C,MAAM,UAAU,GAAG,WAAW,CAAC,CAAO,MAAM,EAAE,EAAE;QAC9C,eAAe;QACf,MAAM,SAAS,GAAG,MAAM,CAAC,cAAc,IAAI,QAAQ,CAAC;QACpD,WAAW,CAAC,SAAS,CAAC,CAAC;QAEvB,MAAM,SAAS,GAAG,OAAO,MAAM,CAAC,QAAQ,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,CAAC,CAAC,CAAC,aAAa,CAAC;QACzF,gBAAgB,CAAC,SAAS,CAAC,CAAC;QAE5B,MAAM,aAAa,GACjB,OAAO,MAAM,CAAC,YAAY,KAAK,SAAS,CAAC,CAAC,CAAC,MAAM,CAAC,YAAY,CAAC,CAAC,CAAC,iBAAiB,CAAC;QACrF,oBAAoB,CAAC,aAAa,CAAC,CAAC;QAEpC,MAAM,UAAU,GAAG,MAAM,CAAC,SAAS,IAAI,CAAC,CAAC;QACzC,MAAM,QAAQ,GAAG,MAAM,CAAC,OAAO,IAAI,EAAE,CAAC;QAEtC,MAAM,UAAU,GAAG,MAAM,KAAK,CAAC,MAAM,CAAC;YACpC,EAAE;YACF,SAAS,EAAE;gBACT;oBACE,GAAG,EAAE,YAAY;oBACjB,IAAI,EAAE,iBAAiB,CAAC,OAAO;oBAC/B,KAAK,EAAE,oBAAoB;iBAC5B;gBACD;oBACE,GAAG,EAAE,UAAU;oBACf,IAAI,EAAE,iBAAiB,CAAC,OAAO;oBAC/B,KAAK,EAAE,SAAS;iBACjB;gBACD;oBACE,GAAG,EAAE,aAAa;oBAClB,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,UAAU;iBAClB;gBACD;oBACE,GAAG,EAAE,UAAU;oBACf,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,EAAE;iBACV;gBACD;oBACE,GAAG,EAAE,SAAS;oBACd,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,QAAQ;iBAChB;gBACD;oBACE,GAAG,EAAE,mBAAmB;oBACxB,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,UAAU;iBAClB;gBACD;oBACE,GAAG,EAAE,oBAAoB;oBACzB,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,CAAC;iBACT;gBACD;oBACE,GAAG,EAAE,cAAc;oBACnB,IAAI,EAAE,iBAAiB,CAAC,OAAO;oBAC/B,KAAK,EAAE,KAAK;iBACb;gBACD;oBACE,GAAG,EAAE,WAAW;oBAChB,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,UAAU;iBAClB;gBACD;oBACE,GAAG,EAAE,OAAO;oBACZ,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,YAAY;iBACpB;gBACD;oBACE,GAAG,EAAE,qBAAqB;oBAC1B,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,CAAC;iBACT;gBACD;oBACE,GAAG,EAAE,cAAc;oBACnB,IAAI,EAAE,iBAAiB,CAAC,OAAO;oBAC/B,KAAK,EAAE,aAAa;iBACrB;aACF;SACF,CAAC,CAAC;QAEH,uEAAuE;QACvE,MAAM,oBAAoB,GAAG,UAAU,CAAC,QAAQ,CAAC;QAEjD,MAAM,SAAS,GAAG,oBAAoB,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;QAC/D,IAAI,SAAS,KAAK,SAAS,EAAE;YAC3B,gBAAgB,CAAC,SAAS,CAAC,CAAC;SAC7B;QAED,MAAM,aAAa,GAAG,oBAAoB,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;QACvE,IAAI,aAAa,KAAK,SAAS,EAAE;YAC/B,oBAAoB,CAAC,aAAa,CAAC,CAAC;SACrC;QAED;;;;;;;YAOI;QAEJ,MAAM,SAAS,GAAG,oBAAoB,CAAC,SAAS,EAAE,iBAAiB,CAAC,CAAC;QACrE,IAAI,SAAS,KAAK,SAAS,EAAE;YAC3B,WAAW,CAAC,SAAS,CAAC,CAAC;SACxB;QACD,QAAQ,CAAC,IAAI,CAAC,CAAC;IACjB,CAAC,CAAA,EAAE,EAAE,CAAC,CAAC;IAEP,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,MAAM,CAAC;QACX,IAAI,MAAM,CAAC;QACX,IAAI,OAAO,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAK,CAAA,KAAK,QAAQ,EAAE;YACpC,IAAI;gBACF,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACjC,QAAQ,CAAC,MAAM,CAAC,CAAC;aAClB;YAAC,OAAO,GAAG,EAAE;gBACZ,qBAAqB;aACtB;SACF;QACD,IAAI,OAAO,CAAA,KAAK,aAAL,KAAK,uBAAL,KAAK,CAAE,KAAK,CAAA,KAAK,QAAQ,EAAE;YACpC,IAAI;gBACF,MAAM,GAAG,IAAI,CAAC,KAAK,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;gBACjC,QAAQ,CAAC,MAAM,CAAC,CAAC;aAClB;YAAC,OAAO,GAAG,EAAE;gBACZ,qBAAqB;aACtB;SACF;QACD,IAAI,CAAC,MAAM,EAAE;YACX,OAAO;SACR;QACD,UAAU,CAAC,MAAM,CAAC,CAAC;IACrB,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,KAAK,EAAE;YACV,OAAO;SACR;QACD,KAAK,CAAC,OAAO,CAAC,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC,CAAC;IACvC,CAAC,EAAE,CAAC,KAAK,CAAC,CAAC,CAAC;IAEZ,SAAS,CAAC,GAAG,EAAE;QACb,IAAI,CAAC,KAAK,CAAC,MAAM,EAAE;YACjB,OAAO;SACR;QACD,MAAM,oBAAoB,GAAG;YAC3B,gBAAgB,CAAC,aAAa;YAC9B,gBAAgB,CAAC,cAAc;YAC/B,gBAAgB,CAAC,eAAe;YAChC,gBAAgB,CAAC,aAAa;SAC/B,CAAC;QACF,MAAM,aAAa,GAAG,oBAAoB,CAAC,GAAG,CAAC,CAAC,gBAAkC,EAAE,EAAE;YACpF,MAAM,OAAO,GAAG,CAAC,OAAY,EAAE,EAAE;gBAC/B,0FAA0F;gBAC1F,QAAQ,gBAAgB,EAAE;oBACxB,KAAK,gBAAgB,CAAC,aAAa;wBACjC,gBAAgB;wBAChB,MAAM;oBACR,KAAK,gBAAgB,CAAC,cAAc;wBAClC,gBAAgB;wBAChB,MAAM;oBACR,KAAK,gBAAgB,CAAC,aAAa;wBACjC;4BACE,MAAM,EAAE,aAAa,EAAE,OAAO,EAAE,GAAG,OAAO,CAAC;4BAC3C,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;4BAClD,IAAI,SAAS,KAAK,SAAS,EAAE;gCAC3B,gBAAgB,CAAC,SAAS,CAAC,CAAC;6BAC7B;4BAED,MAAM,aAAa,GAAG,OAAO,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;4BAC1D,IAAI,aAAa,KAAK,SAAS,EAAE;gCAC/B,oBAAoB,CAAC,aAAa,CAAC,CAAC;6BACrC;4BAED,MAAM,WAAW,GAAG,OAAO,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC;4BACtD,IAAI,WAAW,KAAK,SAAS,EAAE;gCAC7B,uBAAuB,CAAC,WAAW,CAAC,CAAC;6BACtC;4BAED,MAAM,aAAa,GAAG,OAAO,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;4BAC1D,IAAI,aAAa,KAAK,SAAS,EAAE;gCAC/B,mBAAmB,CAAC,aAAa,CAAC,CAAC;6BACpC;yBACF;wBACD,MAAM;oBACR,KAAK,gBAAgB,CAAC,eAAe;wBACnC;4BACE,MAAM,EAAE,cAAc,EAAE,OAAO,EAAE,GAAG,OAAO,CAAC;4BAC5C,MAAM,SAAS,GAAG,OAAO,CAAC,SAAS,EAAE,WAAW,CAAC,CAAC;4BAClD,IAAI,SAAS,KAAK,SAAS,EAAE;gCAC3B,gBAAgB,CAAC,SAAS,CAAC,CAAC;6BAC7B;4BAED,MAAM,aAAa,GAAG,OAAO,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;4BAC1D,IAAI,aAAa,KAAK,SAAS,EAAE;gCAC/B,oBAAoB,CAAC,aAAa,CAAC,CAAC;6BACrC;4BAED,MAAM,WAAW,GAAG,OAAO,CAAC,SAAS,EAAE,aAAa,CAAC,CAAC;4BACtD,IAAI,WAAW,KAAK,SAAS,EAAE;gCAC7B,uBAAuB,CAAC,WAAW,CAAC,CAAC;6BACtC;4BAED,MAAM,aAAa,GAAG,OAAO,CAAC,SAAS,EAAE,eAAe,CAAC,CAAC;4BAC1D,IAAI,aAAa,KAAK,SAAS,EAAE;gCAC/B,mBAAmB,CAAC,aAAa,CAAC,CAAC;6BACpC;yBACF;wBACD,MAAM;iBACT;YACH,CAAC,CAAC;YACF,MAAM,KAAK,GAAG,uBAAuB,CAAC,KAAK,CAAC,MAAM,EAAE,gBAAgB,EAAE,OAAO,CAAC,CAAC;YAC/E,OAAO,KAAK,CAAC;QACf,CAAC,CAAC,CAAC;QACH,OAAO,GAAG,EAAE;YACV,aAAa,CAAC,OAAO,CAAC,CAAC,KAAK,EAAE,EAAE;gBAC9B,KAAK,EAAE,CAAC;YACV,CAAC,CAAC,CAAC;QACL,CAAC,CAAC;IACJ,CAAC,EAAE,CAAC,KAAK,CAAC,MAAM,CAAC,CAAC,CAAC;IAEnB,MAAM,EACJ,CAAC,EACD,CAAC,EACD,CAAC,EACD,KAAK,EACL,MAAM,EACN,GAAG,EACH,YAAY,EACZ,QAAQ,GAAG,KAAK,EAChB,SAAS,GAAG,CAAC,EACb,OAAO,GAAG,CAAC,EACX,YAAY,GAAG,IAAI,EACnB,SAAS,GACV,GAAG,KAAK,CAAC;IAEV,MAAM,WAAW,GAAkB;IACjC;;;;;iBAKa;KACd,CAAC;IAEF,MAAM,YAAY,GAChB,sHAAsH,CAAC;IAEzH,IAAI,QAAQ,GAAG,GAAG,CAAC;IACnB,IAAI,OAAO,GAAG,GAAG,CAAC;IAClB,IAAI,YAAY,GAAG,KAAK,CAAC;IAEzB,SAAS,CAAC,GAAG,EAAE;QACb,MAAM,YAAY,GAAQ,EAAE,CAAC;QAC7B,IAAI,KAAK,KAAK,SAAS,EAAE;YACvB,YAAY,CAAC,KAAK,GAAG,EAAE,KAAK,EAAE,KAAe,EAAE,CAAC;SACjD;QACD,IAAI,MAAM,IAAI,SAAS,EAAE;YACvB,YAAY,CAAC,MAAM,GAAG,EAAE,KAAK,EAAE,MAAgB,EAAE,CAAC;SACnD;QAED,KAAK,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,QAAQ,EAAE,YAAY,EAAE,CAAC,CAAC;IAC1D,CAAC,EAAE,CAAC,KAAK,EAAE,MAAM,CAAC,CAAC,CAAC;IACpB,MAAM,YAAY,GAAG,CAAC,GAAW,EAAE,EAAE;QACnC,MAAM,KAAK,GAAG,GAAG,CAAC,KAAK,CAAC,YAAY,CAAC,CAAC;QACtC,OAAO,KAAK,IAAI,KAAK,CAAC,CAAC,CAAC,CAAC,MAAM,IAAI,EAAE,CAAC,CAAC,CAAC,KAAK,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,KAAK,CAAC;IAC3D,CAAC,CAAC;IACF,MAAM,WAAW,GAAY;QAC3B,KAAK,EAAE,KAAK,CAAC,CAAC,CAAC,KAAK,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,MAAM;QACxC,MAAM,EAAE,MAAM,CAAC,CAAC,CAAC,MAAM,CAAC,QAAQ,EAAE,CAAC,CAAC,CAAC,MAAM;QAC3C,UAAU,EAAE;YACV,QAAQ,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YAC1B,IAAI,EAAE,QAAQ,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;YACtB,QAAQ,EAAE,CAAC,iBAAiB,IAAI,YAAY,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC;SACrD;KACF,CAAC;IACF,IAAI,YAAY,CAAC,IAAI,CAAC,QAAQ,CAAC,EAAE;QAC/B,YAAY,GAAG,IAAI,CAAC;QACpB,gDAAgD;QAChD,OAAO,GAAG,YAAY,CAAC,GAAG,CAAC,CAAC;QAE5B,IAAI,SAAS,IAAI,SAAS,IAAI,CAAC,EAAE;YAC/B,WAAW,CAAC,UAAU,mCACjB,WAAW,CAAC,UAAU,KACzB,KAAK,EAAE,SAAS,IAAI,CAAC,GACtB,CAAC;YACF,IAAI,OAAO,IAAI,OAAO,IAAI,CAAC,EAAE;gBAC3B,WAAW,CAAC,UAAU,mCACjB,WAAW,CAAC,UAAU,KACzB,GAAG,EAAE,OAAO,IAAI,CAAC,GAClB,CAAC;aACH;SACF;KACF;SAAM;QACL,QAAQ,GAAG,GAAG,QAAQ,MAAM,SAAS,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,OAAO,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;KAC5E;IAED,MAAM,cAAc,GAAG,CAAC,IAAS,EAAE,EAAE;QACnC,mBAAmB,CAAC,IAAI,CAAC,CAAC;QAC1B,SAAS,CAAC;YACR,oBAAoB,EAAE,oBAAoB;YAC1C,WAAW,EAAE,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW;YAClF,QAAQ,EAAE,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ;YACzE,gBAAgB,EAAE,IAAI;YACtB,UAAU,EAAE,WAAW;SACxB,CAAC,CAAC;QACH,IAAI,YAAY,EAAE;YAChB,KAAK,CAAC,QAAQ,CAAC,EAAE,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE,SAAS,EAAE,EAAE,EAAE,CAAC,CAAC;SAChD;IACH,CAAC,CAAC;IAEF,MAAM,eAAe,GAAG,CAAC,IAAS,EAAE,EAAE;QACpC,uBAAuB,CAAC,IAAI,CAAC,CAAC;QAC9B,SAAS,CAAC;YACR,oBAAoB,EAAE,IAAI;YAC1B,WAAW,EAAE,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW;YAClF,QAAQ,EAAE,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ;YACzE,gBAAgB,EAAE,iBAAiB;YACnC,UAAU,EAAE,SAAS;SACtB,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,MAAM,gBAAgB,GAAG,CAAC,IAAS,EAAE,EAAE;QACrC,SAAS,CAAC;YACR,oBAAoB,EAAE,oBAAoB;YAC1C,WAAW,EAAE,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,cAAc,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW;YAClF,QAAQ,EAAE,YAAY,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,WAAW,EAAE,CAAC,CAAC,CAAC,IAAI,CAAC,MAAM,CAAC,QAAQ;YACzE,gBAAgB,EAAE,iBAAiB;YACnC,UAAU,EAAE,QAAQ;SACrB,CAAC,CAAC;IACL,CAAC,CAAC;IACF,MAAM,SAAS,GAAG,CAAC,EACjB,oBAAoB,EACpB,WAAW,GAAG,GAAG,EACjB,QAAQ,GAAG,GAAG,EACd,gBAAgB,EAChB,UAAU,GAOX,EAAE,EAAE;QACH,MAAM,gBAAgB,GAAG,UAAU,CAAC,WAAW,CAAC,CAAC;QACjD,MAAM,aAAa,GAAG,UAAU,CAAC,QAAQ,CAAC,CAAC;QAC3C,MAAM,kBAAkB,GAAG,CAAC,gBAAgB,GAAG,aAAa,CAAC,GAAG,GAAG,CAAC;QACpE,KAAK,CAAC,MAAM,CAAC;YACX,EAAE,EAAE,GAAG,EAAE,EAAE;YACX,SAAS,EAAE;gBACT;oBACE,GAAG,EAAE,YAAY;oBACjB,IAAI,EAAE,iBAAiB,CAAC,OAAO;oBAC/B,KAAK,EAAE,oBAAoB;iBAC5B;gBACD;oBACE,GAAG,EAAE,UAAU;oBACf,IAAI,EAAE,iBAAiB,CAAC,OAAO;oBAC/B,KAAK,EAAE,aAAa;iBACrB;gBACD;oBACE,GAAG,EAAE,aAAa;oBAClB,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,WAAW;iBACnB;gBACD;oBACE,GAAG,EAAE,UAAU;oBACf,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,QAAQ;iBAChB;gBACD;oBACE,GAAG,EAAE,SAAS;oBACd,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,OAAO,IAAI,EAAE;iBACrB;gBACD;oBACE,GAAG,EAAE,mBAAmB;oBACxB,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,WAAW;iBACnB;gBACD;oBACE,GAAG,EAAE,oBAAoB;oBACzB,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,KAAK,CAAC,kBAAkB,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,QAAQ,CAAC,kBAAkB,CAAC,QAAQ,EAAE,CAAC;iBAC/E;gBACD;oBACE,GAAG,EAAE,cAAc;oBACnB,IAAI,EAAE,iBAAiB,CAAC,OAAO;oBAC/B,KAAK,EAAE,gBAAgB;iBACxB;gBACD;oBACE,GAAG,EAAE,WAAW;oBAChB,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,SAAS,IAAI,CAAC;iBACtB;gBACD;oBACE,GAAG,EAAE,OAAO;oBACZ,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,UAAU;iBAClB;gBACD;oBACE,GAAG,EAAE,qBAAqB;oBAC1B,IAAI,EAAE,iBAAiB,CAAC,MAAM;oBAC9B,KAAK,EAAE,WAAW;iBACnB;gBACD;oBACE,GAAG,EAAE,cAAc;oBACnB,IAAI,EAAE,iBAAiB,CAAC,OAAO;oBAC/B,KAAK,EAAE,iBAAiB;iBACzB;aACF;SACF,CAAC,CAAC;IACL,CAAC,CAAC;IAEF,MAAM,SAAS,GAAG,CAChB,CAAC,OAAO,CACN,OAAO,CAAC,CAAC,OAAO,CAAC,CACjB,kBAAkB,CAAC,yBAAyB,CAC5C,IAAI,CAAC,CAAC,WAAW,CAAC,CAClB,MAAM,CAAC,CAAC,eAAe,CAAC,CACxB,KAAK,CAAC,CAAC,cAAc,CAAC,CACtB,OAAO,CAAC,CAAC,gBAAgB,CAAC,EAC1B,CACH,CAAC;IAEF,MAAM,SAAS,GACb,CAAA,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,SAAS,CAAC,CAAC,EAAE,QAAQ,aAAR,QAAQ,uBAAR,QAAQ,CAAE,WAAW,CAAC,GAAG,CAAC,CAAC;QAClD,WAAW,SAAS,GAAG,OAAO,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,OAAO,EAAE,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC;IAE5D,MAAM,QAAQ,GAAG,CACf,CAAC,KAAK,CACJ,KAAK,CAAC,MAAM,CACZ,MAAM,CAAC,MAAM;IACb,0BAA0B;IAC1B,QAAQ,CAAC,CAAC,QAAQ,CAAC,CACnB,QAAQ,CAAC,CAAC,CAAC,iBAAiB,IAAI,YAAY,CAAC,CAC7C,OAAO,CAAC,CAAC,cAAc,CAAC,CACxB,MAAM,CAAC,CAAC,eAAe,CAAC,CACxB,OAAO,CAAC,CAAC,gBAAgB,CAAC,CAE1B;MAAA,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,QAAQ,CAAC,EACtB;MAAA,CAAC,MAAM,CAAC,GAAG,CAAC,CAAC,SAAS,CAAC,EACvB;MAAA,CAAC,SAAS;YACR,SAAS,CAAC,MAAM,GAAG,CAAC;YACpB,SAAS,CAAC,GAAG,CAAC,CAAC,QAA6D,EAAE,EAAE;gBAC9E,MAAM,QAAQ,GAAG,SAAS,CAAC,MAAM,KAAK,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,QAAQ,CAAC,OAAO,CAAC;gBAClE,OAAO,CACL,CAAC,KAAK,CACJ,GAAG,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAClB,GAAG,CAAC,CAAC,QAAQ,CAAC,GAAG,CAAC,CAClB,OAAO,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CAC3B,KAAK,CAAC,CAAC,QAAQ,CAAC,QAAQ,CAAC,CACzB,IAAI,CAAC,WAAW,CAChB,OAAO,CAAC,CAAC,QAAQ,IAAI,KAAK,CAAC,EAC3B,CACH,CAAC;YACJ,CAAC,CAAC,CACN;IAAA,EAAE,KAAK,CAAC,CACT,CAAC;IAEF,MAAM,UAAU,GAAG,YAAY,CAAC,IAAI,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,SAAS,CAAC,CAAC,CAAC,QAAQ,CAAC;IACjE,OAAO,KAAK,CAAC,CAAC,CAAC,CACb,CAAC,GAAG,CAAC,eAAe,CAAC,CAAC,OAAO,CAAC,CAAC,KAAK,CAAC,CAAC,EAAE,KAAK,EAAE,MAAM,EAAE,MAAM,EAAE,MAAM,EAAE,CAAC,CACtE;MAAA,CAAC,KAAK,CACJ;QAAA,CAAC;;;;;SAKA,CACH;MAAA,EAAE,KAAK,CACP;MAAA,CAAC,UAAU,CACb;IAAA,EAAE,GAAG,CAAC,CACP,CAAC,CAAC,CAAC,IAAI,CAAC;AACX,CAAC,CAAC;AAEF,MAAM,CAAC,MAAM,OAAO,GAAG,aAAa,CAAC;AAErC,eAAe,KAAK,CAAC","sourcesContent":["/* eslint-disable react/prop-types */\nimport React, { CSSProperties, useCallback, useEffect, useState } from 'react';\nimport YouTube, { Options } from 'react-youtube';\nimport { CapiVariableTypes } from '../../../adaptivity/capi';\nimport {\n  NotificationType,\n  subscribeToNotification,\n} from '../../../apps/delivery/components/NotificationContext';\nimport { PartComponentProps } from '../types/parts';\nimport { VideoModel } from './schema';\n\nconst Video: React.FC<PartComponentProps<VideoModel>> = (props) => {\n  const [_state, setState] = useState<any[]>(Array.isArray(props.state) ? props.state : []);\n  const [model, setModel] = useState<any>(typeof props.model === 'string' ? {} : props.model);\n  const [ready, setReady] = useState<boolean>(false);\n  const id: string = props.id;\n\n  const [videoIsPlayerStarted, setVideoIsPlayerStarted] = useState(false);\n  const [_videoIsCompleted, setVideoIsCompleted] = useState(false);\n  const [videoAutoPlay, setVideoAutoPlay] = useState(false);\n  const [videoEnableReplay, setVideoEnableReplay] = useState(true);\n  const [cssClass, setCssClass] = useState('');\n\n  const initialize = useCallback(async (pModel) => {\n    // set defaults\n    const dCssClass = pModel.customCssClass || cssClass;\n    setCssClass(dCssClass);\n\n    const dAutoPlay = typeof pModel.autoPlay === 'boolean' ? pModel.autoPlay : videoAutoPlay;\n    setVideoAutoPlay(dAutoPlay);\n\n    const dEnableReplay =\n      typeof pModel.enableReplay === 'boolean' ? pModel.enableReplay : videoEnableReplay;\n    setVideoEnableReplay(dEnableReplay);\n\n    const dStartTime = pModel.startTime || 0;\n    const dEndTime = pModel.endTime || '';\n\n    const initResult = await props.onInit({\n      id,\n      responses: [\n        {\n          key: 'hasStarted',\n          type: CapiVariableTypes.BOOLEAN,\n          value: videoIsPlayerStarted,\n        },\n        {\n          key: 'autoPlay',\n          type: CapiVariableTypes.BOOLEAN,\n          value: dAutoPlay,\n        },\n        {\n          key: 'currentTime',\n          type: CapiVariableTypes.STRING,\n          value: dStartTime,\n        },\n        {\n          key: 'duration',\n          type: CapiVariableTypes.STRING,\n          value: '',\n        },\n        {\n          key: 'endTime',\n          type: CapiVariableTypes.STRING,\n          value: dEndTime,\n        },\n        {\n          key: 'exposureInSeconds',\n          type: CapiVariableTypes.NUMBER,\n          value: dStartTime,\n        },\n        {\n          key: 'exposurePercentage',\n          type: CapiVariableTypes.NUMBER,\n          value: 0,\n        },\n        {\n          key: 'hasCompleted',\n          type: CapiVariableTypes.BOOLEAN,\n          value: false,\n        },\n        {\n          key: 'startTime',\n          type: CapiVariableTypes.STRING,\n          value: dStartTime,\n        },\n        {\n          key: 'state',\n          type: CapiVariableTypes.STRING,\n          value: 'notStarted',\n        },\n        {\n          key: 'totalSecondsWatched',\n          type: CapiVariableTypes.STRING,\n          value: 0,\n        },\n        {\n          key: 'enableReplay',\n          type: CapiVariableTypes.BOOLEAN,\n          value: dEnableReplay,\n        },\n      ],\n    });\n\n    // result of init has a state snapshot with latest (init state applied)\n    const currentStateSnapshot = initResult.snapshot;\n\n    const sAutoPlay = currentStateSnapshot[`stage.${id}.autoPlay`];\n    if (sAutoPlay !== undefined) {\n      setVideoAutoPlay(sAutoPlay);\n    }\n\n    const sEnableReplay = currentStateSnapshot[`stage.${id}.enableReplay`];\n    if (sEnableReplay !== undefined) {\n      setVideoEnableReplay(sEnableReplay);\n    }\n\n    /* const sStartTime = currentStateSnapshot[`stage.${id}.startTime`];\n    if (sStartTime !== undefined) {\n      setStartTime(sStartTime);\n    }\n    const sEndTime = currentStateSnapshot[`stage.${id}.endTime`];\n    if (sEndTime !== undefined) {\n      setEndTime(sEndTime);\n    } */\n\n    const sCssClass = currentStateSnapshot[`stage.${id}.customCssClass`];\n    if (sCssClass !== undefined) {\n      setCssClass(sCssClass);\n    }\n    setReady(true);\n  }, []);\n\n  useEffect(() => {\n    let pModel;\n    let pState;\n    if (typeof props?.model === 'string') {\n      try {\n        pModel = JSON.parse(props.model);\n        setModel(pModel);\n      } catch (err) {\n        // bad json, what do?\n      }\n    }\n    if (typeof props?.state === 'string') {\n      try {\n        pState = JSON.parse(props.state);\n        setState(pState);\n      } catch (err) {\n        // bad json, what do?\n      }\n    }\n    if (!pModel) {\n      return;\n    }\n    initialize(pModel);\n  }, [props]);\n\n  useEffect(() => {\n    if (!ready) {\n      return;\n    }\n    props.onReady({ id, responses: [] });\n  }, [ready]);\n\n  useEffect(() => {\n    if (!props.notify) {\n      return;\n    }\n    const notificationsHandled = [\n      NotificationType.CHECK_STARTED,\n      NotificationType.CHECK_COMPLETE,\n      NotificationType.CONTEXT_CHANGED,\n      NotificationType.STATE_CHANGED,\n    ];\n    const notifications = notificationsHandled.map((notificationType: NotificationType) => {\n      const handler = (payload: any) => {\n        /* console.log(`${notificationType.toString()} notification handled [Video]`, payload); */\n        switch (notificationType) {\n          case NotificationType.CHECK_STARTED:\n            // nothing to do\n            break;\n          case NotificationType.CHECK_COMPLETE:\n            // nothing to do\n            break;\n          case NotificationType.STATE_CHANGED:\n            {\n              const { mutateChanges: changes } = payload;\n              const sAutoPlay = changes[`stage.${id}.autoPlay`];\n              if (sAutoPlay !== undefined) {\n                setVideoAutoPlay(sAutoPlay);\n              }\n\n              const sEnableReplay = changes[`stage.${id}.enableReplay`];\n              if (sEnableReplay !== undefined) {\n                setVideoEnableReplay(sEnableReplay);\n              }\n\n              const sHasStarted = changes[`stage.${id}.hasStarted`];\n              if (sHasStarted !== undefined) {\n                setVideoIsPlayerStarted(sHasStarted);\n              }\n\n              const sHasCompleted = changes[`stage.${id}.hasCompleted`];\n              if (sHasCompleted !== undefined) {\n                setVideoIsCompleted(sHasCompleted);\n              }\n            }\n            break;\n          case NotificationType.CONTEXT_CHANGED:\n            {\n              const { initStateFacts: changes } = payload;\n              const sAutoPlay = changes[`stage.${id}.autoPlay`];\n              if (sAutoPlay !== undefined) {\n                setVideoAutoPlay(sAutoPlay);\n              }\n\n              const sEnableReplay = changes[`stage.${id}.enableReplay`];\n              if (sEnableReplay !== undefined) {\n                setVideoEnableReplay(sEnableReplay);\n              }\n\n              const sHasStarted = changes[`stage.${id}.hasStarted`];\n              if (sHasStarted !== undefined) {\n                setVideoIsPlayerStarted(sHasStarted);\n              }\n\n              const sHasCompleted = changes[`stage.${id}.hasCompleted`];\n              if (sHasCompleted !== undefined) {\n                setVideoIsCompleted(sHasCompleted);\n              }\n            }\n            break;\n        }\n      };\n      const unsub = subscribeToNotification(props.notify, notificationType, handler);\n      return unsub;\n    });\n    return () => {\n      notifications.forEach((unsub) => {\n        unsub();\n      });\n    };\n  }, [props.notify]);\n\n  const {\n    x,\n    y,\n    z,\n    width,\n    height,\n    src,\n    triggerCheck,\n    autoPlay = false,\n    startTime = 0,\n    endTime = 0,\n    enableReplay = true,\n    subtitles,\n  } = model;\n\n  const videoStyles: CSSProperties = {\n    /* position: 'absolute',\n    top: y,\n    left: x,\n    width,\n    height,\n    zIndex: z, */\n  };\n\n  const youtubeRegex =\n    /(?:https?:\\/\\/)?(?:youtu\\.be\\/|(?:www\\.|m\\.)?youtube\\.com\\/(?:watch|v|embed)(?:\\.php)?(?:\\?.*v=|\\/))([a-zA-Z0-9_-]+)/;\n\n  let finalSrc = src;\n  let videoId = src;\n  let isYoutubeSrc = false;\n\n  useEffect(() => {\n    const styleChanges: any = {};\n    if (width !== undefined) {\n      styleChanges.width = { value: width as number };\n    }\n    if (height != undefined) {\n      styleChanges.height = { value: height as number };\n    }\n\n    props.onResize({ id: `${id}`, settings: styleChanges });\n  }, [width, height]);\n  const getYoutubeId = (url: string) => {\n    const match = url.match(youtubeRegex);\n    return match && match[1].length == 11 ? match[1] : false;\n  };\n  const youtubeOpts: Options = {\n    width: width ? width.toString() : '100%',\n    height: height ? height.toString() : '100%',\n    playerVars: {\n      autoplay: autoPlay ? 1 : 0,\n      loop: autoPlay ? 1 : 0,\n      controls: !_videoIsCompleted || enableReplay ? 1 : 0,\n    },\n  };\n  if (youtubeRegex.test(finalSrc)) {\n    isYoutubeSrc = true;\n    // If Youtube video, get ID and create embed url\n    videoId = getYoutubeId(src);\n\n    if (startTime && startTime >= 0) {\n      youtubeOpts.playerVars = {\n        ...youtubeOpts.playerVars,\n        start: startTime || 0,\n      };\n      if (endTime && endTime >= 0) {\n        youtubeOpts.playerVars = {\n          ...youtubeOpts.playerVars,\n          end: endTime || 0,\n        };\n      }\n    }\n  } else {\n    finalSrc = `${finalSrc}#t=${startTime}${endTime > 0 ? `,${endTime}` : ''}`;\n  }\n\n  const handleVideoEnd = (data: any) => {\n    setVideoIsCompleted(true);\n    saveState({\n      isVideoPlayerStarted: videoIsPlayerStarted,\n      currentTime: isYoutubeSrc ? data.target.getCurrentTime() : data.target.currentTime,\n      duration: isYoutubeSrc ? data.target.getDuration() : data.target.duration,\n      isVideoCompleted: true,\n      videoState: 'completed',\n    });\n    if (triggerCheck) {\n      props.onSubmit({ id: `${id}`, responses: [] });\n    }\n  };\n\n  const handleVideoPlay = (data: any) => {\n    setVideoIsPlayerStarted(true);\n    saveState({\n      isVideoPlayerStarted: true,\n      currentTime: isYoutubeSrc ? data.target.getCurrentTime() : data.target.currentTime,\n      duration: isYoutubeSrc ? data.target.getDuration() : data.target.duration,\n      isVideoCompleted: _videoIsCompleted,\n      videoState: 'playing',\n    });\n  };\n\n  const handleVideoPause = (data: any) => {\n    saveState({\n      isVideoPlayerStarted: videoIsPlayerStarted,\n      currentTime: isYoutubeSrc ? data.target.getCurrentTime() : data.target.currentTime,\n      duration: isYoutubeSrc ? data.target.getDuration() : data.target.duration,\n      isVideoCompleted: _videoIsCompleted,\n      videoState: 'paused',\n    });\n  };\n  const saveState = ({\n    isVideoPlayerStarted,\n    currentTime = '0',\n    duration = '0',\n    isVideoCompleted,\n    videoState,\n  }: {\n    isVideoPlayerStarted: boolean;\n    currentTime: string;\n    duration: string;\n    isVideoCompleted: boolean;\n    videoState: string;\n  }) => {\n    const currentVideoTime = parseFloat(currentTime);\n    const videoDuration = parseFloat(duration);\n    const exposurePercentage = (currentVideoTime / videoDuration) * 100;\n    props.onSave({\n      id: `${id}`,\n      responses: [\n        {\n          key: 'hasStarted',\n          type: CapiVariableTypes.BOOLEAN,\n          value: isVideoPlayerStarted,\n        },\n        {\n          key: 'autoPlay',\n          type: CapiVariableTypes.BOOLEAN,\n          value: videoAutoPlay,\n        },\n        {\n          key: 'currentTime',\n          type: CapiVariableTypes.STRING,\n          value: currentTime,\n        },\n        {\n          key: 'duration',\n          type: CapiVariableTypes.STRING,\n          value: duration,\n        },\n        {\n          key: 'endTime',\n          type: CapiVariableTypes.STRING,\n          value: endTime || '',\n        },\n        {\n          key: 'exposureInSeconds',\n          type: CapiVariableTypes.NUMBER,\n          value: currentTime,\n        },\n        {\n          key: 'exposurePercentage',\n          type: CapiVariableTypes.NUMBER,\n          value: isNaN(exposurePercentage) ? 0 : parseInt(exposurePercentage.toString()),\n        },\n        {\n          key: 'hasCompleted',\n          type: CapiVariableTypes.BOOLEAN,\n          value: isVideoCompleted,\n        },\n        {\n          key: 'startTime',\n          type: CapiVariableTypes.STRING,\n          value: startTime || 0,\n        },\n        {\n          key: 'state',\n          type: CapiVariableTypes.STRING,\n          value: videoState,\n        },\n        {\n          key: 'totalSecondsWatched',\n          type: CapiVariableTypes.STRING,\n          value: currentTime,\n        },\n        {\n          key: 'enableReplay',\n          type: CapiVariableTypes.BOOLEAN,\n          value: videoEnableReplay,\n        },\n      ],\n    });\n  };\n\n  const iframeTag = (\n    <YouTube\n      videoId={videoId}\n      containerClassName=\"react-youtube-container\"\n      opts={youtubeOpts}\n      onPlay={handleVideoPlay}\n      onEnd={handleVideoEnd}\n      onPause={handleVideoPause}\n    />\n  );\n\n  const srcAsWebm =\n    finalSrc?.substring(0, finalSrc?.lastIndexOf('.')) +\n    `.webm#t=${startTime}${endTime > 0 ? `,${endTime}` : ''}`;\n\n  const videoTag = (\n    <video\n      width=\"100%\"\n      height=\"100%\"\n      /* className={cssClass} */\n      autoPlay={autoPlay}\n      controls={!_videoIsCompleted || enableReplay}\n      onEnded={handleVideoEnd}\n      onPlay={handleVideoPlay}\n      onPause={handleVideoPause}\n    >\n      <source src={finalSrc} />\n      <source src={srcAsWebm} />\n      {subtitles &&\n        subtitles.length > 0 &&\n        subtitles.map((subtitle: { src: string; language: string; default: boolean }) => {\n          const defaults = subtitles.length === 1 ? true : subtitle.default;\n          return (\n            <track\n              key={subtitle.src}\n              src={subtitle.src}\n              srcLang={subtitle.language}\n              label={subtitle.language}\n              kind=\"subtitles\"\n              default={defaults || false}\n            />\n          );\n        })}\n    </video>\n  );\n\n  const elementTag = youtubeRegex.test(src) ? iframeTag : videoTag;\n  return ready ? (\n    <div data-janus-type={tagName} style={{ width: '100%', height: '100%' }}>\n      <style>\n        {`\n          .react-youtube-container {\n            width: 100%;\n            height: 100%\n          }\n        `}\n      </style>\n      {elementTag}\n    </div>\n  ) : null;\n};\n\nexport const tagName = 'janus-video';\n\nexport default Video;\n"]}