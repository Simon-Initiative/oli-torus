{"version":3,"file":"ContentBlock.jsx","sourceRoot":"","sources":["../../../../../src/components/resource/editors/ContentBlock.tsx"],"names":[],"mappings":"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","sourcesContent":["import * as React from 'react';\nimport { DragHandle } from '../DragHandle';\nimport { DeleteButton } from 'components/misc/DeleteButton';\nimport { getContentDescription } from 'data/content/utils';\nimport { Purpose as PurposeType, ResourceContent, StructuredContent } from 'data/content/resource';\nimport * as Immutable from 'immutable';\nimport { Purpose } from 'components/content/Purpose';\nimport { classNames } from 'utils/classNames';\n\nconst getDescription = (item: ResourceContent) => {\n  return item.type === 'content' ? getContentDescription(item) : '';\n};\n\ntype PurposeContainerProps = {\n  children?: JSX.Element | JSX.Element[];\n  contentItem: StructuredContent;\n  purposes: PurposeType[];\n};\n\nconst maybeRenderDeliveryPurposeContainer = (props: PurposeContainerProps) => {\n  const purposeLabel = props.purposes.find((p) => p.value === props.contentItem.purpose)?.label;\n\n  if (props.contentItem.purpose === 'none') {\n    return props.children;\n  }\n\n  return (\n    <div className=\"content-block-structured-content\">\n      <div className={`content-purpose ${props.contentItem.purpose}`}>\n        <div className=\"content-purpose-label\">{purposeLabel}</div>\n        <div className=\"content-purpose-content\">{props.children}</div>\n      </div>\n    </div>\n  );\n};\ninterface ContentBlockProps {\n  editMode: boolean;\n  children?: JSX.Element | JSX.Element[];\n  content: Immutable.List<ResourceContent>;\n  purposes: PurposeType[];\n  contentItem: StructuredContent;\n  index: number;\n  onDragStart: (e: React.DragEvent<HTMLDivElement>, id: string) => void;\n  onDragEnd: () => void;\n  onEditPurpose: (purpose: string) => void;\n  onRemove: () => void;\n}\nexport const ContentBlock = (props: ContentBlockProps) => {\n  const id = `content-header-${props.index}`;\n\n  return (\n    <div\n      className={classNames([\n        'content-block',\n        'resource-content-frame',\n        'card',\n        `purpose-${props.contentItem.purpose}`,\n      ])}\n      draggable={props.editMode}\n      onDragStart={(e) => props.onDragStart(e, id)}\n      onDragEnd={props.onDragEnd}\n    >\n      <div id={id} className=\"card-header px-2\">\n        <div className=\"d-flex flex-row align-items-center\">\n          <div className=\"d-flex align-items-center flex-grow-1\">\n            <DragHandle style={{ height: 24, marginRight: 10 }} />\n          </div>\n\n          <Purpose\n            purpose={props.contentItem.purpose}\n            purposes={props.purposes}\n            editMode={props.editMode}\n            onEdit={props.onEditPurpose}\n          />\n\n          <DeleteButton editMode={props.content.size > 1} onClick={props.onRemove} />\n        </div>\n      </div>\n      <div className=\"card-body delivery\">\n        <div\n          className=\"content\"\n          draggable={props.editMode}\n          onDragStart={(e) => {\n            e.preventDefault();\n            e.stopPropagation();\n          }}\n        >\n          {maybeRenderDeliveryPurposeContainer(props)}\n        </div>\n      </div>\n      <div className=\"reorder-mode-description\">{getDescription(props.contentItem)}</div>\n    </div>\n  );\n};\n"]}