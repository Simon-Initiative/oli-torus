{"version":3,"file":"Banner.jsx","sourceRoot":"","sources":["../../../../src/components/messages/Banner.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAK,KAAK,MAAM,OAAO,CAAC;AAC/B,OAAO,EAAE,eAAe,EAAE,aAAa,EAAE,MAAM,wBAAwB,CAAC;AACxE,OAAO,EAAiC,QAAQ,EAAE,MAAM,wBAAwB,CAAC;AACjF,OAAO,EAAE,OAAO,EAAE,MAAM,WAAW,CAAC;AAQpC,gFAAgF;AAChF,oCAAoC;AACpC,SAAS,eAAe,CAAC,QAAe,EAAE,QAAkB;IAC1D,MAAM,CAAC,GAAG,QAAQ,CAAC,MAAM,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,QAAQ,KAAK,QAAQ,CAAC,CAAC,IAAI,CAAC,CAAC,CAAC,EAAE,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,QAAQ,GAAG,CAAC,CAAC,QAAQ,CAAC,CAAC;IAElG,OAAO,CAAC,CAAC,MAAM,GAAG,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,CAAC,GAAG,EAAS,CAAC,CAAC,CAAC,CAAC,EAAE,CAAC;AAC9C,CAAC;AACD,2BAA2B;AAC3B,MAAM,OAAO,MAAO,SAAQ,KAAK,CAAC,aAA8B;IAC9D,YAAY,KAAkB;QAC5B,KAAK,CAAC,KAAK,CAAC,CAAC;IACf,CAAC;IAED,MAAM;QACJ,+DAA+D;QAC/D,MAAM,MAAM,GAAG,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,KAAK,CAAC,CAAC;QACpE,MAAM,QAAQ,GAAG,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,OAAO,CAAC,CAAC;QACxE,MAAM,KAAK,GAAG,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,WAAW,CAAC,CAAC;QACzE,MAAM,KAAK,GAAG,eAAe,CAAC,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE,QAAQ,CAAC,IAAI,CAAC,CAAC;QAElE,MAAM,QAAQ,GAAG,CAAC,GAAG,MAAM,EAAE,GAAG,QAAQ,EAAE,GAAG,KAAK,EAAE,GAAG,KAAK,CAAC,CAAC;QAE9D,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,mBAAmB,CAChC;QAAA,CAAC,eAAe,CACd;UAAA,CAAC,QAAQ,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CACnB,CAAC,aAAa,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,OAAO,CAAC,CAAC,EAAE,KAAK,EAAE,GAAG,EAAE,IAAI,EAAE,GAAG,EAAE,CAAC,CAC7D;cAAA,CAAC,OAAO,CAAC,GAAG,CAAC,CAAC,CAAC,CAAC,IAAI,CAAC,CAAC,IAAI,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,CAAC,CAAC,CAAC,EACnD;YAAA,EAAE,aAAa,CAAC,CACjB,CAAC,CACJ;QAAA,EAAE,eAAe,CACnB;MAAA,EAAE,GAAG,CAAC,CACP,CAAC;IACJ,CAAC;CACF","sourcesContent":["import * as React from 'react';\nimport { TransitionGroup, CSSTransition } from 'react-transition-group';\nimport { Message as Msg, MessageAction, Severity } from 'data/messages/messages';\nimport { Message } from './Message';\n\nexport interface BannerProps {\n  dismissMessage: (message: Msg) => void;\n  executeAction: (message: Msg, action: MessageAction) => void;\n  messages: Msg[];\n}\n\n// Chooses the message with the highest priority, or the most recently triggered\n// message given matching priorities\nfunction highestPriority(messages: Msg[], severity: Severity): Msg[] {\n  const m = messages.filter((m) => m.severity === severity).sort((a, b) => a.priority - b.priority);\n\n  return m.length > 0 ? [m.pop() as any] : [];\n}\n// eslint-disable-next-line\nexport class Banner extends React.PureComponent<BannerProps, {}> {\n  constructor(props: BannerProps) {\n    super(props);\n  }\n\n  render(): JSX.Element {\n    // Only display one instance of each message severity at a time\n    const errors = highestPriority(this.props.messages, Severity.Error);\n    const warnings = highestPriority(this.props.messages, Severity.Warning);\n    const infos = highestPriority(this.props.messages, Severity.Information);\n    const tasks = highestPriority(this.props.messages, Severity.Task);\n\n    const messages = [...errors, ...warnings, ...infos, ...tasks];\n\n    return (\n      <div className=\"banner sticky-top\">\n        <TransitionGroup>\n          {messages.map((m) => (\n            <CSSTransition key={m.guid} timeout={{ enter: 200, exit: 200 }}>\n              <Message key={m.guid} {...this.props} message={m} />\n            </CSSTransition>\n          ))}\n        </TransitionGroup>\n      </div>\n    );\n  }\n}\n"]}