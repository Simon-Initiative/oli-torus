{"version":3,"file":"ErrorBoundary.jsx","sourceRoot":"","sources":["../../../../src/components/common/ErrorBoundary.tsx"],"names":[],"mappings":"AAAA,OAAO,KAAoB,MAAM,OAAO,CAAC;AACzC,OAAO,IAAI,MAAM,YAAY,CAAC;AAC9B,OAAO,EAAE,QAAQ,EAAE,MAAM,4BAA4B,CAAC;AAEtD,MAAM,OAAO,aAAc,SAAQ,KAAK,CAAC,SAGxC;IACC,YAAY,KAAU;QACpB,KAAK,CAAC,KAAK,CAAC,CAAC;QACb,IAAI,CAAC,KAAK,GAAG,EAAE,QAAQ,EAAE,KAAK,EAAE,KAAK,EAAE,IAAI,EAAE,IAAI,EAAE,IAAI,EAAE,EAAE,EAAE,IAAI,EAAE,EAAE,CAAC;IACxE,CAAC;IAED,iBAAiB,CAAC,KAAY,EAAE,IAAe;QAC7C,2BAA2B;QAC3B,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;QAErB,IAAI,CAAC,QAAQ,CAAC,EAAE,QAAQ,EAAE,IAAI,EAAE,KAAK,EAAE,IAAI,EAAE,CAAC,CAAC;IACjD,CAAC;IAED,MAAM;;QACJ,IAAI;YACF,IAAI,IAAI,CAAC,KAAK,CAAC,QAAQ,EAAE;gBACvB,OAAO,CACL,CAAC,GAAG,CAAC,SAAS,CAAC,qBAAqB,CAAC,IAAI,CAAC,OAAO,CAC/C;YAAA,CAAC,EAAE,CAAC,SAAS,CAAC,eAAe,CAAC,MAAM,EAAE,EAAE,CACxC;YAAA,CAAC,CAAC,CAAC,SAAS,CAAC,MAAM,CAAC,qDAAqD,EAAE,CAAC,CAE5E;;YAAA,CAAC,EAAE,CAAC,AAAD,EAEH;;YAAA,CAAC,CAAC,CAAC,8EAA8E,EAAE,CAAC,CAEpF;;YAAA,CAAC,QAAQ,CAAC,OAAO,CAAC,oBAAoB,CACpC;cAAA,CAAC,GAAG,CACF,KAAK,CAAC,CAAC;wBACL,UAAU,EAAE,WAAW;wBACvB,SAAS,EAAE,YAAY;qBACxB,CAAC,CAEF;gBAAA,CAAC,EAAE,CAAC,CAAC,MAAA,IAAI,CAAC,KAAK,CAAC,KAAK,0CAAE,OAAO,CAAC,EAAE,EAAE,CACnC;gBAAA,CAAC,CAAC,CAAC,CAAC,MAAA,IAAI,CAAC,KAAK,CAAC,KAAK,0CAAE,KAAK,CAAC,EAAE,CAAC,CAC/B;gBAAA,CAAC,CAAC,CAAC,CAAC,MAAA,IAAI,CAAC,KAAK,CAAC,IAAI,0CAAE,cAAc,CAAC,EAAE,CAAC,CACzC;cAAA,EAAE,GAAG,CACP;YAAA,EAAE,QAAQ,CACZ;UAAA,EAAE,GAAG,CAAC,CACP,CAAC;aACH;YACD,OAAO,IAAI,CAAC,KAAK,CAAC,QAAQ,CAAC;SAC5B;QAAC,OAAO,KAAK,EAAE;YACd,2BAA2B;YAC3B,OAAO,CAAC,KAAK,CAAC,KAAK,CAAC,CAAC;SACtB;IACH,CAAC;CACF","sourcesContent":["import React, { ErrorInfo } from 'react';\nimport guid from 'utils/guid';\nimport { Collapse } from 'components/common/Collapse';\n\nexport class ErrorBoundary extends React.Component<\n  any,\n  { hasError: boolean; error: Error | null; info: ErrorInfo | null; id: string }\n> {\n  constructor(props: any) {\n    super(props);\n    this.state = { hasError: false, error: null, info: null, id: guid() };\n  }\n\n  componentDidCatch(error: Error, info: ErrorInfo) {\n    // tslint:disable-next-line\n    console.error(error);\n\n    this.setState({ hasError: true, error, info });\n  }\n\n  render() {\n    try {\n      if (this.state.hasError) {\n        return (\n          <div className=\"alert alert-warning\" role=\"alert\">\n            <h4 className=\"alert-heading\">Oh no!</h4>\n            <p className=\"mb-4\">Something went wrong. Refresh the page and try again.</p>\n\n            <hr />\n\n            <p>If the problem persists, contact OLI support with the following error message:</p>\n\n            <Collapse caption=\"Show error message\">\n              <div\n                style={{\n                  fontFamily: 'monospace',\n                  wordBreak: 'break-word',\n                }}\n              >\n                <h4>{this.state.error?.message}</h4>\n                <p>{this.state.error?.stack}</p>\n                <p>{this.state.info?.componentStack}</p>\n              </div>\n            </Collapse>\n          </div>\n        );\n      }\n      return this.props.children;\n    } catch (error) {\n      // tslint:disable-next-line\n      console.error(error);\n    }\n  }\n}\n"]}