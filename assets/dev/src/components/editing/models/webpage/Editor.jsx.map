{"version":3,"file":"Editor.jsx","sourceRoot":"","sources":["../../../../../../src/components/editing/models/webpage/Editor.tsx"],"names":[],"mappings":"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","sourcesContent":["import React from 'react';\nimport { ReactEditor, useSelected, useFocused } from 'slate-react';\nimport { Transforms } from 'slate';\nimport { updateModel, getEditMode } from 'components/editing/models/utils';\nimport * as ContentModel from 'data/content/model/elements/types';\nimport { EditorProps } from 'components/editing/models/interfaces';\nimport * as Settings from 'components/editing/models/settings/Settings';\nimport { displayModelToClassName } from 'data/content/utils';\n\nexport interface WebpageProps extends EditorProps<ContentModel.Webpage> {}\n\nexport const WebpageEditor = (props: WebpageProps) => {\n  const { attributes, children, editor, model } = props;\n\n  const editMode = getEditMode(editor);\n\n  const focused = useFocused();\n  const selected = useSelected();\n\n  const { src } = model;\n\n  const onEdit = (updated: ContentModel.Webpage) => {\n    updateModel<ContentModel.Webpage>(editor, model, updated);\n  };\n\n  const update = (attrs: Partial<ContentModel.Webpage>) => Object.assign({}, model, attrs);\n\n  const setCaption = (caption: string) => {\n    onEdit(update({ caption }));\n  };\n\n  const borderStyle =\n    focused && selected\n      ? { border: 'solid 3px lightblue', borderRadius: 0 }\n      : { border: 'solid 3px transparent' };\n\n  // Note that it is important that any interactive portions of a void editor\n  // must be enclosed inside of a \"contentEditable=false\" container. Otherwise,\n  // slate does some weird things that non-deterministically interface with click\n  // events.\n  return (\n    <div\n      {...attributes}\n      style={{ userSelect: 'none' }}\n      className={'Webpage-editor ' + displayModelToClassName(model.display)}\n    >\n      <div\n        contentEditable={false}\n        onClick={(_e) => {\n          ReactEditor.focus(editor);\n          Transforms.select(editor, ReactEditor.findPath(editor, model));\n        }}\n        className=\"embed-responsive embed-responsive-16by9 img-thumbnail position-relative\"\n        style={borderStyle}\n      >\n        <iframe className=\"embed-responsive-item\" src={src} allowFullScreen></iframe>\n        <div className=\"position-absolute\" style={{ top: 0, bottom: 0, left: 0, right: 0 }}></div>\n      </div>\n      <div contentEditable={false}>\n        <Settings.Input\n          editMode={editMode}\n          value={model.caption}\n          onChange={setCaption}\n          editor={editor}\n          model={model}\n          placeholder=\"Set a caption for this webpage\"\n        />\n      </div>\n\n      {children}\n    </div>\n  );\n};\n"]}