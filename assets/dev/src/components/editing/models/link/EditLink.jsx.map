{"version":3,"file":"EditLink.jsx","sourceRoot":"","sources":["../../../../../../src/components/editing/models/link/EditLink.tsx"],"names":[],"mappings":"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","sourcesContent":["import { onEnterApply } from 'components/editing/models/settings/Settings';\nimport { CloseButton } from 'components/misc/CloseButton';\nimport * as Persistence from 'data/persistence/resource';\nimport React, { useState } from 'react';\nimport { isInternalLink, normalizeHref, toInternalLink } from './utils';\n\ntype ExistingLinkEditorProps = {\n  href: string;\n  onEdit: (href: string) => void;\n  pages: Persistence.PagesReceived;\n\n  setEditLink: React.Dispatch<React.SetStateAction<boolean>>;\n  selectedPage: Persistence.Page;\n  setSelectedPage: React.Dispatch<React.SetStateAction<Persistence.Page | null>>;\n};\n\nexport const EditLink = (props: ExistingLinkEditorProps) => {\n  const { pages, selectedPage, setSelectedPage } = props;\n\n  const [href, setHref] = useState(props.href);\n  const [source, setSource] = useState<'page' | 'url'>(isInternalLink(props.href) ? 'page' : 'url');\n\n  const onChangeSource = (e: React.ChangeEvent<HTMLInputElement>) => {\n    const value = e.target.value;\n    if (value === 'url') {\n      setHref('');\n    } else if (pages.pages.length > 1) {\n      setHref(toInternalLink(pages.pages[0]));\n    }\n    setSource(value === 'page' ? 'page' : 'url');\n  };\n\n  return (\n    <div className=\"settings-editor-wrapper\">\n      <div className=\"settings-editor\">\n        <div className=\"mb-2 d-flex justify-content-between\">\n          <div className=\"d-flex flex-column\">\n            <div className=\"form-check\">\n              <input\n                className=\"form-check-input\"\n                defaultChecked={source === 'page'}\n                onChange={onChangeSource}\n                type=\"radio\"\n                name=\"inlineRadioOptions\"\n                id=\"inlineRadio1\"\n                value=\"page\"\n              />\n              <label className=\"form-check-label\" htmlFor=\"inlineRadio1\">\n                Link to Page in the Course\n              </label>\n            </div>\n            <div className=\"form-check\">\n              <input\n                className=\"form-check-input\"\n                defaultChecked={source === 'url'}\n                onChange={onChangeSource}\n                type=\"radio\"\n                name=\"inlineRadioOptions\"\n                id=\"inlineRadio2\"\n                value=\"url\"\n              />\n              <label className=\"form-check-label\" htmlFor=\"inlineRadio2\">\n                Link to External Web Page\n              </label>\n            </div>\n          </div>\n          <CloseButton editMode={true} onClick={() => props.setEditLink(false)} />\n        </div>\n        <form className=\"form-inline\">\n          <label className=\"sr-only\">Link</label>\n          {source === 'page' ? (\n            <select\n              className=\"form-control mr-2\"\n              value={toInternalLink(selectedPage)}\n              onChange={(e) => {\n                const href = e.target.value;\n                setHref(href);\n                const item = pages.pages.find((p) => toInternalLink(p) === href);\n                if (item) {\n                  setSelectedPage(item);\n                }\n              }}\n              style={{ minWidth: '300px' }}\n            >\n              {pages.pages.map((p) => (\n                <option key={p.id} value={toInternalLink(p)}>\n                  {p.title}\n                </option>\n              ))}\n            </select>\n          ) : (\n            <input\n              type=\"text\"\n              value={href}\n              placeholder=\"www.google.com\"\n              onChange={(e) => setHref(e.target.value)}\n              onKeyPress={(e) => onEnterApply(e, () => props.onEdit(normalizeHref(href)))}\n              className={'form-control mr-sm-2'}\n              style={{ display: 'inline ', width: '300px' }}\n            />\n          )}\n          <button\n            onClick={(e) => {\n              e.preventDefault();\n              e.stopPropagation();\n              props.onEdit(source === 'page' ? href : normalizeHref(href));\n            }}\n            className=\"btn btn-primary ml-1\"\n          >\n            Apply\n          </button>\n        </form>\n      </div>\n    </div>\n  );\n};\n"]}