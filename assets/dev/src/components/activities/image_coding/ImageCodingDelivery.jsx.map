{"version":3,"file":"ImageCodingDelivery.jsx","sourceRoot":"","sources":["../../../../../src/components/activities/image_coding/ImageCodingDelivery.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { useState, useEffect, useRef } from 'react';\nimport ReactDOM from 'react-dom';\nimport {\n  DeliveryElement,\n  DeliveryElementProps,\n  EvaluationResponse,\n  ResetActivityResponse,\n  RequestHintResponse,\n} from '../DeliveryElement';\nimport { ImageCodingModelSchema } from './schema';\nimport * as ActivityTypes from '../types';\nimport { Stem } from '../common/DisplayedStem';\nimport { Hints } from '../common/DisplayedHints';\nimport { Reset } from '../common/Reset';\nimport { Evaluation } from '../common/delivery/evaluation/Evaluation';\nimport { Evaluator, EvalContext } from './Evaluator';\nimport { lastPart } from './utils';\nimport { defaultWriterContext } from 'data/content/writers/context';\nimport { ImageCodeEditor } from './sections/ImageCodeEditor';\n\ntype Evaluation = {\n  score: number;\n  outOf: number;\n  feedback: ActivityTypes.RichText;\n};\n\n// eslint-disable-next-line\nexport interface ImageCodingDeliveryProps extends DeliveryElementProps<ImageCodingModelSchema> {\n  // output: string;\n}\n\nconst ImageCoding = (props: ImageCodingDeliveryProps) => {\n  const [model, setModel] = useState(props.model);\n  const [attemptState, setAttemptState] = useState(props.state);\n  const [hints, setHints] = useState(props.state.parts[0].hints);\n  const [hasMoreHints, setHasMoreHints] = useState(props.state.parts[0].hasMoreHints);\n  const [input, setInput] = useState(\n    attemptState.parts[0].response ? attemptState.parts[0].response.input : model.starterCode,\n  );\n  const { stem, resourceURLs } = model;\n  // runtime evaluation state:\n  const [output, setOutput] = useState('');\n  const [error, setError] = useState('');\n  const [ranCode, setRanCode] = useState(false);\n  let currentOutput = output;\n\n  const isEvaluated = attemptState.score !== null;\n\n  const writerContext = defaultWriterContext({ sectionSlug: props.sectionSlug });\n\n  // tslint:disable-next-line:prefer-array-literal\n  const resourceRefs = useRef<(HTMLImageElement | string)[]>(new Array(resourceURLs.length));\n  const canvasRef = useRef<HTMLCanvasElement>(null);\n  const canvasRef2 = useRef<HTMLCanvasElement>(null);\n  const resultRef = useRef<HTMLCanvasElement>(null);\n  const solnRef = useRef<HTMLCanvasElement>(null);\n\n  const loadCSV = (url: string, i: number) => {\n    fetch(url, { mode: 'cors' })\n      .then((resp) => {\n        if (!resp.ok) {\n          throw new Error('failed to load ' + lastPart(url) + ': ' + resp.statusText);\n        }\n        return resp.text();\n      })\n      .then((text) => (resourceRefs.current[i] = text))\n      .catch((e) => {\n        throw new Error('failed to load ' + lastPart(url) + ': ' + e);\n      });\n  };\n\n  const loadImage = (url: string, i: number) => {\n    const img = new Image();\n    // Owing to a flaw in S3, we get CORS errors when image is loaded from cache if cached\n    // copy was obtainedf rom an earlier non-CORS request. Appending unique query string is\n    // a simple hack to force fresh load.\n    img.src = url + '?t=' + new Date().getTime();\n    img.crossOrigin = 'anonymous';\n\n    // save references in parallel array. Elements never need to be attached to DOM.\n    resourceRefs.current[i] = img;\n  };\n\n  // effect hook to initiate fetching of resources, executes once on first render\n  useEffect(() => {\n    resourceURLs.map((url, i) => {\n      url.endsWith('csv') ? loadCSV(url, i) : loadImage(url, i);\n    });\n  }, []);\n\n  const onInputChange = (input: string) => {\n    setInput(input);\n\n    props.onSaveActivity(attemptState.attemptGuid, [\n      { attemptGuid: attemptState.parts[0].attemptGuid, response: { input } },\n    ]);\n  };\n\n  const onSubmit = () => {\n    const isCorrect = solutionCorrect();\n\n    // get attributes for a ClientEvaluation\n    const score = isCorrect ? 1 : 0;\n    const outOf = 1;\n    const feedback = model.feedback[score];\n\n    const partState = attemptState.parts[0];\n    props\n      .onSubmitEvaluations(attemptState.attemptGuid, [\n        { attemptGuid: partState.attemptGuid, score, outOf, feedback, response: { input } },\n      ])\n      .then((response: EvaluationResponse) => {\n        if (response.actions.length > 0) {\n          const action: ActivityTypes.FeedbackAction = response\n            .actions[0] as ActivityTypes.FeedbackAction;\n          const { error } = action;\n          const parts = [Object.assign({}, partState, { feedback, error })];\n          const updated = Object.assign({}, attemptState, { score, outOf, parts });\n          setAttemptState(updated);\n        }\n      });\n  };\n\n  const onRequestHint = () => {\n    props\n      .onRequestHint(attemptState.attemptGuid, attemptState.parts[0].attemptGuid)\n      .then((state: RequestHintResponse) => {\n        if (state.hint !== undefined) {\n          setHints([...hints, state.hint] as any);\n        }\n        setHasMoreHints(state.hasMoreHints);\n      });\n  };\n\n  const onReset = () => {\n    props.onResetActivity(attemptState.attemptGuid).then((state: ResetActivityResponse) => {\n      setAttemptState(state.attemptState);\n      setModel(state.model as ImageCodingModelSchema);\n      setHints([]);\n      setHasMoreHints(props.state.parts[0].hasMoreHints);\n      // Do we want reset to reload starter code, discarding changes?\n      // setInput(model.starterCode);\n      clearOutput();\n      setRanCode(false);\n    });\n  };\n\n  const updateOutput = (s: string) => {\n    // update local var so we can use it until next render\n    currentOutput = s;\n    setOutput(s);\n  };\n\n  const clearOutput = () => {\n    updateOutput('');\n    setError('');\n    // collapse result canvas\n    if (resultRef.current) {\n      resultRef.current.width = 0;\n      resultRef.current.height = 0;\n    }\n  };\n\n  const appendOutput = (s: string) => {\n    updateOutput(currentOutput + s);\n  };\n\n  const onRun = () => {\n    // clear output for new run\n    clearOutput();\n\n    const ctx: EvalContext = {\n      getCanvas,\n      getResource,\n      getResult,\n      appendOutput,\n      solutionRun: false,\n    };\n    const e = Evaluator.execute(input, ctx);\n    if (e != null) {\n      setError(e.message);\n    }\n\n    setRanCode(true);\n  };\n\n  const usesImages = () => {\n    return resourceURLs.some((url) => !url.endsWith('csv'));\n  };\n\n  const solutionCorrect = () => {\n    return usesImages() ? imageCorrect() : textCorrect();\n  };\n\n  const textCorrect = () => {\n    return new RegExp(model.regex).test(output);\n  };\n\n  const imageCorrect = () => {\n    // evaluate solution code if needed to \"print\" result image to solnCanvas.\n    // only needs to be done once, setting solnCanvas.width > 0\n    const ctx: EvalContext = {\n      getCanvas,\n      getResource,\n      getResult,\n      appendOutput,\n      solutionRun: true,\n    };\n    const solnCanvas = getResult(true);\n    if (solnCanvas && solnCanvas.width === 0) {\n      const e = Evaluator.execute(model.solutionCode, ctx);\n      if (e != null) {\n        setError(e.message);\n      }\n    }\n\n    const diff = Evaluator.getResultDiff(ctx);\n    return diff < model.tolerance;\n  };\n\n  const evaluationSummary = isEvaluated ? (\n    <Evaluation key=\"evaluation\" attemptState={attemptState} context={writerContext} />\n  ) : null;\n\n  const reset =\n    isEvaluated && !props.graded ? (\n      <div className=\"d-flex\">\n        <div className=\"flex-fill\"></div>\n        <Reset hasMoreAttempts={attemptState.hasMoreAttempts} onClick={onReset} />\n      </div>\n    ) : null;\n\n  const ungradedDetails = props.graded\n    ? null\n    : [\n        evaluationSummary,\n        <Hints\n          key=\"hints\"\n          onClick={onRequestHint}\n          hints={hints}\n          context={writerContext}\n          hasMoreHints={hasMoreHints}\n          isEvaluated={isEvaluated}\n        />,\n      ];\n\n  const renderOutput = () => {\n    if (output === '') {\n      return null;\n    }\n    return <p>{output}</p>;\n  };\n\n  const errorMsg = () => {\n    if (!error) {\n      return null;\n    }\n\n    return (\n      <p>\n        <span style={{ color: 'red' }}>Error: </span>\n        {error}\n      </p>\n    );\n  };\n\n  const getCanvas = (n = 0) => {\n    // we currently only need exactly two temp canvases, one for src and\n    // one for destination of offscreen transformation.\n    return n === 0 ? canvasRef.current : canvasRef2.current;\n  };\n\n  const getResource = (name: string) => {\n    const i = resourceURLs.findIndex((url) => lastPart(url) === name);\n    if (i < 0 || i >= resourceRefs.current.length) {\n      return null;\n    }\n\n    return resourceRefs.current[i];\n  };\n\n  const getResult = (solution: boolean) => {\n    return solution ? solnRef.current : resultRef.current;\n  };\n\n  const maybeSubmitButton = model.isExample ? null : (\n    <button\n      className=\"btn btn-primary mt-2 float-right\"\n      disabled={isEvaluated || !ranCode}\n      onClick={onSubmit}\n    >\n      Submit\n    </button>\n  );\n\n  const runButton = (\n    <button className=\"btn btn-primary mt-2 float-left\" disabled={isEvaluated} onClick={onRun}>\n      Run\n    </button>\n  );\n\n  return (\n    <div className=\"activity short-answer-activity\">\n      <div className=\"activity-content\">\n        <Stem stem={stem} context={writerContext} />\n\n        <div>\n          <ImageCodeEditor value={input} disabled={isEvaluated} onChange={onInputChange} />\n          {runButton} {maybeSubmitButton}\n        </div>\n\n        {/* implementation relies on 2 hidden canvases for image operations */}\n        <canvas ref={canvasRef} style={{ display: 'none' }} />\n        <canvas ref={canvasRef2} style={{ display: 'none' }} />\n\n        <div style={{ whiteSpace: 'pre-wrap' }}>\n          <h5>Output:</h5>\n          {renderOutput()}\n          {errorMsg()}\n          {/* output canvases for student and (hidden) correct solution */}\n          <canvas ref={resultRef} height=\"0\" width=\"0\" />\n          <canvas ref={solnRef} style={{ display: 'none' }} height=\"0\" width=\"0\" />\n        </div>\n\n        {!model.isExample && ungradedDetails}\n      </div>\n      {reset}\n    </div>\n  );\n};\n\n// Defines the web component, a simple wrapper over our React component above\nexport class ImageCodingDelivery extends DeliveryElement<ImageCodingModelSchema> {\n  render(mountPoint: HTMLDivElement, props: ImageCodingDeliveryProps) {\n    ReactDOM.render(<ImageCoding {...props} />, mountPoint);\n  }\n}\n\n// Register the web component:\n// eslint-disable-next-line\nconst manifest = require('./manifest.json') as ActivityTypes.Manifest;\nwindow.customElements.define(manifest.delivery.element, ImageCodingDelivery);\n"]}