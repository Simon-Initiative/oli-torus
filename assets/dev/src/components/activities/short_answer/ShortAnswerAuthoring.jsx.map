{"version":3,"file":"ShortAnswerAuthoring.jsx","sourceRoot":"","sources":["../../../../../src/components/activities/short_answer/ShortAnswerAuthoring.tsx"],"names":[],"mappings":"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","sourcesContent":["import { AuthoringButtonConnected } from 'components/activities/common/authoring/AuthoringButton';\nimport { InputTypeDropdown } from 'components/activities/common/authoring/InputTypeDropdown';\nimport { ActivitySettings } from 'components/activities/common/authoring/settings/ActivitySettings';\nimport { shuffleAnswerChoiceSetting } from 'components/activities/common/authoring/settings/activitySettingsActions';\nimport { Hints } from 'components/activities/common/hints/authoring/HintsAuthoringConnected';\nimport { ResponseActions } from 'components/activities/common/responses/responseActions';\nimport { ResponseCard } from 'components/activities/common/responses/ResponseCard';\nimport { SimpleFeedback } from 'components/activities/common/responses/SimpleFeedback';\nimport { Stem } from 'components/activities/common/stem/authoring/StemAuthoringConnected';\nimport { StemDelivery } from 'components/activities/common/stem/delivery/StemDelivery';\nimport { DEFAULT_PART_ID } from 'components/activities/common/utils';\nimport { InputEntry } from 'components/activities/short_answer/sections/InputEntry';\nimport { getTargetedResponses, shortAnswerOptions } from 'components/activities/short_answer/utils';\nimport { makeResponse, Manifest, Response } from 'components/activities/types';\nimport { TabbedNavigation } from 'components/tabbed_navigation/Tabs';\nimport { getCorrectResponse } from 'data/activities/model/responses';\nimport { containsRule, eqRule } from 'data/activities/model/rules';\nimport { defaultWriterContext } from 'data/content/writers/context';\nimport React from 'react';\nimport ReactDOM from 'react-dom';\nimport { Provider } from 'react-redux';\nimport { configureStore } from 'state/store';\nimport {\n  AuthoringElement,\n  AuthoringElementProps,\n  AuthoringElementProvider,\n  useAuthoringElementContext,\n} from '../AuthoringElement';\nimport { ShortAnswerActions } from './actions';\nimport { ShortAnswerModelSchema } from './schema';\n\nconst store = configureStore();\n\nconst ShortAnswer = () => {\n  const { dispatch, model, editMode } = useAuthoringElementContext<ShortAnswerModelSchema>();\n  return (\n    <>\n      <TabbedNavigation.Tabs>\n        <TabbedNavigation.Tab label=\"Question\">\n          <div className=\"d-flex flex-column flex-md-row mb-2\">\n            <Stem />\n            <InputTypeDropdown\n              options={shortAnswerOptions}\n              editMode={editMode}\n              selected={model.inputType}\n              onChange={(inputType) =>\n                dispatch(ShortAnswerActions.setInputType(inputType, DEFAULT_PART_ID))\n              }\n            />\n          </div>\n        </TabbedNavigation.Tab>\n        <TabbedNavigation.Tab label=\"Answer Key\">\n          <div className=\"d-flex flex-column mb-2\">\n            <StemDelivery stem={model.stem} context={defaultWriterContext()} />\n            <InputEntry\n              key={getCorrectResponse(model, DEFAULT_PART_ID).id}\n              inputType={model.inputType}\n              response={getCorrectResponse(model, DEFAULT_PART_ID)}\n              onEditResponseRule={(id, rule) => dispatch(ResponseActions.editRule(id, rule))}\n            />\n            <SimpleFeedback partId={DEFAULT_PART_ID} />\n            {getTargetedResponses(model, DEFAULT_PART_ID).map((response: Response) => (\n              <ResponseCard\n                title=\"Targeted feedback\"\n                response={response}\n                updateFeedback={(id, content) =>\n                  dispatch(ResponseActions.editResponseFeedback(response.id, content))\n                }\n                removeResponse={(id) => dispatch(ResponseActions.removeResponse(id))}\n                key={response.id}\n              >\n                <InputEntry\n                  key={response.id}\n                  inputType={model.inputType}\n                  response={response}\n                  onEditResponseRule={(id, rule) => dispatch(ResponseActions.editRule(id, rule))}\n                />\n              </ResponseCard>\n            ))}\n            <AuthoringButtonConnected\n              className=\"align-self-start btn btn-link\"\n              action={() =>\n                dispatch(\n                  ResponseActions.addResponse(\n                    makeResponse(\n                      model.inputType === 'numeric' ? eqRule('1') : containsRule('another answer'),\n                      0,\n                      '',\n                    ),\n                    DEFAULT_PART_ID,\n                  ),\n                )\n              }\n            >\n              Add targeted feedback\n            </AuthoringButtonConnected>\n          </div>\n        </TabbedNavigation.Tab>\n\n        <TabbedNavigation.Tab label=\"Hints\">\n          <Hints partId={DEFAULT_PART_ID} />\n        </TabbedNavigation.Tab>\n        <ActivitySettings settings={[shuffleAnswerChoiceSetting(model, dispatch)]} />\n      </TabbedNavigation.Tabs>\n    </>\n  );\n};\n\nexport class ShortAnswerAuthoring extends AuthoringElement<ShortAnswerModelSchema> {\n  render(mountPoint: HTMLDivElement, props: AuthoringElementProps<ShortAnswerModelSchema>) {\n    ReactDOM.render(\n      <Provider store={store}>\n        <AuthoringElementProvider {...props}>\n          <ShortAnswer />\n        </AuthoringElementProvider>\n      </Provider>,\n      mountPoint,\n    );\n  }\n}\n// eslint-disable-next-line\nconst manifest = require('./manifest.json') as Manifest;\nwindow.customElements.define(manifest.authoring.element, ShortAnswerAuthoring);\n"]}