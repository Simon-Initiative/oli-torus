{"version":3,"file":"resource.js","sourceRoot":"","sources":["../../../../src/data/persistence/resource.ts"],"names":[],"mappings":"AAEA,OAAO,EAAE,WAAW,EAAE,MAAM,UAAU,CAAC;AAYvC,MAAM,UAAU,IAAI,CAClB,OAAoB,EACpB,QAAsB,EACtB,aAA6B,EAC7B,WAAoB;IAEpB,MAAM,MAAM,GAAG,MAAM,CAAC,MAAM,CAAC,EAAE,EAAE,aAAa,EAAE,EAAE,WAAW,EAAE,CAAC,CAAC;IAEjE,MAAM,MAAM,GAAG;QACb,MAAM,EAAE,KAAK;QACb,IAAI,EAAE,IAAI,CAAC,SAAS,CAAC,EAAE,MAAM,EAAE,CAAC;QAChC,GAAG,EAAE,YAAY,OAAO,aAAa,QAAQ,EAAE;KAChD,CAAC;IAEF,OAAO,WAAW,CAAS,MAAM,CAAC,CAAC;AACrC,CAAC;AAKD,gEAAgE;AAChE,wBAAwB;AACxB,MAAM,UAAU,KAAK,CAAC,OAAoB,EAAE,OAAgB;IAC1D,MAAM,WAAW,GAAG,OAAO,KAAK,SAAS,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC,CAAC,YAAY,OAAO,EAAE,CAAC;IAEvE,MAAM,MAAM,GAAG;QACb,MAAM,EAAE,KAAK;QACb,GAAG,EAAE,YAAY,OAAO,QAAQ,WAAW,EAAE;KAC9C,CAAC;IAEF,OAAO,WAAW,CAAgB,MAAM,CAAC,CAAC;AAC5C,CAAC","sourcesContent":["import { ProjectSlug, ResourceSlug } from 'data/types';\nimport { AttachedObjectives, PageContent } from '../content/resource';\nimport { makeRequest } from './common';\n\nexport type ResourceUpdate = {\n  title: string;\n  objectives: AttachedObjectives;\n  content: PageContent;\n  releaseLock: boolean;\n};\n\n// TODO: server responding with revision_slug instead of revisionSlug as expected\nexport type Edited = { type: 'success'; revisionSlug: string; revision_slug?: string };\n\nexport function edit(\n  project: ProjectSlug,\n  resource: ResourceSlug,\n  pendingUpdate: ResourceUpdate,\n  releaseLock: boolean,\n) {\n  const update = Object.assign({}, pendingUpdate, { releaseLock });\n\n  const params = {\n    method: 'PUT',\n    body: JSON.stringify({ update }),\n    url: `/project/${project}/resource/${resource}`,\n  };\n\n  return makeRequest<Edited>(params);\n}\n\nexport type Page = { id: string; title: string };\nexport type PagesReceived = { type: 'success'; pages: Page[] };\n\n// Requests all of the page details for a course for the purpose\n// of constructing links\nexport function pages(project: ProjectSlug, current?: string) {\n  const currentSlug = current === undefined ? '' : `?current=${current}`;\n\n  const params = {\n    method: 'GET',\n    url: `/project/${project}/link${currentSlug}`,\n  };\n\n  return makeRequest<PagesReceived>(params);\n}\n"]}