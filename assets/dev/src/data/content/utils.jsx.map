{"version":3,"file":"utils.jsx","sourceRoot":"","sources":["../../../../src/data/content/utils.tsx"],"names":[],"mappings":"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","sourcesContent":["import { toSimpleText } from 'components/editing/utils';\nimport { ModelElement } from 'data/content/model/elements/types';\nimport { MediaDisplayMode } from 'data/content/model/other';\nimport { ContentItem, ContentTypes, isContentItem } from 'data/content/writers/writer';\nimport * as React from 'react';\nimport { PopoverState } from 'react-tiny-popover';\nimport { Element, Text } from 'slate';\nimport { StructuredContent } from './resource';\n\n// float_left and float_right no longer supported as options\nexport function displayModelToClassName(display: MediaDisplayMode | undefined) {\n  switch (display) {\n    case 'float_left':\n    case 'float_right':\n    case 'block':\n      return 'd-block';\n    default:\n      return 'd-block';\n  }\n}\n\nexport function getContentDescription(content: StructuredContent): JSX.Element {\n  let simpleText;\n\n  if (content.children.length > 0) {\n    let i = 0;\n\n    while (i < content.children.length) {\n      const item = content.children[i];\n\n      switch (item.type) {\n        case 'audio':\n          return <i>Audio Clip</i>;\n        case 'code':\n          return <i>Code Block</i>;\n        case 'img':\n          return <i>Image</i>;\n        case 'youtube':\n          return <i>YouTube Video</i>;\n        case 'table':\n          return <i>Table</i>;\n        case 'math':\n          return <i>Math Expression</i>;\n        case 'ol':\n        case 'ul':\n          return <i>List</i>;\n        case 'h1':\n        case 'h2':\n        case 'h3':\n        case 'h4':\n        case 'h5':\n        case 'h6':\n        case 'p':\n        case 'blockquote':\n          simpleText = toSimpleText(item).trim();\n          if (simpleText !== '') {\n            return <span>{simpleText}</span>;\n          }\n      }\n      i = i + 1;\n    }\n  }\n\n  return <i>Empty</i>;\n}\n\nexport const centeredAbove = ({ popoverRect, childRect }: PopoverState, yOffset = 56) => {\n  return {\n    top: childRect.top + window.scrollY - yOffset,\n    left: childRect.left + window.window.scrollX + childRect.width / 2 - popoverRect.width / 2,\n  };\n};\n\nconst contentBfs = (\n  content: ContentTypes,\n  cb: (c: ContentItem | ModelElement | Text) => any,\n): void => {\n  if (Array.isArray(content)) {\n    return content.forEach((c: ContentItem | ModelElement) => contentBfs(c, cb));\n  }\n\n  cb(content);\n  if (isContentItem(content) || Element.isElement(content)) {\n    const children = content.children;\n    if (Array.isArray(children)) {\n      return contentBfs(\n        (children as Array<ModelElement>).filter((c: ModelElement) => c.type !== 'input_ref'),\n        cb,\n      );\n    }\n  }\n};\n\nexport const elementsOfType = (content: ContentTypes, type: string): ModelElement[] => {\n  const elements: ModelElement[] = [];\n  contentBfs(content, (elem) => {\n    if (Element.isElement(elem) && elem.type === type) {\n      elements.push(elem);\n    }\n  });\n  return elements;\n};\n"]}