{"version":3,"file":"html.jsx","sourceRoot":"","sources":["../../../../../src/data/content/writers/html.tsx"],"names":[],"mappings":"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","sourcesContent":["/* eslint-disable react/display-name */\nimport { DropdownInput } from 'components/activities/common/delivery/inputs/DropdownInput';\nimport { HintsBadge } from 'components/activities/common/delivery/inputs/HintsBadge';\nimport { NumericInput } from 'components/activities/common/delivery/inputs/NumericInput';\nimport { TextInput } from 'components/activities/common/delivery/inputs/TextInput';\nimport {\n  Audio,\n  Blockquote,\n  Code,\n  CodeLine,\n  HeadingFive,\n  HeadingFour,\n  HeadingOne,\n  HeadingSix,\n  HeadingThree,\n  HeadingTwo,\n  Hyperlink,\n  Image,\n  InputRef,\n  ListItem,\n  Math,\n  MathLine,\n  ModelElement,\n  OrderedList,\n  Paragraph,\n  Popup,\n  Table,\n  TableData,\n  TableHeader,\n  TableRow,\n  UnorderedList,\n  Webpage,\n  YouTube,\n} from 'data/content/model/elements/types';\nimport { Mark } from 'data/content/model/text';\nimport React from 'react';\nimport { OverlayTrigger, Popover } from 'react-bootstrap';\nimport { OverlayTriggerType } from 'react-bootstrap/esm/OverlayTrigger';\nimport { Text } from 'slate';\nimport { assertNever, valueOr } from 'utils/common';\nimport { WriterContext } from './context';\nimport { Next, WriterImpl } from './writer';\n\n// Important: any changes to this file must be replicated\n// in content/html.ex for non-activity rendering.\n\nexport class HtmlParser implements WriterImpl {\n  private escapeXml = (text: string) => decodeURI(encodeURI(text));\n\n  private wrapWithMarks(text: string, textEntity: Text): React.ReactElement {\n    const supportedMarkTags: { [key: string]: (e: React.ReactElement) => React.ReactElement } = {\n      em: (e) => <em>{e}</em>,\n      strong: (e) => <strong>{e}</strong>,\n      mark: (e) => <mark>{e}</mark>,\n      del: (e) => <del>{e}</del>,\n      var: (e) => <var>{e}</var>,\n      code: (e) => <code>{e}</code>,\n      sub: (e) => <sub>{e}</sub>,\n      sup: (e) => <sup>{e}</sup>,\n    };\n    return Object.keys(textEntity)\n      .filter((attr: Mark | 'text') => textEntity[attr] === true)\n      .map((attr) => supportedMarkTags[attr])\n      .filter((mark) => mark)\n      .reduce((acc, mark) => mark(acc), <>{text}</>);\n  }\n\n  private figure(attrs: any, content: React.ReactElement) {\n    if (!attrs.caption) {\n      return content;\n    }\n\n    return (\n      <div className=\"figure-wrapper\">\n        <figure className=\"figure embed-responsive text-center\">\n          {content}\n          <figcaption className=\"figure-caption text-center\">\n            {this.escapeXml(attrs.caption)}\n          </figcaption>\n        </figure>\n      </div>\n    );\n  }\n  p(context: WriterContext, next: Next, _x: Paragraph) {\n    return <p>{next()}</p>;\n  }\n  h1(context: WriterContext, next: Next, _x: HeadingOne) {\n    return <h1>{next()}</h1>;\n  }\n  h2(context: WriterContext, next: Next, _x: HeadingTwo) {\n    return <h2>{next()}</h2>;\n  }\n  h3(context: WriterContext, next: Next, _x: HeadingThree) {\n    return <h3>{next()}</h3>;\n  }\n  h4(context: WriterContext, next: Next, _x: HeadingFour) {\n    return <h4>{next()}</h4>;\n  }\n  h5(context: WriterContext, next: Next, _x: HeadingFive) {\n    return <h5>{next()}</h5>;\n  }\n  h6(context: WriterContext, next: Next, _x: HeadingSix) {\n    return <h6>{next()}</h6>;\n  }\n  img(context: WriterContext, next: Next, attrs: Image) {\n    return this.figure(\n      attrs,\n      <img\n        className=\"figure-img img-fluid\"\n        alt={attrs.alt ? this.escapeXml(attrs.alt) : ''}\n        width={attrs.width ? this.escapeXml(String(attrs.width)) : undefined}\n        height={attrs.height ? this.escapeXml(String(attrs.height)) : undefined}\n        src={this.escapeXml(attrs.src)}\n      />,\n    );\n  }\n  youtube(context: WriterContext, next: Next, attrs: YouTube) {\n    return this.iframe(context, next, {\n      ...attrs,\n      src: `https://www.youtube.com/embed/${this.escapeXml(attrs.src)}`,\n    });\n  }\n  iframe(context: WriterContext, next: Next, attrs: Webpage | YouTube) {\n    return this.figure(\n      attrs,\n      <div className=\"embed-responsive embed-responsive-16by9\">\n        <iframe className=\"embed-responsive-item\" allowFullScreen src={this.escapeXml(attrs.src)} />\n      </div>,\n    );\n  }\n  audio(context: WriterContext, next: Next, attrs: Audio) {\n    return this.figure(\n      attrs,\n      <audio controls src={this.escapeXml(attrs.src)}>\n        Your browser does not support the <code>audio</code> element.\n      </audio>,\n    );\n  }\n  table(context: WriterContext, next: Next, attrs: Table) {\n    return (\n      <table>\n        {attrs.caption ? <caption>{this.escapeXml(attrs.caption)}</caption> : undefined}\n        {next()}\n      </table>\n    );\n  }\n  tr(context: WriterContext, next: Next, _x: TableRow) {\n    return <tr>{next()}</tr>;\n  }\n  th(context: WriterContext, next: Next, _x: TableHeader) {\n    return <th>{next()}</th>;\n  }\n  td(context: WriterContext, next: Next, _x: TableData) {\n    return <td>{next()}</td>;\n  }\n  ol(context: WriterContext, next: Next, _x: OrderedList) {\n    return <ol>{next()}</ol>;\n  }\n  ul(context: WriterContext, next: Next, _x: UnorderedList) {\n    return <ul>{next()}</ul>;\n  }\n  li(context: WriterContext, next: Next, _x: ListItem) {\n    return <li>{next()}</li>;\n  }\n  math(context: WriterContext, next: Next, _x: Math) {\n    return <div>{next()}</div>;\n  }\n  mathLine(context: WriterContext, next: Next, _x: MathLine) {\n    return next();\n  }\n  code(context: WriterContext, next: Next, attrs: Code) {\n    return this.figure(\n      attrs,\n      <pre>\n        <code className={`language-${this.escapeXml(attrs.language)}`}>{next()}</code>\n      </pre>,\n    );\n  }\n  codeLine(context: WriterContext, next: Next, _x: CodeLine) {\n    return next();\n  }\n  blockquote(context: WriterContext, next: Next, _x: Blockquote) {\n    return <blockquote>{next()}</blockquote>;\n  }\n  a(context: WriterContext, next: Next, { href }: Hyperlink) {\n    if (href.startsWith('/course/link/')) {\n      let internalHref = href;\n      if (context.sectionSlug) {\n        const revisionSlug = href.replace(/^\\/course\\/link\\//, '');\n        internalHref = `/sections/${context.sectionSlug}/page/${revisionSlug}`;\n      } else {\n        internalHref = '#';\n      }\n\n      return (\n        <a className=\"internal-link\" href={this.escapeXml(internalHref)}>\n          {next()}\n        </a>\n      );\n    }\n\n    return (\n      <a className=\"external-link\" href={this.escapeXml(href)} target=\"_blank\" rel=\"noreferrer\">\n        {next()}\n      </a>\n    );\n  }\n  inputRef(context: WriterContext, _next: Next, inputRef: InputRef) {\n    const { inputRefContext } = context;\n    const inputData = inputRefContext?.inputs.get(inputRef.id);\n    if (!inputRefContext || !inputData) {\n      return <TextInput onChange={() => {}} value=\"\" disabled />;\n    }\n\n    const shared = {\n      onChange: (e: React.ChangeEvent<HTMLInputElement | HTMLSelectElement>) =>\n        inputRefContext.onChange(inputRef.id, e),\n      value: valueOr(inputData.value, ''),\n      disabled: inputRefContext.disabled,\n      placeholder: inputData.placeholder || '',\n    };\n\n    const withHints = (element: React.ReactElement) => (\n      <>\n        {element}\n        <HintsBadge\n          hasHints={inputData.hasHints}\n          toggleHints={() => inputRefContext.toggleHints(inputData.input.id)}\n        />\n      </>\n    );\n\n    switch (inputData.input.inputType) {\n      case 'numeric':\n        return withHints(<NumericInput {...shared} />);\n      case 'text':\n        return withHints(<TextInput {...shared} />);\n      case 'dropdown':\n        return withHints(\n          <DropdownInput\n            {...shared}\n            options={inputData.input.options}\n            selected={inputData.value}\n          />,\n        );\n      default:\n        assertNever(inputData.input);\n    }\n  }\n\n  popup(context: WriterContext, anchorNext: Next, contentNext: Next, popup: Popup) {\n    const trigger: OverlayTriggerType[] =\n      this.escapeXml(popup.trigger) === 'hover' ? ['hover', 'focus'] : ['focus'];\n\n    const popupContent = (\n      <Popover id={popup.id}>\n        <Popover.Content className=\"popup__content\">{contentNext()}</Popover.Content>\n      </Popover>\n    );\n\n    return (\n      <OverlayTrigger trigger={trigger} placement=\"top\" overlay={popupContent}>\n        <span\n          tabIndex={0}\n          role=\"button\"\n          className={`popup__anchorText${trigger.includes('hover') ? '' : ' popup__click'}`}\n        >\n          {anchorNext()}\n        </span>\n      </OverlayTrigger>\n    );\n  }\n\n  text(context: WriterContext, textEntity: Text) {\n    return this.wrapWithMarks(textEntity.text, textEntity);\n  }\n  unsupported(_context: WriterContext, x: ModelElement) {\n    console.error('Content element ' + JSON.stringify(x) + ' is invalid and could not display.');\n    return <div className=\"content invalid\">Content element is invalid</div>;\n  }\n}\n"]}