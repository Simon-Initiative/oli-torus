{"version":3,"file":"slice.js","sourceRoot":"","sources":["../../../../../../src/apps/authoring/store/page/slice.ts"],"names":[],"mappings":"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","sourcesContent":["import { createSelector, createSlice, PayloadAction, Slice } from '@reduxjs/toolkit';\nimport { ResourceId } from 'data/types';\nimport { RootState } from '../rootReducer';\n\nexport interface PageState {\n  graded: boolean;\n  authorEmail: string;\n  objectives: any;\n  title: string;\n  revisionSlug: string;\n  resourceId: ResourceId;\n  // below here go into \"content\" when writing to server\n  advancedAuthoring?: boolean;\n  advancedDelivery?: boolean;\n  displayApplicationChrome?: boolean;\n  additionalStylesheets?: string[];\n  customCss?: string;\n  customScript?: string;\n  custom?: any;\n}\n\nconst initialState: PageState = {\n  graded: false,\n  authorEmail: '',\n  objectives: { attached: [] },\n  title: 'New Adaptive Page',\n  revisionSlug: '',\n  resourceId: -1,\n  advancedAuthoring: true,\n  advancedDelivery: true,\n  displayApplicationChrome: false,\n  additionalStylesheets: [],\n  customCss: '',\n  customScript: '',\n  custom: {},\n};\n\nconst slice: Slice<PageState> = createSlice({\n  name: 'page',\n  initialState,\n  reducers: {\n    loadPage(state, action: PayloadAction<Partial<PageState>>) {\n      state.graded = !!action.payload.graded;\n      state.authorEmail = action.payload.authorEmail || initialState.authorEmail;\n      state.title = action.payload.title || initialState.title;\n      state.objectives = action.payload.objectives || initialState.objectives;\n      state.resourceId = action.payload.resourceId || initialState.resourceId;\n      state.revisionSlug = action.payload.revisionSlug || initialState.revisionSlug;\n\n      // for now don't need to set advancedAuthoring or advancedDelivery or displayApplicationChrome\n      state.additionalStylesheets =\n        action.payload.additionalStylesheets || initialState.additionalStylesheets;\n      state.customCss = action.payload.customCss || initialState.customCss;\n      state.customScript = action.payload.customScript || initialState.customScript;\n      state.custom = action.payload.custom || initialState.custom;\n    },\n    updatePage(state, action: PayloadAction<Partial<PageState>>) {\n      if (action.payload.graded !== undefined) {\n        state.graded = action.payload.graded;\n      }\n      if (action.payload.authorEmail !== undefined) {\n        state.authorEmail = action.payload.authorEmail;\n      }\n      if (action.payload.title !== undefined) {\n        state.title = action.payload.title;\n      }\n      if (action.payload.objectives !== undefined) {\n        state.objectives = action.payload.objectives;\n      }\n      if (action.payload.custom !== undefined) {\n        state.custom = action.payload.custom;\n      }\n      if (action.payload.customCss !== undefined) {\n        state.customCss = action.payload.customCss;\n      }\n      if (action.payload.customScript !== undefined) {\n        state.customScript = action.payload.customScript;\n      }\n      if (action.payload.additionalStylesheets !== undefined) {\n        state.additionalStylesheets = action.payload.additionalStylesheets;\n      }\n      /* if (action.payload.revisionSlug !== undefined) {\n        state.revisionSlug = action.payload.revisionSlug;\n      } */\n    },\n    setIsGraded(state, action: PayloadAction<{ graded: boolean }>) {\n      state.graded = action.payload.graded;\n    },\n    setTitle(state, action: PayloadAction<{ title: string }>) {\n      state.title = action.payload.title;\n    },\n    setObjectives(state, action: PayloadAction<{ objectives: any }>) {\n      state.objectives = action.payload.objectives;\n    },\n    setRevisionSlug(state, action: PayloadAction<{ revisionSlug: string }>) {\n      state.revisionSlug = action.payload.revisionSlug;\n    },\n  },\n});\n\nexport const PageSlice = slice.name;\n\nexport const { loadPage, setIsGraded, setTitle, setObjectives, setRevisionSlug, updatePage } =\n  slice.actions;\n\nexport const selectState = (state: RootState): PageState => state[PageSlice] as PageState;\nexport const selectIsGraded = createSelector(selectState, (state: PageState) => state.graded);\nexport const selectTitle = createSelector(selectState, (state: PageState) => state.title);\nexport const selectObjectives = createSelector(selectState, (state: PageState) => state.objectives);\nexport const selectResourceId = createSelector(selectState, (state: PageState) => state.resourceId);\nexport const selectRevisionSlug = createSelector(\n  selectState,\n  (state: PageState) => state.revisionSlug,\n);\n\nexport default slice.reducer;\n"]}