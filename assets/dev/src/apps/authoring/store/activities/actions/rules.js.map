{"version":3,"file":"rules.js","sourceRoot":"","sources":["../../../../../../../src/apps/authoring/store/activities/actions/rules.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,kBAAkB,CAAC;AACpD,OAAO,IAAI,MAAM,YAAY,CAAC;AAC9B,OAAO,EAAE,eAAe,EAAE,MAAM,sDAAsD,CAAC;AACvF,OAAO,EAAE,cAAc,EAAE,MAAM,kBAAkB,CAAC;AAElD,MAAM,CAAC,MAAM,iBAAiB,GAAG,gBAAgB,CAC/C,GAAG,eAAe,oBAAoB,EACtC,CAAO,OAAiD,EAAE,EAAE;IAC1D,MAAM,EAAE,MAAM,GAAG,KAAK,IAAI,EAAE,EAAE,EAAE,SAAS,GAAG,KAAK,EAAE,GAAG,OAAO,CAAC;IAE9D,MAAM,IAAI,GAAG;QACX,EAAE,EAAE,GAAG,MAAM,UAAU;QACvB,IAAI,EAAE,SAAS;QACf,QAAQ,EAAE,KAAK;QACf,eAAe,EAAE,GAAG;QACpB,aAAa,EAAE,KAAK;QACpB,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,IAAI;QACb,UAAU,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE;QACvB,KAAK,EAAE;YACL,IAAI,EAAE,GAAG,MAAM,UAAU;YACzB,MAAM,EAAE;gBACN,OAAO,EAAE;oBACP;wBACE,IAAI,EAAE,YAAY;wBAClB,MAAM,EAAE,EAAE,MAAM,EAAE,MAAM,EAAE;qBAC3B;iBACF;aACF;SACF;KACF,CAAC;IAEF,OAAO,IAAI,CAAC;AACd,CAAC,CAAA,CACF,CAAC;AAEF,MAAM,CAAC,MAAM,mBAAmB,GAAG,gBAAgB,CACjD,GAAG,eAAe,sBAAsB,EACxC,CAAO,OAAiD,EAAE,EAAE,QAAQ,EAAE,EAAE,EAAE;IACxE,MAAM,EAAE,MAAM,GAAG,KAAK,IAAI,EAAE,EAAE,EAAE,SAAS,GAAG,KAAK,EAAE,GAAG,OAAO,CAAC;IAE9D,MAAM,EAAE,OAAO,EAAE,cAAc,EAAE,GAAG,MAAM,QAAQ,CAAC,cAAc,CAAC,EAAE,CAAC,CAAC,CAAC;IAEvE,MAAM,IAAI,GAAG,SAAS,CAAC,CAAC,CAAC,cAAc,CAAC,CAAC,CAAC,WAAW,CAAC;IAEtD,MAAM,IAAI,GAAG;QACX,EAAE,EAAE,GAAG,MAAM,IAAI,IAAI,EAAE;QACvB,IAAI;QACJ,QAAQ,EAAE,KAAK;QACf,eAAe,EAAE,GAAG;QACpB,aAAa,EAAE,KAAK;QACpB,OAAO,EAAE,SAAS;QAClB,OAAO,EAAE,KAAK;QACd,UAAU,EAAE,EAAE,GAAG,EAAE,EAAE,EAAE;QACvB,KAAK,EAAE;YACL,IAAI,EAAE,GAAG,MAAM,IAAI,IAAI,EAAE;YACzB,MAAM,EAAE;gBACN,OAAO,EAAE,CAAC,cAAc,CAAC;aAC1B;SACF;KACF,CAAC;IAEF,OAAO,IAAI,CAAC;AACd,CAAC,CAAA,CACF,CAAC","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\nimport guid from 'utils/guid';\nimport { ActivitiesSlice } from '../../../../delivery/store/features/activities/slice';\nimport { createFeedback } from './createFeedback';\n\nexport const createCorrectRule = createAsyncThunk(\n  `${ActivitiesSlice}/createCorrectRule`,\n  async (payload: { ruleId?: string; isDefault?: boolean }) => {\n    const { ruleId = `r:${guid()}`, isDefault = false } = payload;\n\n    const rule = {\n      id: `${ruleId}.correct`,\n      name: 'correct',\n      disabled: false,\n      additionalScore: 0.0,\n      forceProgress: false,\n      default: isDefault,\n      correct: true,\n      conditions: { all: [] },\n      event: {\n        type: `${ruleId}.correct`,\n        params: {\n          actions: [\n            {\n              type: 'navigation',\n              params: { target: 'next' },\n            },\n          ],\n        },\n      },\n    };\n\n    return rule;\n  },\n);\n\nexport const createIncorrectRule = createAsyncThunk(\n  `${ActivitiesSlice}/createIncorrectRule`,\n  async (payload: { ruleId?: string; isDefault?: boolean }, { dispatch }) => {\n    const { ruleId = `r:${guid()}`, isDefault = false } = payload;\n\n    const { payload: feedbackAction } = await dispatch(createFeedback({}));\n\n    const name = isDefault ? 'defaultWrong' : 'incorrect';\n\n    const rule = {\n      id: `${ruleId}.${name}`,\n      name,\n      disabled: false,\n      additionalScore: 0.0,\n      forceProgress: false,\n      default: isDefault,\n      correct: false,\n      conditions: { all: [] },\n      event: {\n        type: `${ruleId}.${name}`,\n        params: {\n          actions: [feedbackAction],\n        },\n      },\n    };\n\n    return rule;\n  },\n);\n"]}