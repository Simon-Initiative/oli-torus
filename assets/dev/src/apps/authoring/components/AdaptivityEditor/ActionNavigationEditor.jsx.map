{"version":3,"file":"ActionNavigationEditor.jsx","sourceRoot":"","sources":["../../../../../../src/apps/authoring/components/AdaptivityEditor/ActionNavigationEditor.tsx"],"names":[],"mappings":"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","sourcesContent":["import { NavigationAction, NavigationActionParams } from 'apps/authoring/types';\nimport { findInSequence } from 'apps/delivery/store/features/groups/actions/sequence';\nimport { selectSequence } from 'apps/delivery/store/features/groups/selectors/deck';\nimport React, { useState, useEffect } from 'react';\nimport { OverlayTrigger, Tooltip } from 'react-bootstrap';\nimport { useSelector } from 'react-redux';\nimport guid from 'utils/guid';\nimport ConfirmDelete from '../Modal/DeleteConfirmationModal';\nimport ScreenDropdownTemplate from '../PropertyEditor/custom/ScreenDropdownTemplate';\n\ninterface ActionNavigationEditorProps {\n  action: NavigationAction;\n  allowDelete: boolean;\n  onChange: (changes: NavigationActionParams) => void;\n  onDelete: (changes: NavigationAction) => void;\n}\n\nconst ActionNavigationEditor: React.FC<ActionNavigationEditorProps> = (props) => {\n  const { action, allowDelete, onChange, onDelete } = props;\n  const sequence = useSelector(selectSequence);\n  const selectedSequence = findInSequence(sequence, action?.params?.target);\n  const [target, setTarget] = useState(selectedSequence?.custom.sequenceId || 'next');\n  const [showConfirmDelete, setShowConfirmDelete] = useState<boolean>(false);\n  const uuid = guid();\n\n  // When the 'Navigate to' Option is changed\n  useEffect(() => {\n    setTarget(selectedSequence?.custom.sequenceId || 'next');\n  }, [selectedSequence]);\n\n  const onChangeHandler = (sequenceId: string) => {\n    // console.log('onChange picker', sequenceId);\n    onChange({ target: sequenceId || 'next' });\n    setTarget(sequenceId || 'next');\n  };\n\n  return (\n    <div className=\"aa-action d-flex mb-2 form-inline align-items-center flex-nowrap\">\n      <label className=\"sr-only\" htmlFor={`action-navigation-${uuid}`}>\n        SequenceId\n      </label>\n      <div className=\"input-group input-group-sm flex-grow-1\">\n        <div className=\"input-group-prepend\">\n          <div className=\"input-group-text\">\n            <i className=\"fa fa-compass mr-1\" />\n            Navigate To\n          </div>\n        </div>\n        <ScreenDropdownTemplate\n          id={`action-navigation-${uuid}`}\n          label=\"\"\n          value={target}\n          onChange={onChangeHandler}\n          dropDownCSSClass=\"adaptivityDropdown form-control\"\n          buttonCSSClass=\"form-control-sm\"\n        />\n        {allowDelete && (\n          <OverlayTrigger\n            placement=\"top\"\n            delay={{ show: 150, hide: 150 }}\n            overlay={\n              <Tooltip id=\"button-tooltip\" style={{ fontSize: '12px' }}>\n                Delete Action\n              </Tooltip>\n            }\n          >\n            <span>\n              <button className=\"btn btn-link p-0 ml-1\" onClick={() => setShowConfirmDelete(true)}>\n                <i className=\"fa fa-trash-alt\" />\n              </button>\n            </span>\n          </OverlayTrigger>\n        )}\n      </div>\n      {showConfirmDelete && (\n        <ConfirmDelete\n          show={showConfirmDelete}\n          elementType=\"Action\"\n          elementName=\"this navigation action\"\n          deleteHandler={() => {\n            onDelete(action);\n            setShowConfirmDelete(false);\n          }}\n          cancelHandler={() => {\n            setShowConfirmDelete(false);\n          }}\n        />\n      )}\n    </div>\n  );\n};\n\nexport default ActionNavigationEditor;\n"]}