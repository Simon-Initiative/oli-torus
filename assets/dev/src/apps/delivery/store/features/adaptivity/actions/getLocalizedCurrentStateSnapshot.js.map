{"version":3,"file":"getLocalizedCurrentStateSnapshot.js","sourceRoot":"","sources":["../../../../../../../../src/apps/delivery/store/features/adaptivity/actions/getLocalizedCurrentStateSnapshot.ts"],"names":[],"mappings":";;;;;;;;;AAAA,OAAO,EAAE,gBAAgB,EAAE,MAAM,kBAAkB,CAAC;AACpD,OAAO,EAAE,yBAAyB,EAAE,MAAM,sBAAsB,CAAC;AAEjE,OAAO,EAAE,yBAAyB,EAAE,MAAM,6BAA6B,CAAC;AACxE,OAAO,EAAE,eAAe,EAAE,MAAM,UAAU,CAAC;AAE3C,MAAM,CAAC,MAAM,gCAAgC,GAAG,gBAAgB,CAC9D,GAAG,eAAe,mCAAmC,EACrD,CAAO,OAAO,EAAE,QAAQ,EAAE,EAAE;IAC1B,MAAM,mBAAmB,GAAG,yBAAyB,CAAC,QAAQ,CAAC,QAAQ,EAAe,CAAC,CAAC;IACxF,IAAI,CAAC,mBAAmB,EAAE;QACxB,OAAO,EAAE,QAAQ,EAAE,EAAE,EAAE,CAAC;KACzB;IACD,MAAM,kBAAkB,GAAG,mBAAmB,CAAC,GAAG,CAAC,CAAC,CAAC,EAAE,EAAE,CAAC,CAAC,CAAC,EAAE,CAAC,CAAC;IAChE,MAAM,QAAQ,GAAG,yBAAyB,CAAC,kBAAkB,CAAC,CAAC;IAC/D,OAAO,EAAE,QAAQ,EAAE,CAAC;AACtB,CAAC,CAAA,CACF,CAAC","sourcesContent":["import { createAsyncThunk } from '@reduxjs/toolkit';\nimport { getLocalizedStateSnapshot } from 'adaptivity/scripting';\nimport { RootState } from 'apps/delivery/store/rootReducer';\nimport { selectCurrentActivityTree } from '../../groups/selectors/deck';\nimport { AdaptivitySlice } from '../slice';\n\nexport const getLocalizedCurrentStateSnapshot = createAsyncThunk(\n  `${AdaptivitySlice}/getLocalizedCurrentStateSnapshot`,\n  async (payload, thunkAPI) => {\n    const currentActivityTree = selectCurrentActivityTree(thunkAPI.getState() as RootState);\n    if (!currentActivityTree) {\n      return { snapshot: {} };\n    }\n    const currentActivityIds = currentActivityTree.map((a) => a.id);\n    const snapshot = getLocalizedStateSnapshot(currentActivityIds);\n    return { snapshot };\n  },\n);\n"]}