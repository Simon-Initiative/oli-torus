{"version":3,"file":"LessonFinishedDialog.jsx","sourceRoot":"","sources":["../../../../../../src/apps/delivery/layouts/deck/LessonFinishedDialog.tsx"],"names":[],"mappings":"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","sourcesContent":["import React, { Fragment, useState } from 'react';\nimport { useSelector } from 'react-redux';\nimport { selectPreviewMode, selectResourceAttemptGuid } from '../../store/features/page/slice';\nimport { selectIsGraded } from 'apps/authoring/store/page/slice';\n\ninterface LessonFinishedDialogProps {\n  imageUrl?: string;\n  message: string;\n}\n\nconst LessonFinishedDialog: React.FC<LessonFinishedDialogProps> = ({\n  imageUrl,\n  message,\n}: {\n  imageUrl: string;\n  message: string;\n}) => {\n  const [isOpen, setIsOpen] = useState(true);\n  const isPreviewMode = useSelector(selectPreviewMode);\n  const resourceAttemptGuid = useSelector(selectResourceAttemptGuid);\n  const graded = useSelector(selectIsGraded);\n\n  const handleCloseModalClick = () => {\n    setIsOpen(false);\n    if (isPreviewMode) {\n      window.location.reload();\n    } else {\n      const currentUrl = window.location.href;\n      if (graded) {\n        window.location.href = `${currentUrl}/attempt/${resourceAttemptGuid}`;\n      } else {\n        const overviewURL = currentUrl.split('/page')[0];\n        window.location.href = overviewURL;\n      }\n    }\n  };\n\n  function HTMLMessage() {\n    return { __html: message };\n  }\n\n  return (\n    <Fragment>\n      <div\n        className=\"modal-backdrop in\"\n        style={{ display: isOpen ? 'block' : 'none', opacity: '0.5' }}\n      ></div>\n      <div\n        className=\"finishedDialog modal in\"\n        tabIndex={-1}\n        role=\"dialog\"\n        aria-labelledby=\"modalDialogContent\"\n        aria-hidden={!isOpen}\n        style={{\n          display: isOpen ? 'block' : 'none',\n          height: '350px',\n          width: '500px',\n          top: '20%',\n          backgroundImage: imageUrl ? `url('${imageUrl}')` : '',\n          left: '50%',\n        }}\n      >\n        <div className=\"modal-header\" style={{ border: 'none', marginBottom: '50px' }}>\n          <button\n            onClick={handleCloseModalClick}\n            type=\"button\"\n            className=\"close icon-clear\"\n            title=\"Close feedback window\"\n            aria-label=\"Close feedback window\"\n            data-dismiss=\"modal\"\n          />\n        </div>\n        <div\n          id=\"lessonFinishedDialogContent\"\n          className=\"modal-body\"\n          style={{ textAlign: 'center', marginTop: '110px', height: '190px' }}\n          dangerouslySetInnerHTML={HTMLMessage()}\n        ></div>\n      </div>\n    </Fragment>\n  );\n};\n\nexport default LessonFinishedDialog;\n"]}