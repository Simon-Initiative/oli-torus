{"version":3,"file":"listeners.js","sourceRoot":"","sources":["../../../../src/apps/page-editor/listeners.ts"],"names":[],"mappings":"AACA,OAAO,EAAE,SAAS,EAAE,MAAM,eAAe,CAAC;AAE1C,MAAM,UAAU,cAAc,CAAC,QAA6B;IAC1D,OAAO,MAAM,CAAC,gBAAgB,CAAC,cAAc,EAAE,CAAC,KAAK,EAAE,EAAE;QACvD,IAAI,SAAS,EAAE;YACb,UAAU,CAAC,GAAG,EAAE,CAAC,QAAQ,CAAC,OAAO,EAAE,CAAC,CAAC;SACtC;aAAM;YACL,QAAQ,CAAC,OAAO,EAAE,CAAC;SACpB;IACH,CAAC,CAAC,CAAC;AACL,CAAC;AAED,MAAM,UAAU,gBAAgB,CAAC,QAAa;IAC5C,MAAM,CAAC,mBAAmB,CAAC,cAAc,EAAE,QAAQ,CAAC,CAAC;AACvD,CAAC;AAED,MAAM,UAAU,iBAAiB,CAAC,QAAa;IAC7C,MAAM,CAAC,mBAAmB,CAAC,SAAS,EAAE,QAAQ,CAAC,CAAC;AAClD,CAAC;AAED,MAAM,UAAU,eAAe,CAAC,QAAa;IAC3C,MAAM,CAAC,mBAAmB,CAAC,OAAO,EAAE,QAAQ,CAAC,CAAC;AAChD,CAAC;AAED,MAAM,UAAU,oBAAoB,CAAC,QAAa;IAChD,MAAM,CAAC,mBAAmB,CAAC,MAAM,EAAE,QAAQ,CAAC,CAAC;AAC/C,CAAC","sourcesContent":["import { PersistenceStrategy } from 'data/persistence/PersistenceStrategy';\nimport { isFirefox } from 'utils/browser';\n\nexport function registerUnload(strategy: PersistenceStrategy) {\n  return window.addEventListener('beforeunload', (event) => {\n    if (isFirefox) {\n      setTimeout(() => strategy.destroy());\n    } else {\n      strategy.destroy();\n    }\n  });\n}\n\nexport function unregisterUnload(listener: any) {\n  window.removeEventListener('beforeunload', listener);\n}\n\nexport function unregisterKeydown(listener: any) {\n  window.removeEventListener('keydown', listener);\n}\n\nexport function unregisterKeyup(listener: any) {\n  window.removeEventListener('keyup', listener);\n}\n\nexport function unregisterWindowBlur(listener: any) {\n  window.removeEventListener('blur', listener);\n}\n"]}