{"version":3,"file":"package_delete.js","sourceRoot":"","sources":["../../../src/phoenix/package_delete.ts"],"names":[],"mappings":"AAAA,+FAA+F;AAC/F,iFAAiF;AACjF,gGAAgG;AAChG,0GAA0G;AAC1G,EAAE;AACF,wDAAwD;AACxD,MAAM,UAAU,4BAA4B,CAC1C,aAAqB,EACrB,cAAsB,EACtB,YAAoB;IAEpB,MAAM,gBAAgB,GAAG,QAAQ,CAAC,aAAa,CAAC,aAAa,CAAC,CAAC;IAC/D,IAAI,gBAAgB,EAAE;QACpB,gBAAgB,CAAC,gBAAgB,CAAC,OAAO,EAAE,UAAU,CAAM;YACzD,MAAM,KAAK,GAAG,CAAC,CAAC,MAAM,CAAC,KAAK,CAAC;YAC7B,MAAM,kBAAkB,GAA4B,QAAQ,CAAC,aAAa,CAAC,cAAc,CAAC,CAAC;YAC3F,IAAI,kBAAkB,KAAK,IAAI,EAAE;gBAC/B,sEAAsE;gBACtE,IAAI,IAAI,CAAC,KAAK,CAAC,KAAK,YAAY,EAAE;oBAChC,kBAAkB,CAAC,QAAQ,GAAG,KAAK,CAAC;iBACrC;qBAAM;oBACL,kBAAkB,CAAC,QAAQ,GAAG,IAAI,CAAC;iBACpC;aACF;QACH,CAAC,CAAC,CAAC;KACJ;AACH,CAAC","sourcesContent":["// Listens for user input in the text input identified by 'inputSelector', and keeps the submit\n// button identified by 'submitSelector' disabled until the user's base 64 encode\n// input matches the text of 'encodedTitle'.  Comparison of base 64 encodings instead of the raw\n// strings is a robust way to circumvent a confusting array of server/client encoding/decoding challenges.\n//\n// This is used during confirmation of package deletion.\nexport function enableSubmitWhenTitleMatches(\n  inputSelector: string,\n  submitSelector: string,\n  encodedTitle: string,\n): void {\n  const deleteTitleInput = document.querySelector(inputSelector);\n  if (deleteTitleInput) {\n    deleteTitleInput.addEventListener('input', function (e: any) {\n      const value = e.target.value;\n      const deleteSubmitButton: HTMLInputElement | null = document.querySelector(submitSelector);\n      if (deleteSubmitButton !== null) {\n        // Base 64 encode the user's input and compare it to the encoded title\n        if (btoa(value) === encodedTitle) {\n          deleteSubmitButton.disabled = false;\n        } else {\n          deleteSubmitButton.disabled = true;\n        }\n      }\n    });\n  }\n}\n"]}