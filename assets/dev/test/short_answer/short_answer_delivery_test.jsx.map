{"version":3,"file":"short_answer_delivery_test.jsx","sourceRoot":"","sources":["../../../test/short_answer/short_answer_delivery_test.tsx"],"names":[],"mappings":"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","sourcesContent":["import { render, fireEvent, screen } from '@testing-library/react';\nimport React from 'react';\nimport { defaultDeliveryElementProps } from '../utils/activity_mocks';\nimport { act } from 'react-dom/test-utils';\nimport '@testing-library/jest-dom';\nimport { defaultModel } from 'components/activities/short_answer/utils';\nimport { ShortAnswerComponent } from 'components/activities/short_answer/ShortAnswerDelivery';\nimport { makeHint } from 'components/activities/types';\nimport { configureStore } from 'state/store';\nimport { activityDeliverySlice } from 'data/activities/DeliveryState';\nimport { Provider } from 'react-redux';\nimport { DeliveryElementProvider } from 'components/activities/DeliveryElement';\nimport { defaultActivityState } from 'data/activities/utils';\n\ndescribe('multiple choice delivery', () => {\n  it('renders ungraded activities correctly', async () => {\n    const model = defaultModel();\n    model.authoring.parts[0].hints.push(makeHint('Hint 1'));\n    const props = {\n      model,\n      activitySlug: 'activity-slug',\n      state: Object.assign(defaultActivityState(model), { hasMoreHints: false }),\n      graded: false,\n      preview: false,\n    };\n    const { onSaveActivity, onSubmitActivity } = defaultDeliveryElementProps;\n    const store = configureStore({}, activityDeliverySlice.reducer);\n\n    render(\n      <Provider store={store}>\n        <DeliveryElementProvider {...defaultDeliveryElementProps} {...props}>\n          <ShortAnswerComponent />\n        </DeliveryElementProvider>\n      </Provider>,\n    );\n\n    // expect no hints displayed\n    expect(screen.queryAllByLabelText(/hint [0-9]/)).toHaveLength(0);\n\n    // expect hints button\n    const requestHintButton = screen.getByLabelText('request hint');\n    expect(requestHintButton).toBeTruthy();\n\n    // expect clicking request hint to display a hint\n    act(() => {\n      fireEvent.click(requestHintButton);\n    });\n    expect(await screen.findAllByLabelText(/hint [0-9]/)).toHaveLength(1);\n\n    // enter an input, expect it to save\n    act(() => {\n      fireEvent.change(screen.getByLabelText('answer submission textbox'), {\n        target: { value: 'answer' },\n      });\n    });\n\n    expect(onSaveActivity).toHaveBeenCalledTimes(1);\n\n    // expect a submit button\n    const submitButton = screen.getByLabelText('submit');\n    expect(submitButton).toBeTruthy();\n\n    // submit and expect a submission\n    act(() => {\n      fireEvent.click(submitButton);\n    });\n\n    expect(onSubmitActivity).toHaveBeenCalledTimes(1);\n    expect(onSubmitActivity).toHaveBeenCalledWith(props.state.attemptGuid, [\n      {\n        attemptGuid: '1',\n        response: { input: 'answer' },\n      },\n    ]);\n\n    // expect results to be displayed after submission\n    expect(await screen.findAllByLabelText('result')).toHaveLength(1);\n    expect(screen.getByLabelText('score')).toHaveTextContent('1');\n    expect(screen.getByLabelText('out of')).toHaveTextContent('1');\n  });\n});\n"]}