{"version":3,"file":"cata_authoring_test.js","sourceRoot":"","sources":["../../../test/check_all_that_apply/cata_authoring_test.ts"],"names":[],"mappings":"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","sourcesContent":["import { CATAActions } from 'components/activities/check_all_that_apply/actions';\nimport { defaultCATAModel } from 'components/activities/check_all_that_apply/utils';\nimport { ResponseActions } from 'components/activities/common/responses/responseActions';\nimport { DEFAULT_PART_ID } from 'components/activities/common/utils';\nimport { makeChoice } from 'components/activities/types';\nimport { Hints } from 'data/activities/model/hints';\nimport {\n  getChoiceIds,\n  getCorrectResponse,\n  getIncorrectResponse,\n  getResponseId,\n  getResponses,\n  getTargetedResponses,\n} from 'data/activities/model/responses';\nimport { dispatch } from 'utils/test_utils';\n\nconst testDefaultModel = defaultCATAModel;\n\ndescribe('check all that apply question functionality', () => {\n  const model = testDefaultModel();\n\n  it('has a stem', () => {\n    expect(model).toHaveProperty('stem');\n  });\n\n  it('has at least one choice', () => {\n    expect(model).toHaveProperty('choices');\n    expect(model.choices.length).toBeGreaterThan(0);\n  });\n\n  it('can add a choice', () => {\n    const withChoiceAdded = dispatch(model, CATAActions.addChoice(makeChoice('')));\n    expect(withChoiceAdded.choices.length).toBeGreaterThan(model.choices.length);\n    expect(getChoiceIds(withChoiceAdded.authoring.correct)).toHaveLength(1);\n  });\n\n  it('can toggle choice correctness', () => {\n    // First choice is correct\n    const firstChoice = model.choices[0];\n    const modelWithFirstChoiceToggled = dispatch(\n      model,\n      CATAActions.toggleChoiceCorrectness(firstChoice.id),\n    );\n    expect(getChoiceIds(modelWithFirstChoiceToggled.authoring.correct)).not.toContain(\n      firstChoice.id,\n    );\n  });\n\n  it('can remove a choice', () => {\n    const firstChoice = model.choices[0];\n    const newModel = dispatch(model, CATAActions.removeChoiceAndUpdateRules(firstChoice.id));\n    expect(newModel.choices).toHaveLength(1);\n    expect(getChoiceIds(newModel.authoring.correct)).not.toContain(firstChoice);\n  });\n\n  it('can remove a choice from targeted catas', () => {\n    const firstChoice = model.choices[0];\n    const newModel = dispatch(model, CATAActions.removeChoiceAndUpdateRules(firstChoice.id));\n    newModel.authoring.targeted.forEach((assoc) =>\n      expect(getChoiceIds(assoc)).not.toContain(firstChoice.id),\n    );\n  });\n\n  it('has one correct response', () => {\n    expect(getCorrectResponse(model, DEFAULT_PART_ID)).toBeTruthy();\n  });\n\n  it('has one incorrect response', () => {\n    expect(getIncorrectResponse(model, DEFAULT_PART_ID)).toBeTruthy();\n  });\n\n  it('can add a targeted feedback', () => {\n    const withNewResponse = dispatch(model, CATAActions.addTargetedFeedback());\n    expect(getResponses(withNewResponse).length).toBeGreaterThan(getResponses(model).length);\n    expect(withNewResponse.authoring.targeted.length).toBe(1);\n    expect(getChoiceIds(withNewResponse.authoring.targeted[0])).toHaveLength(0);\n  });\n\n  it('can remove a targeted feedback', () => {\n    const withNewResponse = dispatch(model, CATAActions.addTargetedFeedback());\n    const removed = dispatch(\n      withNewResponse,\n      ResponseActions.removeTargetedFeedback(getResponseId(withNewResponse.authoring.targeted[0])),\n    );\n    expect(getResponses(removed)).toHaveLength(2);\n    expect(getTargetedResponses(removed)).toHaveLength(0);\n  });\n\n  it('has at least 3 hints', () => {\n    expect(Hints.byPart(model, DEFAULT_PART_ID).length).toBeGreaterThanOrEqual(3);\n  });\n});\n"]}