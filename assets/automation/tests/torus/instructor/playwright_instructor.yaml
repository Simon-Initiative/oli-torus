# Scenario for instructor invite/enrollment flow.
# Parameters:
#   RUN_ID - optional suffix to make user emails unique.

- user:
    name: "playwright_author"
    type: "author"
    email: "author${RUN_ID}@example.com"
    given_name: "Playwright"
    family_name: "Author"
    password: "changeme123456"

- user:
    name: "playwright_instructor"
    type: "instructor"
    email: "instructor${RUN_ID}@example.com"
    given_name: "Playwright"
    family_name: "Instructor"
    password: "changeme123456"
    can_create_sections: true

- user:
    name: "playwright_student"
    type: "student"
    email: "student${RUN_ID}@example.com"
    given_name: "Jane"
    family_name: "Student"
    password: "changeme123456"

- user:
    name: "playwright_admin"
    type: "author"
    system_role: "system_admin"
    email: "admin${RUN_ID}@example.com"
    given_name: "Playwright"
    family_name: "Admin"
    password: "changeme123456"

- project:
    name: "Instructor Course${RUN_ID}"
    title: "Instructor Course${RUN_ID}"
    visibility: global
    root:
      children:
        - page: "Intro"

- publish:
    to: "Instructor Course${RUN_ID}"

- section:
    name: "Instructor Course${RUN_ID}"
    title: "Instructor Course${RUN_ID}"
    from: "Instructor Course${RUN_ID}"
    open_and_free: true

- enroll:
    user: "playwright_instructor"
    email: "instructor${RUN_ID}@example.com"
    section: "Instructor Course${RUN_ID}"
    role: instructor

- enroll:
    user: "playwright_student"
    email: "student${RUN_ID}@example.com"
    section: "Instructor Course${RUN_ID}"
    role: student
