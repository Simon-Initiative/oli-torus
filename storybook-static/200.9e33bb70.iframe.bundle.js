/*! For license information please see 200.9e33bb70.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkoli=self.webpackChunkoli||[]).push([[200],{"./src/apps/authoring/components/Flowchart/chart-components/ScreenButton.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{c:()=>ScreenButton});__webpack_require__("./node_modules/react/index.js");var react_bootstrap__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./node_modules/react-bootstrap/esm/OverlayTrigger.js"),react_bootstrap__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react-bootstrap/esm/Tooltip.js"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),ScreenButton=function ScreenButton(_ref){var children=_ref.children,onClick=_ref.onClick,tooltip=_ref.tooltip;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_bootstrap__WEBPACK_IMPORTED_MODULE_2__.Z,{placement:"top",delay:{show:150,hide:150},overlay:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)(react_bootstrap__WEBPACK_IMPORTED_MODULE_3__.Z,{id:"button-tooltip",style:{fontSize:"12px"},children:tooltip}),children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("button",{className:"screen-button",onClick,children})})};ScreenButton.displayName="ScreenButton";try{ScreenButton.displayName="ScreenButton",ScreenButton.__docgenInfo={description:"",displayName:"ScreenButton",props:{onClick:{defaultValue:null,description:"",name:"onClick",required:!1,type:{name:"(() => void)"}},tooltip:{defaultValue:null,description:"",name:"tooltip",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/chart-components/ScreenButton.tsx#ScreenButton"]={docgenInfo:ScreenButton.__docgenInfo,name:"ScreenButton",path:"src/apps/authoring/components/Flowchart/chart-components/ScreenButton.tsx#ScreenButton"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/chart-components/ScreenIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{p:()=>ScreenIcon});__webpack_require__("./node_modules/react/index.js");var _screen_icons_WelcomeScreenIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/WelcomeScreenIcon.tsx"),_screen_icons_screen_icons__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/screen-icons.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js"),ScreenIcon=function ScreenIcon(_ref){var screenType=_ref.screenType,bgColor=_ref.bgColor,Icon=_screen_icons_screen_icons__WEBPACK_IMPORTED_MODULE_2__._F[screenType||"blank_screen"]||_screen_icons_WelcomeScreenIcon__WEBPACK_IMPORTED_MODULE_1__.j;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(Icon,{fill:bgColor})};ScreenIcon.displayName="ScreenIcon";try{ScreenIcon.displayName="ScreenIcon",ScreenIcon.__docgenInfo={description:"",displayName:"ScreenIcon",props:{screenType:{defaultValue:null,description:"",name:"screenType",required:!1,type:{name:"string"}},bgColor:{defaultValue:null,description:"",name:"bgColor",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/chart-components/ScreenIcon.tsx#ScreenIcon"]={docgenInfo:ScreenIcon.__docgenInfo,name:"ScreenIcon",path:"src/apps/authoring/components/Flowchart/chart-components/ScreenIcon.tsx#ScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/chart-components/ScreenNode.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{K:()=>ScreenNodeBody});var react=__webpack_require__("./node_modules/react/index.js"),useDrop=__webpack_require__("./node_modules/react-dnd/dist/esm/hooks/useDrop/useDrop.mjs"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),useToggle=__webpack_require__("./src/components/hooks/useToggle.ts"),slice=__webpack_require__("./src/apps/delivery/store/features/activities/slice.ts"),deck=__webpack_require__("./src/apps/delivery/store/features/groups/selectors/deck.ts"),DeleteConfirmationModal=__webpack_require__("./src/apps/authoring/components/Modal/DeleteConfirmationModal.tsx"),FlowchartEventContext=react.createContext({onAddScreen:function onAddScreen(){},onDeleteScreen:function onDeleteScreen(){},onSelectScreen:function onSelectScreen(){},onEditScreen:function onEditScreen(){}}),redux_toolkit_esm=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),persistence_activity=__webpack_require__("./src/data/persistence/activity.ts"),common=__webpack_require__("./src/utils/common.ts"),guid=__webpack_require__("./src/utils/guid.ts"),groups_slice=__webpack_require__("./src/apps/delivery/store/features/groups/slice.ts"),saveActivity=__webpack_require__("./src/apps/authoring/store/activities/actions/saveActivity.ts"),templates_activity=__webpack_require__("./src/apps/authoring/store/activities/templates/activity.ts"),app_slice=__webpack_require__("./src/apps/authoring/store/app/slice.ts"),flowchart_slice=__webpack_require__("./src/apps/authoring/store/flowchart/flowchart-slice.ts"),flowchart_name=__webpack_require__("./src/apps/authoring/store/flowchart/name.ts"),addSequenceItem=__webpack_require__("./src/apps/authoring/store/groups/layouts/deck/actions/addSequenceItem.ts"),setCurrentActivityFromSequence=__webpack_require__("./src/apps/authoring/store/groups/layouts/deck/actions/setCurrentActivityFromSequence.ts"),savePage=__webpack_require__("./src/apps/authoring/store/page/actions/savePage.ts"),path_factories=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-factories.ts"),path_utils=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-utils.ts"),create_generic_rule=__webpack_require__("./src/apps/authoring/components/Flowchart/rules/create-generic-rule.ts"),screen_utils=__webpack_require__("./src/apps/authoring/components/Flowchart/screens/screen-utils.ts"),replaceIds=function replaceIds(idMap){return function(originalPart){var part=(0,common.d9)(originalPart);if(part.children&&(part.children=part.children.map(replaceIds(idMap))),idMap[part.id])return part.id=idMap[part.id],part;var newId=part.id+(0,guid.Z)();return idMap[part.id]=newId,part.id=newId,part}};function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var duplicateFlowchartScreen=(0,redux_toolkit_esm.hg)("".concat(flowchart_name.D,"/duplicateFlowchartScreen"),function(){var _ref2=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(payload,_ref){var dispatch,getState,rootState,projectSlug,activityTypes,sequence,otherActivities,otherActivityNames,group,originalScreen,_originalScreen$title,_originalScreen$autho,_originalScreen$autho2,_originalScreen$conte,_originalScreen$conte2,_originalScreen$autho3,_originalScreen$autho4,_originalScreen$autho5,_originalScreen$autho6,targetTitle,title,activity,idMap,newParts,newPartsLayout,createResults,fromScreenId,fromScreen,sequenceEntry,reduxActivity;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(dispatch=_ref.dispatch,getState=_ref.getState,rootState=getState(),"flowchart"===(0,app_slice.Xi)(rootState)){_context.next=5;break}throw new Error("addFlowchartScreen can only be called when appMode is flowchart");case 5:if(projectSlug=(0,app_slice.LJ)(rootState),activityTypes=(0,app_slice.pR)(rootState),sequence=(0,deck.nu)(rootState),otherActivities=(0,slice.N3)(rootState),otherActivityNames=otherActivities.map((function(a){return a.title||""})),group=(0,groups_slice.pY)(rootState)[0],originalScreen=(0,slice.ho)(rootState,payload.screenId),_context.prev=12,originalScreen){_context.next=16;break}return console.warn("Could not find screen to duplicate"),_context.abrupt("return");case 16:return targetTitle=null!==(_originalScreen$title=originalScreen.title)&&void 0!==_originalScreen$title&&_originalScreen$title.startsWith("Copy of ")?originalScreen.title||"screen":"Copy of "+(originalScreen.title||"screen"),title=clearTitle(targetTitle,otherActivityNames),activity=(0,templates_activity.L)(),idMap={},newParts=(null===(_originalScreen$autho=originalScreen.authoring)||void 0===_originalScreen$autho||null===(_originalScreen$autho2=_originalScreen$autho.parts)||void 0===_originalScreen$autho2?void 0:_originalScreen$autho2.map(replaceIds(idMap)))||[],newPartsLayout=(null===(_originalScreen$conte=originalScreen.content)||void 0===_originalScreen$conte||null===(_originalScreen$conte2=_originalScreen$conte.partsLayout)||void 0===_originalScreen$conte2?void 0:_originalScreen$conte2.map(replaceIds(idMap)))||[],activity.model.partsLayout=newPartsLayout,activity.model.authoring.parts=newParts,activity.model.authoring.flowchart={paths:[(0,path_factories.Q8)()],screenType:null===(_originalScreen$autho3=originalScreen.authoring)||void 0===_originalScreen$autho3||null===(_originalScreen$autho4=_originalScreen$autho3.flowchart)||void 0===_originalScreen$autho4?void 0:_originalScreen$autho4.screenType,templateApplied:null===(_originalScreen$autho5=originalScreen.authoring)||void 0===_originalScreen$autho5||null===(_originalScreen$autho6=_originalScreen$autho5.flowchart)||void 0===_originalScreen$autho6?void 0:_originalScreen$autho6.templateApplied},activity.title=title,_context.next=28,(0,persistence_activity.Ue)(projectSlug,activity.typeSlug,activity.model,activity.objectives.attached);case 28:if("failure"!==(createResults=_context.sent).result){_context.next=31;break}throw new Error("Failed to create destination activity");case 31:if(!(fromScreenId=function getLastScreenId(){var firstScreen=(0,screen_utils.gf)(otherActivities,sequence),orderedScreens=(0,screen_utils.C_)(otherActivities,firstScreen).filter((function(s){var _s$authoring,_s$authoring$flowchar;return"end_screen"!==(null===(_s$authoring=s.authoring)||void 0===_s$authoring||null===(_s$authoring$flowchar=_s$authoring.flowchart)||void 0===_s$authoring$flowchar?void 0:_s$authoring$flowchar.screenType)}));if(0!==orderedScreens.length)return orderedScreens[orderedScreens.length-1].resourceId}())){_context.next=40;break}if(!(fromScreen=(0,common.Cw)((0,slice.ho)(rootState,fromScreenId)))){_context.next=40;break}return(0,path_utils.NA)(fromScreen)?(0,path_utils.YY)(fromScreen,createResults.resourceId):(0,path_utils._M)(fromScreen,createResults.resourceId),dispatch((0,saveActivity.d)({activity:fromScreen,undoable:!1,immediate:!0})),_context.next=40,dispatch((0,slice.Xx)({activity:fromScreen}));case 40:return activity.activity_id=createResults.resourceId,activity.activityId=activity.activity_id,activity.resourceId=activity.activity_id,activity.activitySlug=createResults.revisionSlug,activity.activityType=activityTypes.find((function(type){return type.slug===activity.typeSlug})),sequenceEntry={type:"activity-reference",resourceId:activity.resourceId,activitySlug:activity.activitySlug,custom:{isLayer:!1,isBank:!1,layerRef:null,sequenceId:"".concat(activity.activitySlug,"_").concat((0,guid.Z)()),sequenceName:title}},reduxActivity={id:activity.resourceId,resourceId:activity.resourceId,activitySlug:activity.activitySlug,activityType:activity.activityType,content:_objectSpread(_objectSpread({},activity.model),{},{authoring:void 0}),authoring:activity.model.authoring,title,tags:[]},dispatch((0,saveActivity.d)({activity:reduxActivity,undoable:!1,immediate:!0})),_context.next=50,dispatch((0,slice.Xx)({activity:reduxActivity}));case 50:return _context.next=52,dispatch((0,addSequenceItem.m)({siblingId:(0,create_generic_rule.SQ)(fromScreenId,sequence),sequence,item:sequenceEntry,group}));case 52:return dispatch((0,setCurrentActivityFromSequence.P)(sequenceEntry.custom.sequenceId)),_context.next=55,dispatch((0,savePage.J)({undoable:!1}));case 55:return _context.abrupt("return",activity);case 58:throw _context.prev=58,_context.t0=_context.catch(12),dispatch((0,flowchart_slice.Hr)({error:JSON.stringify(_context.t0,Object.getOwnPropertyNames(_context.t0),2),title:"Could not duplicate screen",message:"Something went wrong when attempting to duplicate this screen. Please try again.",failedActivity:originalScreen,info:null})),_context.t0;case 62:case"end":return _context.stop()}}),_callee,null,[[12,58]])})));return function(_x,_x2){return _ref2.apply(this,arguments)}}()),doubleNumbers=/^(.*) \(\d+\)\s\((\d+)\)$/,clearTitle=function clearTitle(title,otherActivityNames){var level=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,newTitle=0===level?title:"".concat(title," (").concat(level,")"),match=doubleNumbers.exec(newTitle);return match&&(newTitle=match[1]+" (".concat(level,")")),otherActivityNames.includes(newTitle)?clearTitle(title,otherActivityNames,level+1):newTitle},screen_icons=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/screen-icons.tsx");var screenTypes=["blank_screen","welcome_screen","multiple_choice","multiline_text","slider","hub_and","end_screen","number_input","text_input","dropdown"],screen_validation=__webpack_require__("./src/apps/authoring/components/Flowchart/screens/screen-validation.tsx"),ScreenButton=__webpack_require__("./src/apps/authoring/components/Flowchart/chart-components/ScreenButton.tsx"),ScreenDeleteIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/chart-components/ScreenDeleteIcon.tsx"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),ScreenDuplicateIcon=function ScreenDuplicateIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#F3F5F8":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,jsx_runtime.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,jsx_runtime.jsx)("rect",{width:24,height:24,rx:3,fill}),(0,jsx_runtime.jsx)("path",{d:"M7.2 10.2h5.4a1.2 1.2 0 011.2 1.2v5.4a1.2 1.2 0 01-1.2 1.2H7.2A1.2 1.2 0 016 16.8v-5.4a1.2 1.2 0 011.2-1.2z",stroke,strokeLinecap:"round",strokeLinejoin:"round"}),(0,jsx_runtime.jsx)("path",{d:"M16.2 13.8h.6a1.2 1.2 0 001.2-1.2V7.2A1.2 1.2 0 0016.8 6h-5.4a1.2 1.2 0 00-1.2 1.2v.6",stroke,strokeLinecap:"round",strokeLinejoin:"round"})]})};ScreenDuplicateIcon.displayName="ScreenDuplicateIcon";try{ScreenDuplicateIcon.displayName="ScreenDuplicateIcon",ScreenDuplicateIcon.__docgenInfo={description:"",displayName:"ScreenDuplicateIcon",props:{fill:{defaultValue:{value:"#F3F5F8"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/chart-components/ScreenDuplicateIcon.tsx#ScreenDuplicateIcon"]={docgenInfo:ScreenDuplicateIcon.__docgenInfo,name:"ScreenDuplicateIcon",path:"src/apps/authoring/components/Flowchart/chart-components/ScreenDuplicateIcon.tsx#ScreenDuplicateIcon"})}catch(__react_docgen_typescript_loader_error){}var ScreenEditIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/chart-components/ScreenEditIcon.tsx"),ScreenIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/chart-components/ScreenIcon.tsx");function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ScreenNode=function ScreenNode(_ref){var data=_ref.data;return _jsxs(_Fragment,{children:[_jsx(Handle,{type:"target",position:Position.Left,style:{display:"none"}}),_jsx(ScreenNodeBody,{data}),_jsx(Handle,{type:"source",position:Position.Right,id:"a",style:{display:"none"}})]})},ScreenNodeBody=function ScreenNodeBody(_ref2){var _activities$find,_activities$find$auth,_activities$find$auth2,_activities$find2,_activities$find2$aut,_activities$find2$aut2,_data$authoring,_data$authoring$flowc,data=_ref2.data,_useContext=(0,react.useContext)(FlowchartEventContext),onAddScreen=_useContext.onAddScreen,onDeleteScreen=_useContext.onDeleteScreen,onSelectScreen=_useContext.onSelectScreen,onEditScreen=_useContext.onEditScreen,dispatch=(0,es.I0)(),selected=(0,es.v9)(slice.zT)===data.resourceId,_useToggle2=_slicedToArray((0,useToggle.O)(!1),2),showConfirmDelete=_useToggle2[0],toggleConfirmDelete=_useToggle2[1],activities=(0,es.v9)(slice.N3),sequence=(0,es.v9)(deck.nu),isValid=0===(0,screen_validation.vj)(data,activities,sequence).length,isEndScreen="end_screen"===(null===(_activities$find=activities.find((function(s){return s.resourceId===data.resourceId})))||void 0===_activities$find||null===(_activities$find$auth=_activities$find.authoring)||void 0===_activities$find$auth||null===(_activities$find$auth2=_activities$find$auth.flowchart)||void 0===_activities$find$auth2?void 0:_activities$find$auth2.screenType),isWelcomeScreen="welcome_screen"===(null===(_activities$find2=activities.find((function(s){return s.resourceId===data.resourceId})))||void 0===_activities$find2||null===(_activities$find2$aut=_activities$find2.authoring)||void 0===_activities$find2$aut||null===(_activities$find2$aut2=_activities$find2$aut.flowchart)||void 0===_activities$find2$aut2?void 0:_activities$find2$aut2.screenType),isRequiredScreen=isEndScreen||isWelcomeScreen,onDrop=function onDrop(item){isEndScreen?console.warn("Can't add a screen after the end screen"):onAddScreen({prevNodeId:data.resourceId,screenType:item.screenType})},onDuplicateScreen=(0,react.useCallback)((function(){data.resourceId&&dispatch(duplicateFlowchartScreen({screenId:data.resourceId}))}),[data.resourceId,dispatch]),_useDrop2=_slicedToArray((0,useDrop.L)((function(){return{accept:screenTypes,canDrop:function canDrop(){return!isEndScreen},drop:onDrop,collect:function collect(monitor){return{isOver:monitor.isOver(),canDrop:monitor.canDrop()}}}})),2),_useDrop2$=_useDrop2[0],canDrop=_useDrop2$.canDrop,isOver=_useDrop2$.isOver,drop=_useDrop2[1],hover=isOver&&canDrop,classNames=["node-box"];selected&&classNames.push("node-selected"),hover&&classNames.push("drop-over");var iconBG=isValid?screen_icons.Bw.VALIDATED:screen_icons.Bw.NOT_VALIDATED;return(0,jsx_runtime.jsxs)("div",{className:"flowchart-node",children:[(0,jsx_runtime.jsxs)("div",{className:"title-bar",children:[(0,jsx_runtime.jsx)("div",{className:"title-icon",children:(0,jsx_runtime.jsx)(ScreenIcon.p,{screenType:null===(_data$authoring=data.authoring)||void 0===_data$authoring||null===(_data$authoring$flowc=_data$authoring.flowchart)||void 0===_data$authoring$flowc?void 0:_data$authoring$flowc.screenType,bgColor:iconBG})}),(0,jsx_runtime.jsx)("div",{className:"title-text",title:data.title,children:data.title})]}),(0,jsx_runtime.jsx)("div",{className:classNames.join(" "),onClick:function onClick(){return onSelectScreen(data.resourceId)},ref:drop,children:(0,jsx_runtime.jsxs)("div",{className:"button-bar",children:[isWelcomeScreen&&(0,jsx_runtime.jsx)("span",{className:"start-end-label",children:"Start"}),isEndScreen&&(0,jsx_runtime.jsx)("span",{className:"start-end-label",children:"End"}),selected&&(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ScreenButton.c,{tooltip:"Edit Screen",onClick:function onClick(){return onEditScreen(data.resourceId)},children:(0,jsx_runtime.jsx)(ScreenEditIcon.s,{})}),isRequiredScreen||(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(ScreenButton.c,{tooltip:"Duplicate Screen",onClick:onDuplicateScreen,children:(0,jsx_runtime.jsx)(ScreenDuplicateIcon,{})}),(0,jsx_runtime.jsx)(ScreenButton.c,{tooltip:"Delete Screen",onClick:toggleConfirmDelete,children:(0,jsx_runtime.jsx)(ScreenDeleteIcon.q,{})})]})]})]})}),isValid||(0,jsx_runtime.jsx)("small",{className:"text-gray-400",children:"This screen is not validated."}),showConfirmDelete&&(0,jsx_runtime.jsx)(DeleteConfirmationModal.Z,{show:showConfirmDelete,elementType:"screen",title:"Are you sure you want to delete this screen?",explanation:"Please note, you will permanently lose all content on this screen, and you will unable to undo this action. Consider creating a duplicate of your screen before proceeding.",deleteHandler:function deleteHandler(){onDeleteScreen(data.resourceId),toggleConfirmDelete()},cancelHandler:toggleConfirmDelete})]})};ScreenNodeBody.displayName="ScreenNodeBody";try{ScreenNode.displayName="ScreenNode",ScreenNode.__docgenInfo={description:"",displayName:"ScreenNode",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"IActivity"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/chart-components/ScreenNode.tsx#ScreenNode"]={docgenInfo:ScreenNode.__docgenInfo,name:"ScreenNode",path:"src/apps/authoring/components/Flowchart/chart-components/ScreenNode.tsx#ScreenNode"})}catch(__react_docgen_typescript_loader_error){}try{ScreenNodeBody.displayName="ScreenNodeBody",ScreenNodeBody.__docgenInfo={description:"",displayName:"ScreenNodeBody",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"IActivity"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/chart-components/ScreenNode.tsx#ScreenNodeBody"]={docgenInfo:ScreenNodeBody.__docgenInfo,name:"ScreenNodeBody",path:"src/apps/authoring/components/Flowchart/chart-components/ScreenNode.tsx#ScreenNodeBody"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/flowchart-actions/add-path.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Q:()=>addPath});var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),_utils_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/common.ts"),_delivery_store_features_activities_slice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/apps/delivery/store/features/activities/slice.ts"),_store_activities_actions_saveActivity__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/apps/authoring/store/activities/actions/saveActivity.ts"),_store_flowchart_flowchart_slice__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/apps/authoring/store/flowchart/flowchart-slice.ts"),_store_flowchart_name__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/apps/authoring/store/flowchart/name.ts"),_paths_path_factories__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-factories.ts");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var addPath=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_5__.hg)("".concat(_store_flowchart_name__WEBPACK_IMPORTED_MODULE_6__.D,"/addPath"),function(){var _ref2=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(payload,_ref){var dispatch,getState,screenId,rootState,screen,_screen$authoring,_screen$authoring2,_screen$authoring2$fl,paths,newPath,id,newPaths;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(dispatch=_ref.dispatch,getState=_ref.getState,screenId=payload.screenId,rootState=getState(),screen=(0,_utils_common__WEBPACK_IMPORTED_MODULE_0__.Cw)((0,_delivery_store_features_activities_slice__WEBPACK_IMPORTED_MODULE_1__.ho)(rootState,screenId)),_context.prev=4,screen){_context.next=7;break}return _context.abrupt("return",null);case 7:if(null!==(_screen$authoring=screen.authoring)&&void 0!==_screen$authoring&&_screen$authoring.flowchart||(screen.authoring=screen.authoring||{},screen.authoring.flowchart={templateApplied:!1,screenType:"blank_screen",paths:[]}),paths=null===(_screen$authoring2=screen.authoring)||void 0===_screen$authoring2||null===(_screen$authoring2$fl=_screen$authoring2.flowchart)||void 0===_screen$authoring2$fl?void 0:_screen$authoring2$fl.paths){_context.next=11;break}return _context.abrupt("return",null);case 11:for(newPath=(0,_paths_path_factories__WEBPACK_IMPORTED_MODULE_4__.Q8)(),id=0;screen.authoring.flowchart.paths.find((function(p){return p.id===newPath.id}));)newPath.id=newPath.id+String(id++);return newPaths=[].concat(_toConsumableArray(paths),[newPath]),screen.authoring.flowchart.paths=newPaths,dispatch((0,_store_activities_actions_saveActivity__WEBPACK_IMPORTED_MODULE_2__.d)({activity:screen,undoable:!1,immediate:!0})),_context.next=19,dispatch((0,_delivery_store_features_activities_slice__WEBPACK_IMPORTED_MODULE_1__.Xx)({activity:screen}));case 19:return _context.abrupt("return",newPath);case 22:throw _context.prev=22,_context.t0=_context.catch(4),dispatch((0,_store_flowchart_flowchart_slice__WEBPACK_IMPORTED_MODULE_3__.Hr)({error:JSON.stringify(_context.t0,Object.getOwnPropertyNames(_context.t0),2),title:"Could not add path",message:"This path could not be added. Please try again.",failedActivity:screen,info:null})),_context.t0;case 26:case"end":return _context.stop()}}),_callee,null,[[4,22]])})));return function(_x,_x2){return _ref2.apply(this,arguments)}}())},"./src/apps/authoring/components/Flowchart/flowchart-actions/add-screen.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>addFlowchartScreen});var redux_toolkit_esm=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),persistence_activity=__webpack_require__("./src/data/persistence/activity.ts"),common=__webpack_require__("./src/utils/common.ts"),guid=__webpack_require__("./src/utils/guid.ts"),slice=__webpack_require__("./src/apps/delivery/store/features/activities/slice.ts"),deck=__webpack_require__("./src/apps/delivery/store/features/groups/selectors/deck.ts"),groups_slice=__webpack_require__("./src/apps/delivery/store/features/groups/slice.ts"),saveActivity=__webpack_require__("./src/apps/authoring/store/activities/actions/saveActivity.ts"),templates_activity=__webpack_require__("./src/apps/authoring/store/activities/templates/activity.ts");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var createSimpleText=function(){var _ref=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(msg){var style,transform,textComponent,_args=arguments;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return style=_args.length>1&&void 0!==_args[1]?_args[1]:{},transform=_args.length>2&&void 0!==_args[2]?_args[2]:{x:10,y:10,z:0,width:330,height:22},textComponent={id:"text_".concat((0,guid.Z)()),type:"janus-text-flow",custom:{nodes:[{tag:"p",children:[{tag:"span",style,children:[{tag:"text",text:msg,children:[]}]}]}],x:transform.x||0,y:transform.y||0,z:transform.z||0,width:transform.width||100,height:transform.height||50,palette:{fillColor:16777215,fillAlpha:0,lineColor:16777215,lineAlpha:0,lineThickness:.1,lineStyle:0},customCssClass:""}},_context.abrupt("return",textComponent);case 4:case"end":return _context.stop()}}),_callee)})));return function createSimpleText(_x){return _ref.apply(this,arguments)}}(),app_slice=__webpack_require__("./src/apps/authoring/store/app/slice.ts"),flowchart_slice=__webpack_require__("./src/apps/authoring/store/flowchart/flowchart-slice.ts"),flowchart_name=__webpack_require__("./src/apps/authoring/store/flowchart/name.ts"),addSequenceItem=__webpack_require__("./src/apps/authoring/store/groups/layouts/deck/actions/addSequenceItem.ts"),setCurrentActivityFromSequence=__webpack_require__("./src/apps/authoring/store/groups/layouts/deck/actions/setCurrentActivityFromSequence.ts"),savePage=__webpack_require__("./src/apps/authoring/store/page/actions/savePage.ts"),page_slice=__webpack_require__("./src/apps/authoring/store/page/slice.ts"),path_factories=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-factories.ts"),path_utils=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-utils.ts"),create_generic_rule=__webpack_require__("./src/apps/authoring/components/Flowchart/rules/create-generic-rule.ts"),screen_utils=__webpack_require__("./src/apps/authoring/components/Flowchart/screens/screen-utils.ts");function add_screen_typeof(obj){return add_screen_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},add_screen_typeof(obj)}function add_screen_regeneratorRuntime(){add_screen_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==add_screen_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==add_screen_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==add_screen_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===add_screen_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function add_screen_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var addFlowchartScreen=(0,redux_toolkit_esm.hg)("".concat(flowchart_name.D,"/addFlowchartScreen"),function(){var _ref2=function add_screen_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){add_screen_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){add_screen_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(add_screen_regeneratorRuntime().mark((function _callee(payload,_ref){var dispatch,getState,rootState,projectSlug,activityTypes,currentLesson,sequence,otherActivities,otherActivityNames,group,_payload$title,requestedTitle,_payload$screenType,screenType,title,activity,flowchartData,createResults,getLastScreenId,fromScreenId,fromScreen,sequenceEntry,reduxActivity;return add_screen_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(dispatch=_ref.dispatch,getState=_ref.getState,_context.prev=1,rootState=getState(),"flowchart"===(0,app_slice.Xi)(rootState)){_context.next=6;break}throw new Error("addFlowchartScreen can only be called when appMode is flowchart");case 6:return projectSlug=(0,app_slice.LJ)(rootState),activityTypes=(0,app_slice.pR)(rootState),currentLesson=(0,page_slice.bz)(rootState),sequence=(0,deck.nu)(rootState),otherActivities=(0,slice.N3)(rootState),otherActivityNames=otherActivities.map((function(a){return a.title||""})),group=(0,groups_slice.pY)(rootState)[0],_payload$title=payload.title,requestedTitle=void 0===_payload$title?"New Screen":_payload$title,_payload$screenType=payload.screenType,screenType=void 0===_payload$screenType?"blank_screen":_payload$screenType,title=clearTitle(requestedTitle,otherActivityNames),activity=_objectSpread(_objectSpread({},(0,templates_activity.L)()),{},{title,width:currentLesson.custom.defaultScreenWidth,height:currentLesson.custom.defaultScreenHeight}),_context.next=18,createSimpleText("Hello World");case 18:return _context.t0=_context.sent,activity.model.partsLayout=[_context.t0],activity.model.custom.maxAttempt=2,flowchartData={paths:[],screenType,templateApplied:!1},activity.model.authoring.flowchart=flowchartData,payload.toScreenId?flowchartData.paths.push((0,path_factories.WL)(payload.toScreenId)):"end_screen"===screenType?flowchartData.paths.push((0,path_factories.oK)()):flowchartData.paths.push((0,path_factories.Q8)()),_context.next=26,(0,persistence_activity.Ue)(projectSlug,activity.typeSlug,activity.model,activity.objectives.attached);case 26:if("failure"!==(createResults=_context.sent).result){_context.next=29;break}throw new Error("Couldn't create activity: "+JSON.stringify(createResults));case 29:if(getLastScreenId=function getLastScreenId(){var firstScreen=(0,screen_utils.gf)(otherActivities,sequence),orderedScreens=(0,screen_utils.C_)(otherActivities,firstScreen).filter((function(s){var _s$authoring,_s$authoring$flowchar;return"end_screen"!==(null===(_s$authoring=s.authoring)||void 0===_s$authoring||null===(_s$authoring$flowchar=_s$authoring.flowchart)||void 0===_s$authoring$flowchar?void 0:_s$authoring$flowchar.screenType)}));if(0!==orderedScreens.length)return orderedScreens[orderedScreens.length-1].resourceId},!(fromScreenId=payload.fromScreenId||getLastScreenId())||payload.skipPathToNewScreen){_context.next=39;break}if(!(fromScreen=(0,common.Cw)((0,slice.ho)(rootState,fromScreenId)))){_context.next=39;break}return payload.toScreenId&&(0,path_utils.AG)(fromScreen,payload.toScreenId),(0,path_utils.NA)(fromScreen)?(0,path_utils.YY)(fromScreen,createResults.resourceId):(0,path_utils._M)(fromScreen,createResults.resourceId),dispatch((0,saveActivity.d)({activity:fromScreen,undoable:!1,immediate:!0})),_context.next=39,dispatch((0,slice.Xx)({activity:fromScreen}));case 39:return activity.activity_id=createResults.resourceId,activity.activityId=activity.activity_id,activity.resourceId=activity.activity_id,activity.activitySlug=createResults.revisionSlug,activity.activityType=activityTypes.find((function(type){return type.slug===activity.typeSlug})),sequenceEntry={type:"activity-reference",resourceId:activity.resourceId,activitySlug:activity.activitySlug,custom:{isLayer:!1,isBank:!1,layerRef:null,sequenceId:"".concat(activity.activitySlug,"_").concat((0,guid.Z)()),sequenceName:title}},reduxActivity={id:activity.resourceId,resourceId:activity.resourceId,activitySlug:activity.activitySlug,activityType:activity.activityType,content:_objectSpread(_objectSpread({},activity.model),{},{authoring:void 0}),authoring:activity.model.authoring,title,tags:[]},dispatch((0,saveActivity.d)({activity:reduxActivity,undoable:!1,immediate:!0})),_context.next=49,dispatch((0,slice.Xx)({activity:reduxActivity}));case 49:return _context.next=51,dispatch((0,addSequenceItem.m)({siblingId:(0,create_generic_rule.SQ)(fromScreenId,sequence),sequence,item:sequenceEntry,group}));case 51:return dispatch((0,setCurrentActivityFromSequence.P)(sequenceEntry.custom.sequenceId)),_context.next=54,dispatch((0,savePage.J)({undoable:!1}));case 54:return _context.abrupt("return",activity);case 57:throw _context.prev=57,_context.t1=_context.catch(1),dispatch((0,flowchart_slice.Hr)({error:JSON.stringify(_context.t1,Object.getOwnPropertyNames(_context.t1),2),title:"Could not add screen",message:"A screen could not be added. Please try again.",failedActivity:null,info:null})),_context.t1;case 61:case"end":return _context.stop()}}),_callee,null,[[1,57]])})));return function(_x,_x2){return _ref2.apply(this,arguments)}}()),clearTitle=function clearTitle(title,otherActivityNames){var level=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,newTitle=0===level?title:"".concat(title," (").concat(level,")");return otherActivityNames.includes(newTitle)?clearTitle(title,otherActivityNames,level+1):newTitle}},"./src/apps/authoring/components/Flowchart/flowchart-actions/delete-path.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{e:()=>deletePath});var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),_utils_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/common.ts"),_delivery_store_features_activities_slice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/apps/delivery/store/features/activities/slice.ts"),_store_activities_actions_saveActivity__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/apps/authoring/store/activities/actions/saveActivity.ts"),_store_flowchart_flowchart_slice__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/apps/authoring/store/flowchart/flowchart-slice.ts"),_store_flowchart_name__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/apps/authoring/store/flowchart/name.ts"),_paths_path_factories__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-factories.ts");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var deletePath=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_5__.hg)("".concat(_store_flowchart_name__WEBPACK_IMPORTED_MODULE_6__.D,"/deletePath"),function(){var _ref2=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(payload,_ref){var dispatch,getState,pathId,screenId,rootState,screen,_screen$authoring,_screen$authoring$flo,paths,newPaths,modifiedScreen;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(dispatch=_ref.dispatch,getState=_ref.getState,pathId=payload.pathId,screenId=payload.screenId,rootState=getState(),screen=(0,_delivery_store_features_activities_slice__WEBPACK_IMPORTED_MODULE_1__.ho)(rootState,screenId),_context.prev=4,screen){_context.next=7;break}return _context.abrupt("return");case 7:if(paths=null===(_screen$authoring=screen.authoring)||void 0===_screen$authoring||null===(_screen$authoring$flo=_screen$authoring.flowchart)||void 0===_screen$authoring$flo?void 0:_screen$authoring$flo.paths){_context.next=10;break}return _context.abrupt("return");case 10:return 0===(newPaths=paths.filter((function(path){return path.id!==pathId}))).length&&newPaths.push((0,_paths_path_factories__WEBPACK_IMPORTED_MODULE_4__.Q8)()),(modifiedScreen=(0,_utils_common__WEBPACK_IMPORTED_MODULE_0__.d9)(screen)).authoring.flowchart.paths=newPaths,dispatch((0,_store_activities_actions_saveActivity__WEBPACK_IMPORTED_MODULE_2__.d)({activity:modifiedScreen,undoable:!1,immediate:!0})),_context.next=17,dispatch((0,_delivery_store_features_activities_slice__WEBPACK_IMPORTED_MODULE_1__.Xx)({activity:modifiedScreen}));case 17:_context.next=22;break;case 19:_context.prev=19,_context.t0=_context.catch(4),dispatch((0,_store_flowchart_flowchart_slice__WEBPACK_IMPORTED_MODULE_3__.Hr)({error:JSON.stringify(_context.t0,Object.getOwnPropertyNames(_context.t0),2),title:"Could not delete path",message:"Something went wrong when attempting to delete a path from this screen. Please try again.",failedActivity:screen,info:null}));case 22:case"end":return _context.stop()}}),_callee,null,[[4,19]])})));return function(_x,_x2){return _ref2.apply(this,arguments)}}())},"./src/apps/authoring/components/Flowchart/flowchart-actions/replace-path.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{u:()=>replacePath});var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),_utils_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/common.ts"),_delivery_store_features_activities_slice__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/apps/delivery/store/features/activities/slice.ts"),_store_activities_actions_saveActivity__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/apps/authoring/store/activities/actions/saveActivity.ts"),_store_flowchart_name__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/apps/authoring/store/flowchart/name.ts"),_paths_path_utils__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-utils.ts"),_paths_path_validation__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-validation.ts"),_add_screen__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/apps/authoring/components/Flowchart/flowchart-actions/add-screen.ts");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var replacePath=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_5__.hg)("".concat(_store_flowchart_name__WEBPACK_IMPORTED_MODULE_6__.D,"/replacePath"),function(){var _ref2=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(payload,_ref){var _screen$authoring,_screen$authoring2,_screen$authoring2$fl,dispatch,getState,oldPathId,newPath,screenId,result,newScreen,rootState,screen,paths,newPaths,modifiedScreen;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(dispatch=_ref.dispatch,getState=_ref.getState,oldPathId=payload.oldPathId,newPath=payload.newPath,screenId=payload.screenId,!(0,_paths_path_utils__WEBPACK_IMPORTED_MODULE_3__.M6)(newPath)||-1!==newPath.destinationScreenId){_context.next=8;break}return _context.next=5,dispatch((0,_add_screen__WEBPACK_IMPORTED_MODULE_4__.m)({skipPathToNewScreen:!0}));case 5:result=_context.sent,(newScreen=result.payload)&&newScreen.resourceId&&(newPath.destinationScreenId=newScreen.resourceId);case 8:if(newPath.completed=(0,_paths_path_validation__WEBPACK_IMPORTED_MODULE_7__.n)(newPath),rootState=getState(),screen=(0,_utils_common__WEBPACK_IMPORTED_MODULE_0__.Cw)((0,_delivery_store_features_activities_slice__WEBPACK_IMPORTED_MODULE_1__.ho)(rootState,screenId))){_context.next=13;break}return _context.abrupt("return");case 13:if(null!==(_screen$authoring=screen.authoring)&&void 0!==_screen$authoring&&_screen$authoring.flowchart||(screen.authoring=screen.authoring||{},screen.authoring.flowchart={templateApplied:!1,screenType:"blank_screen",paths:[]}),paths=null===(_screen$authoring2=screen.authoring)||void 0===_screen$authoring2||null===(_screen$authoring2$fl=_screen$authoring2.flowchart)||void 0===_screen$authoring2$fl?void 0:_screen$authoring2$fl.paths){_context.next=17;break}return _context.abrupt("return");case 17:return newPaths=paths.map((function(path){return path.id===oldPathId?newPath:path})),(modifiedScreen=(0,_utils_common__WEBPACK_IMPORTED_MODULE_0__.d9)(screen)).authoring.flowchart.paths=newPaths,dispatch((0,_store_activities_actions_saveActivity__WEBPACK_IMPORTED_MODULE_2__.d)({activity:modifiedScreen,undoable:!1,immediate:!0})),_context.next=23,dispatch((0,_delivery_store_features_activities_slice__WEBPACK_IMPORTED_MODULE_1__.Xx)({activity:modifiedScreen}));case 23:case"end":return _context.stop()}}),_callee)})));return function(_x,_x2){return _ref2.apply(this,arguments)}}())},"./src/apps/authoring/components/Flowchart/paths/path-validation.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{n:()=>validatePath});var validatePath=function validatePath(path){switch(path.type){case"end-of-activity":case"exit-activity":return!0;case"correct":case"incorrect":return validateComponentRule(path);case"always-go-to":return validateAlwaysGoTo(path);case"numeric-common-error":return validateNumericCommonError(path);case"option-common-error":case"option-specific":return validateSelectedOption(path);case"unknown-reason-path":return!1;default:return!1}},validateNumericCommonError=function validateNumericCommonError(path){return validateComponentRule(path)&&null!==path.destinationScreenId},validateSelectedOption=function validateSelectedOption(path){return validateComponentRule(path)&&null!==path.selectedOption},validateAlwaysGoTo=function validateAlwaysGoTo(path){return!!path.destinationScreenId},validateComponentRule=function validateComponentRule(path){return!(!path.destinationScreenId||!path.componentId)}},"./src/apps/authoring/components/Flowchart/screen-icons/BlankScreenIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{H:()=>BlankScreenIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),BlankScreenIcon=function BlankScreenIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#87CD9B":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:"24",height:"24",viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{width:"24",height:"24",rx:"4",fill}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M7.59961 6.09961H16.3996C17.228 6.09961 17.8996 6.77118 17.8996 7.59961V14.3712C17.8996 14.769 17.7416 15.1505 17.4603 15.4318L15.4318 17.4603C15.1505 17.7416 14.769 17.8996 14.3712 17.8996H7.59961C6.77118 17.8996 6.09961 17.228 6.09961 16.3996V7.59961C6.09961 6.77118 6.77118 6.09961 7.59961 6.09961Z",stroke}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("mask",{id:"path-3-inside-1_304_15877",fill:"white",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M13.5996 18.4004L13.5996 15.6004C13.5996 14.4958 14.495 13.6004 15.5996 13.6004L18.3996 13.6004"})}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M12.5996 18.4004L12.5996 15.6004L14.5996 15.6004L14.5996 18.4004L12.5996 18.4004ZM15.5996 12.6004L18.3996 12.6004L18.3996 14.6004L15.5996 14.6004L15.5996 12.6004ZM12.5996 15.6004C12.5996 13.9435 13.9428 12.6004 15.5996 12.6004L15.5996 14.6004C15.0473 14.6004 14.5996 15.0481 14.5996 15.6004L12.5996 15.6004Z",fill,mask:"url(#path-3-inside-1_304_15877)"})]})};BlankScreenIcon.displayName="BlankScreenIcon";try{BlankScreenIcon.displayName="BlankScreenIcon",BlankScreenIcon.__docgenInfo={description:"",displayName:"BlankScreenIcon",props:{fill:{defaultValue:{value:"#87CD9B"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/BlankScreenIcon.tsx#BlankScreenIcon"]={docgenInfo:BlankScreenIcon.__docgenInfo,name:"BlankScreenIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/BlankScreenIcon.tsx#BlankScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screen-icons/DropdownScreenIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>DropdownScreenIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),DropdownScreenIcon=function DropdownScreenIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#87CD9B":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{width:24,height:24,rx:3,fill}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M7.5 9.75l4.5 4.5 4.5-4.5",stroke,strokeMiterlimit:10,strokeLinecap:"round",strokeLinejoin:"round"})]})};DropdownScreenIcon.displayName="DropdownScreenIcon";try{DropdownScreenIcon.displayName="DropdownScreenIcon",DropdownScreenIcon.__docgenInfo={description:"",displayName:"DropdownScreenIcon",props:{fill:{defaultValue:{value:"#87CD9B"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/DropdownScreenIcon.tsx#DropdownScreenIcon"]={docgenInfo:DropdownScreenIcon.__docgenInfo,name:"DropdownScreenIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/DropdownScreenIcon.tsx#DropdownScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screen-icons/EndScreenIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>EndScreenIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),EndScreenIcon=function EndScreenIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#87CD9B":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{width:24,height:24,rx:3,fill}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M9.75 17.25h-2.5c-.332 0-.65-.123-.884-.342A1.129 1.129 0 016 16.083V7.917c0-.31.132-.606.366-.825.235-.22.552-.342.884-.342h2.5M17.25 12h-7.5M15.297 9.75l2.25 2.25-2.25 2.25",stroke,strokeLinecap:"round",strokeLinejoin:"round"})]})};EndScreenIcon.displayName="EndScreenIcon";try{EndScreenIcon.displayName="EndScreenIcon",EndScreenIcon.__docgenInfo={description:"",displayName:"EndScreenIcon",props:{fill:{defaultValue:{value:"#87CD9B"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/EndScreenIcon.tsx#EndScreenIcon"]={docgenInfo:EndScreenIcon.__docgenInfo,name:"EndScreenIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/EndScreenIcon.tsx#EndScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screen-icons/HubSpokeIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>HubSpokeIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),HubSpokeIcon=function HubSpokeIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#87CD9B":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{width:24,height:24,rx:3,fill}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M8.5 6.75v7M15.625 10.5a1.875 1.875 0 100-3.75 1.875 1.875 0 000 3.75zM8.625 17.5a1.875 1.875 0 100-3.75 1.875 1.875 0 000 3.75zM15.494 10.5a5.25 5.25 0 01-4.994 4.995",stroke,strokeLinecap:"round",strokeLinejoin:"round"})]})};HubSpokeIcon.displayName="HubSpokeIcon";try{HubSpokeIcon.displayName="HubSpokeIcon",HubSpokeIcon.__docgenInfo={description:"",displayName:"HubSpokeIcon",props:{fill:{defaultValue:{value:"#87CD9B"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/HubSpokeIcon.tsx#HubSpokeIcon"]={docgenInfo:HubSpokeIcon.__docgenInfo,name:"HubSpokeIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/HubSpokeIcon.tsx#HubSpokeIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screen-icons/MultilineTextScreenIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{r:()=>MultilineTextScreenIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),MultilineTextScreenIcon=function MultilineTextScreenIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#87CD9B":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{width:24,height:24,rx:3,fill}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M18 8H6M18 13.333H6M16 10.667H8M16 16H8",stroke,strokeLinecap:"round",strokeLinejoin:"round"})]})};MultilineTextScreenIcon.displayName="MultilineTextScreenIcon";try{MultilineTextScreenIcon.displayName="MultilineTextScreenIcon",MultilineTextScreenIcon.__docgenInfo={description:"",displayName:"MultilineTextScreenIcon",props:{fill:{defaultValue:{value:"#87CD9B"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/MultilineTextScreenIcon.tsx#MultilineTextScreenIcon"]={docgenInfo:MultilineTextScreenIcon.__docgenInfo,name:"MultilineTextScreenIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/MultilineTextScreenIcon.tsx#MultilineTextScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screen-icons/MultipleChoiceScreenIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>MultipleChoiceScreenIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),MultipleChoiceScreenIcon=function MultipleChoiceScreenIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#87CD9B":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{width:24,height:24,rx:3,fill}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M19 12a7 7 0 11-14 0 7 7 0 0114 0z",stroke,strokeWidth:1.16667,strokeLinecap:"round",strokeLinejoin:"round"}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M14.758 10.031l-3.682 3.75L9.4 12.077",stroke,strokeLinecap:"round",strokeLinejoin:"round"})]})};MultipleChoiceScreenIcon.displayName="MultipleChoiceScreenIcon";try{MultipleChoiceScreenIcon.displayName="MultipleChoiceScreenIcon",MultipleChoiceScreenIcon.__docgenInfo={description:"",displayName:"MultipleChoiceScreenIcon",props:{fill:{defaultValue:{value:"#87CD9B"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/MultipleChoiceScreenIcon.tsx#MultipleChoiceScreenIcon"]={docgenInfo:MultipleChoiceScreenIcon.__docgenInfo,name:"MultipleChoiceScreenIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/MultipleChoiceScreenIcon.tsx#MultipleChoiceScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screen-icons/NumberInputScreenIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{U:()=>NumberInputScreenIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),NumberInputScreenIcon=function NumberInputScreenIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#87CD9B":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{width:24,height:24,rx:3,fill}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M10.5 9H6.75M10.5 15H6.75M8.625 13.125v3.75M17.25 13.875H13.5M17.25 16.125H13.5M16.5 7.5l-3 3M16.5 10.5l-3-3",stroke,strokeLinecap:"round",strokeLinejoin:"round"})]})};NumberInputScreenIcon.displayName="NumberInputScreenIcon";try{NumberInputScreenIcon.displayName="NumberInputScreenIcon",NumberInputScreenIcon.__docgenInfo={description:"",displayName:"NumberInputScreenIcon",props:{fill:{defaultValue:{value:"#87CD9B"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/NumberInputScreenIcon.tsx#NumberInputScreenIcon"]={docgenInfo:NumberInputScreenIcon.__docgenInfo,name:"NumberInputScreenIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/NumberInputScreenIcon.tsx#NumberInputScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screen-icons/SliderScreenIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{v:()=>SliderScreenIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),SliderScreenIcon=function SliderScreenIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#87CD9B":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{width:24,height:24,rx:3,fill}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M6 9h8M16 9h2M14 11V7M18 15h-8M8 15H6M10 17v-4",stroke,strokeLinecap:"round"})]})};SliderScreenIcon.displayName="SliderScreenIcon";try{SliderScreenIcon.displayName="SliderScreenIcon",SliderScreenIcon.__docgenInfo={description:"",displayName:"SliderScreenIcon",props:{fill:{defaultValue:{value:"#87CD9B"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/SliderScreenIcon.tsx#SliderScreenIcon"]={docgenInfo:SliderScreenIcon.__docgenInfo,name:"SliderScreenIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/SliderScreenIcon.tsx#SliderScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screen-icons/TextInputScreenIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{f:()=>TextInputScreenIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),TextInputScreenIcon=function TextInputScreenIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#87CD9B":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{width:24,height:24,rx:3,fill}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M7.5 9.75V7.5h9v2.25M10.5 16.5h3M12 7.5v9",stroke,strokeLinecap:"round",strokeLinejoin:"round"})]})};TextInputScreenIcon.displayName="TextInputScreenIcon";try{TextInputScreenIcon.displayName="TextInputScreenIcon",TextInputScreenIcon.__docgenInfo={description:"",displayName:"TextInputScreenIcon",props:{fill:{defaultValue:{value:"#87CD9B"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/TextInputScreenIcon.tsx#TextInputScreenIcon"]={docgenInfo:TextInputScreenIcon.__docgenInfo,name:"TextInputScreenIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/TextInputScreenIcon.tsx#TextInputScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screen-icons/WelcomeScreenIcon.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{j:()=>WelcomeScreenIcon});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),WelcomeScreenIcon=function WelcomeScreenIcon(_ref){var _ref$fill=_ref.fill,fill=void 0===_ref$fill?"#87CD9B":_ref$fill,_ref$stroke=_ref.stroke,stroke=void 0===_ref$stroke?"#222439":_ref$stroke;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("rect",{width:24,height:24,rx:3,fill}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("path",{d:"M14.25 6.75h2.5c.331 0 .65.123.884.342.234.219.366.515.366.825v8.166c0 .31-.132.607-.366.825a1.297 1.297 0 01-.884.342h-2.5M13.5 12H6M11.547 9.75l2.25 2.25-2.25 2.25",stroke,strokeLinecap:"round",strokeLinejoin:"round"})]})};WelcomeScreenIcon.displayName="WelcomeScreenIcon";try{WelcomeScreenIcon.displayName="WelcomeScreenIcon",WelcomeScreenIcon.__docgenInfo={description:"",displayName:"WelcomeScreenIcon",props:{fill:{defaultValue:{value:"#87CD9B"},description:"",name:"fill",required:!1,type:{name:"string"}},stroke:{defaultValue:{value:"#222439"},description:"",name:"stroke",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/WelcomeScreenIcon.tsx#WelcomeScreenIcon"]={docgenInfo:WelcomeScreenIcon.__docgenInfo,name:"WelcomeScreenIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/WelcomeScreenIcon.tsx#WelcomeScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screen-icons/screen-icons.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Bw:()=>ScreenValidationColors,_F:()=>screenTypeToIcon,pz:()=>ScreenIcon});__webpack_require__("./node_modules/react/index.js");var _BlankScreenIcon__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/BlankScreenIcon.tsx"),_DropdownScreenIcon__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/DropdownScreenIcon.tsx"),_EndScreenIcon__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/EndScreenIcon.tsx"),_HubSpokeIcon__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/HubSpokeIcon.tsx"),_MultilineTextScreenIcon__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/MultilineTextScreenIcon.tsx"),_MultipleChoiceScreenIcon__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/MultipleChoiceScreenIcon.tsx"),_NumberInputScreenIcon__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/NumberInputScreenIcon.tsx"),_SliderScreenIcon__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/SliderScreenIcon.tsx"),_TextInputScreenIcon__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/TextInputScreenIcon.tsx"),_WelcomeScreenIcon__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/WelcomeScreenIcon.tsx"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__("./node_modules/react/jsx-runtime.js"),screenTypeToIcon={blank_screen:_BlankScreenIcon__WEBPACK_IMPORTED_MODULE_1__.H,welcome_screen:_WelcomeScreenIcon__WEBPACK_IMPORTED_MODULE_10__.j,multiple_choice:_MultipleChoiceScreenIcon__WEBPACK_IMPORTED_MODULE_6__.f,multiline_text:_MultilineTextScreenIcon__WEBPACK_IMPORTED_MODULE_5__.r,slider:_SliderScreenIcon__WEBPACK_IMPORTED_MODULE_8__.v,hub_and:_HubSpokeIcon__WEBPACK_IMPORTED_MODULE_4__.Y,end_screen:_EndScreenIcon__WEBPACK_IMPORTED_MODULE_3__.L,number_input:_NumberInputScreenIcon__WEBPACK_IMPORTED_MODULE_7__.U,text_input:_TextInputScreenIcon__WEBPACK_IMPORTED_MODULE_9__.f,dropdown:_DropdownScreenIcon__WEBPACK_IMPORTED_MODULE_2__.r},ScreenValidationColors={VALIDATED:"#87CD9B",NOT_VALIDATED:"#FFE05E"},ScreenIcon=function ScreenIcon(_ref){var screenType=_ref.screenType,fill=_ref.fill,Icon=screenTypeToIcon[screenType];return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_11__.jsx)(Icon,{fill})};ScreenIcon.displayName="ScreenIcon";try{ScreenIcon.displayName="ScreenIcon",ScreenIcon.__docgenInfo={description:"",displayName:"ScreenIcon",props:{screenType:{defaultValue:null,description:"",name:"screenType",required:!0,type:{name:"string"}},fill:{defaultValue:null,description:"",name:"fill",required:!1,type:{name:"string"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screen-icons/screen-icons.tsx#ScreenIcon"]={docgenInfo:ScreenIcon.__docgenInfo,name:"ScreenIcon",path:"src/apps/authoring/components/Flowchart/screen-icons/screen-icons.tsx#ScreenIcon"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/components/Flowchart/screens/screen-utils.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{C_:()=>sortScreens,gf:()=>getFirstScreenInSequence});var lodash_uniq__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./node_modules/lodash/uniq.js"),lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default=__webpack_require__.n(lodash_uniq__WEBPACK_IMPORTED_MODULE_0__),_paths_path_utils__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-utils.ts");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var getFirstScreenInSequence=function getFirstScreenInSequence(screens,sequence){var _sequence$,firstScreenId=null===(_sequence$=sequence[0])||void 0===_sequence$?void 0:_sequence$.resourceId;return screens.find((function(s){return s.resourceId===firstScreenId}))},sortScreens=function sortScreens(screens,firstScreen){var sortedByTitle=screens.sort((function(a,b){return a.title&&b.title?a.title.localeCompare(b.title):0})),screensLeft=sortedByTitle.filter((function(s){return s.resourceId!==(null==firstScreen?void 0:firstScreen.resourceId)}));if(!firstScreen)return sortedByTitle;var sortedScreens=[firstScreen].concat(_toConsumableArray(getOrderedPath(firstScreen,screensLeft))),unlinkedScreens=sortedByTitle.filter((function(s){return!sortedScreens.includes(s)})),pathSorted=[].concat(_toConsumableArray(sortedScreens),_toConsumableArray(unlinkedScreens)),welcomeScreen=pathSorted.find(isWelcomeScreen);if(welcomeScreen){var welcomeScreenIndex=pathSorted.indexOf(welcomeScreen);welcomeScreenIndex>0&&(pathSorted.splice(welcomeScreenIndex,1),pathSorted.unshift(welcomeScreen))}var endScreen=pathSorted.find(isEndScreen);if(endScreen){var endScreenIndex=pathSorted.indexOf(endScreen);endScreenIndex<pathSorted.length-1&&(pathSorted.splice(endScreenIndex,1),pathSorted.push(endScreen))}return pathSorted},isWelcomeScreen=function isWelcomeScreen(screen){var _screen$authoring,_screen$authoring$flo;return"welcome_screen"===(null===(_screen$authoring=screen.authoring)||void 0===_screen$authoring||null===(_screen$authoring$flo=_screen$authoring.flowchart)||void 0===_screen$authoring$flo?void 0:_screen$authoring$flo.screenType)},isEndScreen=function isEndScreen(screen){var _screen$authoring2,_screen$authoring2$fl;return"end_screen"===(null===(_screen$authoring2=screen.authoring)||void 0===_screen$authoring2||null===(_screen$authoring2$fl=_screen$authoring2.flowchart)||void 0===_screen$authoring2$fl?void 0:_screen$authoring2$fl.screenType)},isScreen=function isScreen(screen){return!!screen};function getOrderedPath(screen,screensLeft){var _screen$authoring3,_screen$authoring3$fl,_step,destinationPaths=((null===(_screen$authoring3=screen.authoring)||void 0===_screen$authoring3||null===(_screen$authoring3$fl=_screen$authoring3.flowchart)||void 0===_screen$authoring3$fl?void 0:_screen$authoring3$fl.paths)||[]).filter(_paths_path_utils__WEBPACK_IMPORTED_MODULE_1__.M6),nextScreens=lodash_uniq__WEBPACK_IMPORTED_MODULE_0___default()(destinationPaths.map((function(p){return screensLeft.find((function(s){return s.resourceId===p.destinationScreenId}))})).filter(isScreen)),_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(nextScreens);try{for(_iterator.s();!(_step=_iterator.n()).done;){var nextBranch=getOrderedPath(_step.value,screensLeft.filter((function(s){return!nextScreens.includes(s)})));nextScreens.push.apply(nextScreens,_toConsumableArray(nextBranch))}}catch(err){_iterator.e(err)}finally{_iterator.f()}return nextScreens}},"./src/apps/authoring/components/Flowchart/screens/screen-validation.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{vj:()=>validateScreen});__webpack_require__("./node_modules/react/index.js");var _paths_path_options__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-options.ts"),_paths_path_utils__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-utils.ts"),_paths_path_validation__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-validation.ts"),react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/react/jsx-runtime.js");function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||_unsupportedIterableToArray(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(o,minLen):void 0}}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var hasPathTo=function hasPathTo(screenId,allActivities,startAt){var _activity$authoring,_activity$authoring$f,visited=arguments.length>3&&void 0!==arguments[3]?arguments[3]:[];if(startAt===screenId)return!0;if(visited.includes(startAt))return!1;var activity=allActivities.find((function(a){return a.resourceId===startAt}));if(!activity)return!1;var _step,_iterator=function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}(((null===(_activity$authoring=activity.authoring)||void 0===_activity$authoring||null===(_activity$authoring$f=_activity$authoring.flowchart)||void 0===_activity$authoring$f?void 0:_activity$authoring$f.paths)||[]).filter(_paths_path_utils__WEBPACK_IMPORTED_MODULE_2__.M6).filter(_paths_path_validation__WEBPACK_IMPORTED_MODULE_4__.n));try{for(_iterator.s();!(_step=_iterator.n()).done;){var path=_step.value;if(path.destinationScreenId&&hasPathTo(screenId,allActivities,path.destinationScreenId,[].concat(_toConsumableArray(visited),[startAt])))return!0}}catch(err){_iterator.e(err)}finally{_iterator.f()}return!1},ValidationError=function ValidationError(_ref){var title=_ref.title,children=_ref.children;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("div",{className:"validation-error",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("h3",{children:title}),(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("div",{children})]})};ValidationError.displayName="ValidationError";var validateScreen=function validateScreen(screen,allActivities,sequence){var _screen$authoring,_screen$authoring$flo,_screen$authoring2,_screen$authoring2$fl,_screen$authoring3,_screen$authoring3$fl,_screen$authoring4,_screen$authoring4$fl,_screen$authoring5,_screen$authoring5$fl,validations=[],question=(0,_paths_path_options__WEBPACK_IMPORTED_MODULE_1__.Kw)(screen),questionType=(0,_paths_path_options__WEBPACK_IMPORTED_MODULE_1__.oI)(screen);if(null!==(_screen$authoring=screen.authoring)&&void 0!==_screen$authoring&&null!==(_screen$authoring$flo=_screen$authoring.flowchart)&&void 0!==_screen$authoring$flo&&_screen$authoring$flo.templateApplied||validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(ValidationError,{title:"Component Settings",children:["none"===questionType&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("span",{children:["Screen settings are missing. Please go to ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("b",{children:"edit screen mode"})," and design the screen."]}),"none"!==questionType&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)("span",{children:["Component settings are missing. Please go to ",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("b",{children:"edit screen mode"})," and set up the correct answer."]})]},"template-not-applied")),"end_screen"===(null===(_screen$authoring2=screen.authoring)||void 0===_screen$authoring2||null===(_screen$authoring2$fl=_screen$authoring2.flowchart)||void 0===_screen$authoring2$fl?void 0:_screen$authoring2$fl.screenType))return validations;sequence.length>0&&!hasPathTo(screen.resourceId,allActivities,sequence[0].resourceId||-1)&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ValidationError,{title:"No path leads to this screen",children:"No path leads to this screen. This may affect its visibility in the lesson. Make sure there are no interactions missing here."},"no-path"));var unknownPaths=((null===(_screen$authoring3=screen.authoring)||void 0===_screen$authoring3||null===(_screen$authoring3$fl=_screen$authoring3.flowchart)||void 0===_screen$authoring3$fl?void 0:_screen$authoring3$fl.paths)||[]).filter(_paths_path_utils__WEBPACK_IMPORTED_MODULE_2__.bU);unknownPaths.length>0&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(ValidationError,{title:"Outgoing paths are not defined",children:["Define the logic leading to the screens:",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("ul",{children:unknownPaths.map((function(p){var _allActivities$find,title=(null===(_allActivities$find=allActivities.find((function(a){return a.resourceId===p.destinationScreenId})))||void 0===_allActivities$find?void 0:_allActivities$find.title)||"Untitled";return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("li",{children:title},p.id)}))})]},"unknown-path"));var paths=((null===(_screen$authoring4=screen.authoring)||void 0===_screen$authoring4||null===(_screen$authoring4$fl=_screen$authoring4.flowchart)||void 0===_screen$authoring4$fl?void 0:_screen$authoring4$fl.paths)||[]).filter((function(p){return"unknown-reason-path"!==p.type})).filter((function(path){return!(0,_paths_path_validation__WEBPACK_IMPORTED_MODULE_4__.n)(path)}));return paths.length>0&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(ValidationError,{title:"Path is not valid",children:["The following paths are not valid for this screen.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("ul",{children:paths.map((function(path){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("li",{children:path.label},path.id)}))})]},"paths-invalid")),validations.push.apply(validations,_toConsumableArray(validatePathSet((null===(_screen$authoring5=screen.authoring)||void 0===_screen$authoring5||null===(_screen$authoring5$fl=_screen$authoring5.flowchart)||void 0===_screen$authoring5$fl?void 0:_screen$authoring5$fl.paths)||[],question,questionType))),validations},validatePathSet=function validatePathSet(paths,question,questionType){switch(questionType){case"input-text":case"check-all-that-apply":case"slider":case"input-number":return validateCorrectOrIncorrectQuestion(paths);case"multiple-choice":return validateMCQQuestion(paths,question);case"dropdown":return validateDropdownQuestion(paths,question);case"multi-line-text":case"none":return validatePathSetNone(paths);default:return[]}},validatePathSetNone=function validatePathSetNone(paths){var alwaysGoTo=paths.filter((function(path){return"always-go-to"===path.type})),endOfActivity=paths.filter((function(path){return"end-of-activity"===path.type})),exitActivity=paths.filter((function(path){return"exit-activity"===path.type}));return 1===paths.length&&alwaysGoTo.length+endOfActivity.length+exitActivity.length===1?[]:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ValidationError,{title:"Exit paths",children:"A screen with no question must have exactly one path out."},"exit-path-error")]},findMissingConditions=function findMissingConditions(paths,optionCount){var exit=paths.filter((function(path){return"end-of-activity"===path.type})),always=paths.filter((function(path){return"always-go-to"===path.type})),correct=paths.filter((function(path){return"correct"===path.type})),incorrect=paths.filter((function(path){return"incorrect"===path.type})),hasCorrect=correct.length>0,hasIncorrect=incorrect.length>0;if(always.length>0||exit.length>0)return[];if(hasCorrect&&hasIncorrect)return[];if(!hasCorrect)return["There is no correct answer path"];var options=paths.filter(_paths_path_utils__WEBPACK_IMPORTED_MODULE_2__.oq).map((function(path){return path.selectedOption}));return _toConsumableArray(new Set(options)).length<optionCount-1?["There are missing incorrect answer paths"]:[]},hasExitPath=function hasExitPath(paths){return paths.some((function(path){return"end-of-activity"===path.type}))},validateMCQQuestion=function validateMCQQuestion(paths,question){return question.custom.anyCorrectAnswer?validateAnyCorrectMCQQuestion(paths,question.custom.mcqItems.length):validateDeterminateQuestion(paths,question.custom.mcqItems.length)},validateDropdownQuestion=function validateDropdownQuestion(paths,question){return validateDeterminateQuestion(paths,question.custom.optionLabels.length)},hasMultipleAlwaysPaths=function hasMultipleAlwaysPaths(paths){return paths.filter((function(path){return"always-go-to"===path.type})).length>1},validateAnyCorrectMCQQuestion=function validateAnyCorrectMCQQuestion(paths,optionCount){var always=paths.filter((function(path){return"always-go-to"===path.type})),exit=paths.filter((function(path){return"end-of-activity"===path.type})),specific=paths.filter((function(path){return"option-specific"===path.type})),unknownPaths=paths.filter((function(path){return!["always-go-to","end-of-activity","option-specific"].includes(path.type)})),validations=[];return unknownPaths.length>0&&(console.info("unknown paths",unknownPaths),validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(ValidationError,{title:"Bad path",children:["These paths are not valid for this screen:",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("ul",{children:unknownPaths.map((function(path){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("li",{children:path.label},path.id)}))})]},"badpaths"))),hasExitPath(paths)&&paths.length>1&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ValidationError,{title:"Exit Activity with other paths",children:"You can not have both an exit-activity and another path out of this screen."},"exit-plus-path")),hasMultipleAlwaysPaths(paths)&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ValidationError,{title:"Multiple always paths",children:"You can not have multiple always-go-to paths."},"many-always")),0===exit.length&&0===always.length&&specific.length!==optionCount&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ValidationError,{title:"Outgoing paths are not all defined",children:"Some conditions that might lead out of this screen have no path."},"required-paths")),validations},validateDeterminateQuestion=function validateDeterminateQuestion(paths,optionCount){var validations=[],missingConditions=findMissingConditions(paths,optionCount);missingConditions.length>0&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(ValidationError,{title:"Outgoing paths are not all defined",children:["Some conditions that might lead out of this screen have no path.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("ul",{children:missingConditions.map((function(condition,index){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("li",{children:condition},index)}))})]},"outgoing-undefined"));var extraConditions=function checkForTooManyConditions(paths,optionCount){return paths.filter(_paths_path_utils__WEBPACK_IMPORTED_MODULE_2__.oq).length>=optionCount?["There are too many incorrect answer paths"]:[]}(paths,optionCount);return extraConditions.length>0&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ValidationError,{title:"Too many outgoing paths",children:extraConditions[0]},"outgoing-extra")),hasExitPath(paths)&&paths.length>1&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ValidationError,{title:"Exit Activity with other paths",children:"You can not have both an exit-activity and another path out of this screen."},"exit-plus-path")),hasMultipleAlwaysPaths(paths)&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ValidationError,{title:"Multiple always paths",children:"You can not have multiple always-go-to paths."},"many-always")),validations},validateCorrectOrIncorrectQuestion=function validateCorrectOrIncorrectQuestion(paths){var validations=[],missingConditions=findMissingConditions(paths,Number.MAX_SAFE_INTEGER);return missingConditions.length>0&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsxs)(ValidationError,{title:"Outgoing paths are not all defined",children:["Some conditions that might lead out of this screen have no path.",(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("ul",{children:missingConditions.map((function(condition,index){return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)("li",{children:condition},index)}))})]},"outgoing-undefined")),hasExitPath(paths)&&paths.length>1&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ValidationError,{title:"Exit Activity with other paths",children:"You can not have both an exit-activity and another path out of this screen."},"exit-plus-path")),hasMultipleAlwaysPaths(paths)&&validations.push((0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_3__.jsx)(ValidationError,{title:"Multiple always paths",children:"You can not have multiple always-go-to paths."},"many-always")),validations};try{validateScreen.displayName="validateScreen",validateScreen.__docgenInfo={description:"Returns a list of reasons why this screen is not valid, or an empty array if it is",displayName:"validateScreen",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screens/screen-validation.tsx#validateScreen"]={docgenInfo:validateScreen.__docgenInfo,name:"validateScreen",path:"src/apps/authoring/components/Flowchart/screens/screen-validation.tsx#validateScreen"})}catch(__react_docgen_typescript_loader_error){}try{validatePathSetNone.displayName="validatePathSetNone",validatePathSetNone.__docgenInfo={description:"",displayName:"validatePathSetNone",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/screens/screen-validation.tsx#validatePathSetNone"]={docgenInfo:validatePathSetNone.__docgenInfo,name:"validatePathSetNone",path:"src/apps/authoring/components/Flowchart/screens/screen-validation.tsx#validatePathSetNone"})}catch(__react_docgen_typescript_loader_error){}},"./src/apps/authoring/store/activities/templates/activity.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{L:()=>createActivityTemplate});var createActivityTemplate=function createActivityTemplate(){return{type:"activity",typeSlug:"oli_adaptive",title:"",objectives:{attached:[]},tags:[],model:{authoring:{parts:[],rules:[]},custom:{applyBtnFlag:!1,applyBtnLabel:"",checkButtonLabel:"Next",combineFeedback:!1,customCssClass:"",facts:[],lockCanvasSize:!1,mainBtnLabel:"",maxAttempt:0,maxScore:0,negativeScoreAllowed:!1,palette:{backgroundColor:"rgba(255,255,255,0)",borderColor:"rgba(255,255,255,0)",borderRadius:"",borderStyle:"solid",borderWidth:"1px"},panelHeaderColor:0,panelTitleColor:0,showCheckBtn:!0,trapStateScoreScheme:!1,width:1e3,height:540,x:0,y:0,z:0},partsLayout:[]}}}},"./src/apps/authoring/store/flowchart/flowchart-slice.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Hr:()=>reportAPIError,sE:()=>selectAutoOpenPath});var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__("./node_modules/reselect/es/index.js"),_components_Flowchart_flowchart_actions_add_path__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/apps/authoring/components/Flowchart/flowchart-actions/add-path.ts"),_components_Flowchart_flowchart_actions_delete_path__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/apps/authoring/components/Flowchart/flowchart-actions/delete-path.ts"),_components_Flowchart_flowchart_actions_replace_path__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/apps/authoring/components/Flowchart/flowchart-actions/replace-path.ts"),_name__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/apps/authoring/store/flowchart/name.ts"),_excluded=["message"];function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var flowchartSlice=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_3__.oM)({name:"flowchart",initialState:{autoOpenPath:null},reducers:{reportAPIError:function reportAPIError(state,action){var _action$payload=action.payload,message=_action$payload.message,rest=_objectWithoutProperties(_action$payload,_excluded);console.error("🔥Error Reported:\n > ".concat(message),rest),state.apiError||(state.apiError=action.payload)},clearError:function clearError(state){state.apiError=null}},extraReducers:function extraReducers(builder){builder.addCase(_components_Flowchart_flowchart_actions_add_path__WEBPACK_IMPORTED_MODULE_0__.Q.fulfilled,(function(state,action){action.payload&&(state.autoOpenPath=action.payload.id)})),builder.addCase(_components_Flowchart_flowchart_actions_replace_path__WEBPACK_IMPORTED_MODULE_2__.u.fulfilled,(function(state){state.autoOpenPath=null})),builder.addCase(_components_Flowchart_flowchart_actions_delete_path__WEBPACK_IMPORTED_MODULE_1__.e.fulfilled,(function(state){state.autoOpenPath=null}))}}),selectState=function selectState(state){return state[_name__WEBPACK_IMPORTED_MODULE_4__.D]},selectAutoOpenPath=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_5__.P1)(selectState,(function(s){return s.autoOpenPath})),_flowchartSlice$actio=((0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_5__.P1)(selectState,(function(s){return s.apiError})),flowchartSlice.actions),reportAPIError=_flowchartSlice$actio.reportAPIError;_flowchartSlice$actio.clearError,flowchartSlice.reducer},"./src/apps/authoring/store/flowchart/name.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{D:()=>FlowchartSlice});var FlowchartSlice="flowchart"},"./src/apps/authoring/store/groups/layouts/deck/actions/addSequenceItem.ts":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{m:()=>addSequenceItem});var _reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),utils_common__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__("./src/utils/common.ts"),_delivery_store_features_groups_actions_sequence__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./src/apps/delivery/store/features/groups/actions/sequence.ts"),_delivery_store_features_groups_name__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__("./src/apps/delivery/store/features/groups/name.ts"),_delivery_store_features_groups_slice__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__("./src/apps/delivery/store/features/groups/slice.ts");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return _arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var addSequenceItem=(0,_reduxjs_toolkit__WEBPACK_IMPORTED_MODULE_3__.hg)("".concat(_delivery_store_features_groups_name__WEBPACK_IMPORTED_MODULE_4__.Z,"/addSequenceItem"),function(){var _ref2=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(payload,_ref){var dispatch,_payload$sequence,sequence,_payload$group,group,_payload$item,item,_payload$parentId,parentId,_payload$siblingId,siblingId,sequenceItems,parentItem,hierarchy,parentInHierarchy,siblingEntryIndex,_siblingEntryIndex,newGroup;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(dispatch=_ref.dispatch,_payload$sequence=payload.sequence,sequence=void 0===_payload$sequence?[]:_payload$sequence,_payload$group=payload.group,group=void 0===_payload$group?{}:_payload$group,_payload$item=payload.item,item=void 0===_payload$item?{}:_payload$item,_payload$parentId=payload.parentId,parentId=void 0===_payload$parentId?void 0:_payload$parentId,_payload$siblingId=payload.siblingId,siblingId=void 0===_payload$siblingId?void 0:_payload$siblingId,sequenceItems=_toConsumableArray(sequence),!parentId){_context.next=18;break}if(!(parentItem=sequenceItems.find((function(i){return i.activitySlug===parentId})))){_context.next=16;break}if(parentItem.custom=parentItem.custom||{},sequenceItems.indexOf(parentItem),item.custom.layerRef=parentItem.activitySlug,hierarchy=(0,_delivery_store_features_groups_actions_sequence__WEBPACK_IMPORTED_MODULE_1__._y)(sequenceItems),parentInHierarchy=(0,_delivery_store_features_groups_actions_sequence__WEBPACK_IMPORTED_MODULE_1__.wb)(hierarchy,parentId)){_context.next=14;break}throw console.warn("Hierarchy",{hierarchy}),new Error("Couldn't find ".concat(parentId," in heirarchy, shouldn't be possible."));case 14:siblingId?(siblingEntryIndex=parentInHierarchy.children.findIndex((function(entry){return entry.activitySlug===siblingId})))<0?(console.warn("couldn't find sibling ".concat(siblingId,", shouldn't be possible")),parentInHierarchy.children.push(item)):parentInHierarchy.children.splice(siblingEntryIndex+1,0,item):parentInHierarchy.children.push(item),sequenceItems=(0,_delivery_store_features_groups_actions_sequence__WEBPACK_IMPORTED_MODULE_1__.Uv)(hierarchy);case 16:_context.next=19;break;case 18:siblingId?(_siblingEntryIndex=sequenceItems.findIndex((function(entry){return entry.activitySlug===siblingId})))<0?(console.warn("couldn't find sibling ".concat(siblingId,", shouldn't be possible")),sequenceItems.push(item)):sequenceItems.splice(_siblingEntryIndex+1,0,item):sequenceItems.push(item);case 19:return(newGroup=(0,utils_common__WEBPACK_IMPORTED_MODULE_0__.d9)(group)).children=sequenceItems,dispatch((0,_delivery_store_features_groups_slice__WEBPACK_IMPORTED_MODULE_2__.V9)({group:newGroup})),_context.abrupt("return",newGroup);case 23:case"end":return _context.stop()}}),_callee)})));return function(_x,_x2){return _ref2.apply(this,arguments)}}())},"./src/stories/TorusBG.tsx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.d(__webpack_exports__,{Y:()=>TorusBG});__webpack_require__("./node_modules/react/index.js");var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__("./node_modules/react/jsx-runtime.js"),TorusBG=function TorusBG(_ref){var children=_ref.children,className=_ref.className,dark=_ref.dark,style=_ref.style;return(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsxs)("div",{className:"w-full min-w-[800px]",children:[(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"p-6 relative bg-delivery-body  text-delivery-body-color  ".concat(className),style,children}),dark&&(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{className:"dark",children:(0,react_jsx_runtime__WEBPACK_IMPORTED_MODULE_1__.jsx)("div",{style,className:"p-6 relative  dark:bg-delivery-body-dark  dark:text-delivery-body-color-dark ".concat(className),children})})]})};TorusBG.displayName="TorusBG",TorusBG.defaultProps={dark:!0};try{TorusBG.displayName="TorusBG",TorusBG.__docgenInfo={description:"",displayName:"TorusBG",props:{className:{defaultValue:null,description:"",name:"className",required:!1,type:{name:"string"}},dark:{defaultValue:{value:"true"},description:"",name:"dark",required:!1,type:{name:"boolean"}},style:{defaultValue:null,description:"",name:"style",required:!1,type:{name:"Record<string, string>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/stories/TorusBG.tsx#TorusBG"]={docgenInfo:TorusBG.__docgenInfo,name:"TorusBG",path:"src/stories/TorusBG.tsx#TorusBG"})}catch(__react_docgen_typescript_loader_error){}}}]);