/*! For license information please see stories-advanced-authoring-FlowchartComponents-stories-mdx.4d51afe1.iframe.bundle.js.LICENSE.txt */
"use strict";(self.webpackChunkoli=self.webpackChunkoli||[]).push([[111],{"./src/stories/advanced-authoring/FlowchartComponents.stories.mdx":(__unused_webpack_module,__webpack_exports__,__webpack_require__)=>{__webpack_require__.r(__webpack_exports__),__webpack_require__.d(__webpack_exports__,{default:()=>FlowchartComponents_stories,screenButton:()=>screenButton,screenNode:()=>screenNode,sidebar:()=>sidebar,topFlowchartModeToolbar:()=>topFlowchartModeToolbar,topPageEditModeToolbar:()=>topPageEditModeToolbar});var react=__webpack_require__("./node_modules/react/index.js"),lib=__webpack_require__("./node_modules/@mdx-js/react/lib/index.js"),dist=__webpack_require__("./node_modules/@storybook/addon-docs/dist/index.mjs"),jsx_runtime=__webpack_require__("./node_modules/react/jsx-runtime.js"),EndNode=function EndNode(props){return _jsxs(_Fragment,{children:[_jsx(Handle,{type:"target",position:Position.Left,style:{display:"none"}}),_jsx(EndNodeBody,{}),_jsx(Handle,{type:"source",position:Position.Right,id:"a",style:{display:"none"}})]})},EndNodeBody=function EndNodeBody(){return(0,jsx_runtime.jsx)("div",{className:"flowchart-end-node",children:(0,jsx_runtime.jsx)("span",{children:"End"})})};EndNodeBody.displayName="EndNodeBody";try{EndNode.displayName="EndNode",EndNode.__docgenInfo={description:"",displayName:"EndNode",props:{data:{defaultValue:null,description:"",name:"data",required:!0,type:{name:"FlowchartPlaceholderNodeData"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/chart-components/PlaceholderNode.tsx#EndNode"]={docgenInfo:EndNode.__docgenInfo,name:"EndNode",path:"src/apps/authoring/components/Flowchart/chart-components/PlaceholderNode.tsx#EndNode"})}catch(__react_docgen_typescript_loader_error){}try{EndNodeBody.displayName="EndNodeBody",EndNodeBody.__docgenInfo={description:"",displayName:"EndNodeBody",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/chart-components/PlaceholderNode.tsx#EndNodeBody"]={docgenInfo:EndNodeBody.__docgenInfo,name:"EndNodeBody",path:"src/apps/authoring/components/Flowchart/chart-components/PlaceholderNode.tsx#EndNodeBody"})}catch(__react_docgen_typescript_loader_error){}var ScreenButton=__webpack_require__("./src/apps/authoring/components/Flowchart/chart-components/ScreenButton.tsx"),ScreenNode=__webpack_require__("./src/apps/authoring/components/Flowchart/chart-components/ScreenNode.tsx"),es=__webpack_require__("./node_modules/react-redux/es/index.js"),slice=__webpack_require__("./src/apps/delivery/store/features/activities/slice.ts"),deck=__webpack_require__("./src/apps/delivery/store/features/groups/selectors/deck.ts"),add_path=__webpack_require__("./src/apps/authoring/components/Flowchart/flowchart-actions/add-path.ts"),redux_toolkit_esm=__webpack_require__("./node_modules/@reduxjs/toolkit/dist/redux-toolkit.esm.js"),common=__webpack_require__("./src/utils/common.ts"),saveActivity=__webpack_require__("./src/apps/authoring/store/activities/actions/saveActivity.ts"),flowchart_name=__webpack_require__("./src/apps/authoring/store/flowchart/name.ts");function _typeof(obj){return _typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},_typeof(obj)}function _regeneratorRuntime(){_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var changeTitle=(0,redux_toolkit_esm.hg)("".concat(flowchart_name.D,"/changeTitle"),function(){var _ref2=function _asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(_regeneratorRuntime().mark((function _callee(payload,_ref){var dispatch,getState,newTitle,screenId,rootState,screen,modifiedScreen;return _regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(dispatch=_ref.dispatch,getState=_ref.getState,newTitle=payload.newTitle,screenId=payload.screenId,rootState=getState(),screen=(0,common.Cw)((0,slice.ho)(rootState,screenId))){_context.next=6;break}return _context.abrupt("return");case 6:return(modifiedScreen=(0,common.d9)(screen)).title=newTitle,dispatch((0,saveActivity.d)({activity:modifiedScreen,undoable:!1,immediate:!0})),_context.next=11,dispatch((0,slice.Xx)({activity:modifiedScreen}));case 11:case"end":return _context.stop()}}),_callee)})));return function(_x,_x2){return _ref2.apply(this,arguments)}}()),path_options=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-options.ts"),screen_validation=__webpack_require__("./src/apps/authoring/components/Flowchart/screens/screen-validation.tsx"),CloseIcon=function CloseIcon(){return(0,jsx_runtime.jsxs)("svg",{width:24,height:24,viewBox:"0 0 24 24",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,jsx_runtime.jsx)("g",{clipPath:"url(#clip0_304_16156)",stroke:"#222439",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:(0,jsx_runtime.jsx)("path",{d:"M6.343 6.343l11.314 11.314M6.343 17.657L17.657 6.344"})}),(0,jsx_runtime.jsx)("defs",{children:(0,jsx_runtime.jsx)("clipPath",{id:"clip0_304_16156",children:(0,jsx_runtime.jsx)("path",{fill:"#fff",d:"M0 0H24V24H0z"})})})]})};CloseIcon.displayName="CloseIcon";try{CloseIcon.displayName="CloseIcon",CloseIcon.__docgenInfo={description:"",displayName:"CloseIcon",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/sidebar/CloseIcon.tsx#CloseIcon"]={docgenInfo:CloseIcon.__docgenInfo,name:"CloseIcon",path:"src/apps/authoring/components/Flowchart/sidebar/CloseIcon.tsx#CloseIcon"})}catch(__react_docgen_typescript_loader_error){}var InfoIcon=function InfoIcon(){return(0,jsx_runtime.jsxs)("svg",{width:20,height:20,viewBox:"0 0 20 20",fill:"none",xmlns:"http://www.w3.org/2000/svg",children:[(0,jsx_runtime.jsx)("g",{clipPath:"url(#clip0_372_26743)",stroke:"#222439",strokeWidth:1.5,strokeLinecap:"round",strokeLinejoin:"round",children:(0,jsx_runtime.jsx)("path",{d:"M10 18.335a8.333 8.333 0 100-16.667 8.333 8.333 0 000 16.667zM10 13.333V10M10 6.668h.009"})}),(0,jsx_runtime.jsx)("defs",{children:(0,jsx_runtime.jsx)("clipPath",{id:"clip0_372_26743",children:(0,jsx_runtime.jsx)("path",{fill:"#fff",d:"M0 0H20V20H0z"})})})]})};InfoIcon.displayName="InfoIcon";try{InfoIcon.displayName="InfoIcon",InfoIcon.__docgenInfo={description:"",displayName:"InfoIcon",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/sidebar/InfoIcon.tsx#InfoIcon"]={docgenInfo:InfoIcon.__docgenInfo,name:"InfoIcon",path:"src/apps/authoring/components/Flowchart/sidebar/InfoIcon.tsx#InfoIcon"})}catch(__react_docgen_typescript_loader_error){}var path_utils=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-utils.ts"),useToggle=__webpack_require__("./src/components/hooks/useToggle.ts"),flowchart_slice=__webpack_require__("./src/apps/authoring/store/flowchart/flowchart-slice.ts"),DeleteConfirmationModal=__webpack_require__("./src/apps/authoring/components/Modal/DeleteConfirmationModal.tsx"),delete_path=__webpack_require__("./src/apps/authoring/components/Flowchart/flowchart-actions/delete-path.ts"),replace_path=__webpack_require__("./src/apps/authoring/components/Flowchart/flowchart-actions/replace-path.ts");function PathEditor_typeof(obj){return PathEditor_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PathEditor_typeof(obj)}function ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function _objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?ownKeys(Object(source),!0).forEach((function(key){_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function _defineProperty(obj,key,value){return(key=function _toPropertyKey(arg){var key=function _toPrimitive(input,hint){if("object"!==PathEditor_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==PathEditor_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===PathEditor_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _slicedToArray(arr,i){return function _arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function _iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function _unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return _arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return _arrayLikeToArray(o,minLen)}(arr,i)||function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function _arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PathEditBox=function PathEditBox(_ref){var screenId=_ref.screenId,questionId=_ref.questionId,questionType=_ref.questionType,availablePaths=_ref.availablePaths,usedPathIds=_ref.usedPathIds,path=_ref.path,screens=_ref.screens,autoOpen=(0,es.v9)(flowchart_slice.sE),_useToggle2=_slicedToArray((0,useToggle.O)(!1),2),editMode=_useToggle2[0],toggleEditMode=_useToggle2[1],className=path.completed?"path-editor-completed":"path-editor-incomplete",dispatch=(0,es.I0)();return editMode||autoOpen===path.id?(0,jsx_runtime.jsx)(PathEditor,{questionType,className,availablePaths,path,screenId,questionId,screens,toggleEditMode,usedPathIds,onChange:function onChange(newPath){return function onPathChanged(oldPathId,newPath){dispatch((0,replace_path.u)({oldPathId,newPath:(0,path_utils.hu)(newPath,questionId),screenId}))}(path.id,newPath)}}):(0,jsx_runtime.jsx)(ReadOnlyPath,{path,screens,toggleEditMode,className})},PathEditor=function PathEditor(_ref2){var className=_ref2.className,availablePaths=_ref2.availablePaths,path=_ref2.path,toggleEditMode=_ref2.toggleEditMode,screens=_ref2.screens,questionId=_ref2.questionId,screenId=_ref2.screenId,onChange=_ref2.onChange,questionType=_ref2.questionType,usedPathIds=_ref2.usedPathIds,_useState2=_slicedToArray((0,react.useState)((0,common.d9)(path)),2),workingPath=_useState2[0],setWorkingPath=_useState2[1],_useToggle4=_slicedToArray((0,useToggle.O)(!1),2),showDeleteConfirm=_useToggle4[0],toggleDeleteConfirm=_useToggle4[1],dispatch=(0,es.I0)(),destinationScreens=(0,react.useMemo)((function(){var filtered=_objectSpread({},screens);return delete filtered[String(screenId)],filtered}),[screens,screenId]),availableWithCurrent=availablePaths.filter((function(pathOption){return("unknown-reason-path"!==path.type||"unknown-reason-path"!==pathOption.type)&&(pathOption.id===path.id||!usedPathIds.includes(pathOption.id))}));void 0===availableWithCurrent.find((function(p){return p.id===workingPath.id}))&&availableWithCurrent.push(workingPath),availableWithCurrent.sort(path_utils.Ih);var showQuestionLabel=(0,path_utils.W3)(workingPath)||(0,path_utils.fY)(workingPath)||(0,path_utils.uX)(workingPath);return(0,jsx_runtime.jsxs)("div",{className,children:[questionId&&showQuestionLabel&&(0,jsx_runtime.jsxs)("label",{children:["When ",questionType," is"]}),1===availableWithCurrent.length&&(0,jsx_runtime.jsx)("label",{children:availableWithCurrent[0].label}),availableWithCurrent.length>1&&(0,jsx_runtime.jsx)("select",{value:workingPath.id,onChange:function onChange(e){return function onIdChange(id){if(id!==workingPath.id){var target=availablePaths.find((function(p){return p.id===id}));if(target)if((0,path_utils.M6)(target)){var destinationScreenId=workingPath.destinationScreenId;setWorkingPath((0,path_utils.uM)(target,destinationScreenId))}else setWorkingPath(target)}}(e.target.value)},children:availableWithCurrent.map((function(path,index){return(0,jsx_runtime.jsx)("option",{value:path.id,children:path.label},index)}))}),(0,path_utils.M6)(workingPath)&&(0,jsx_runtime.jsxs)("div",{className:"destination-section",children:[(0,jsx_runtime.jsx)("label",{children:"Go to"}),(0,jsx_runtime.jsx)(DestinationPicker,{screens:destinationScreens,path:workingPath,onChange:function onDestinationChange(screenId){!function onEdit(props){setWorkingPath((function(p){return _objectSpread(_objectSpread({},p),props)}))}({destinationScreenId:parseInt(screenId,10)})}})]}),(0,jsx_runtime.jsxs)("div",{className:"bottom-buttons",children:[(0,jsx_runtime.jsx)("button",{onClick:toggleDeleteConfirm,className:"btn btn-danger",children:"Delete"}),(0,jsx_runtime.jsx)("button",{onClick:function onSave(){onChange(workingPath),toggleEditMode()},className:"btn btn-primary",children:"Done"})]}),showDeleteConfirm&&(0,jsx_runtime.jsx)(DeleteConfirmationModal.Z,{show:!0,elementType:"Rule",elementName:workingPath.label,deleteHandler:function onDelete(){dispatch((0,delete_path.e)({pathId:workingPath.id,screenId})),toggleDeleteConfirm()},cancelHandler:toggleDeleteConfirm})]})};PathEditor.displayName="PathEditor";var ReadOnlyPath=function ReadOnlyPath(_ref4){var path=_ref4.path,toggleEditMode=_ref4.toggleEditMode,className=_ref4.className,screens=_ref4.screens,prelabel=(0,path_utils.Jo)(path)?"Always ":(0,path_utils.W3)(path)||(0,path_utils.fY)(path)||(0,path_utils.uX)(path)?"If answer is ":"",goToLabel=(0,path_utils.M6)(path)?" go to ":"";return(0,jsx_runtime.jsxs)("div",{className,onClick:toggleEditMode,children:[prelabel,(0,jsx_runtime.jsx)("div",{className:"param-box",children:(0,jsx_runtime.jsx)("span",{className:"path-param",children:path.label})}),goToLabel,(0,jsx_runtime.jsx)("div",{className:"param-box",children:(0,path_utils.M6)(path)&&(0,jsx_runtime.jsx)(DestinationLabel,{path,screens})})]})};ReadOnlyPath.displayName="ReadOnlyPath";var DestinationPicker=function DestinationPicker(_ref5){var path=_ref5.path,screens=_ref5.screens,_onChange=_ref5.onChange;return(0,react.useEffect)((function(){var keys=Object.keys(screens);-1===path.destinationScreenId||keys.includes(String(path.destinationScreenId))||(keys.length>0?_onChange(Object.keys(screens)[0]):_onChange("-1"))}),[_onChange,screens]),(0,jsx_runtime.jsxs)("select",{value:String(path.destinationScreenId),onChange:function onChange(e){return _onChange(e.target.value)},children:[Object.keys(screens).map((function(screenId){return(0,jsx_runtime.jsx)("option",{value:screenId,children:screens[screenId]},screenId)})),(0,jsx_runtime.jsx)("option",{value:"-1",children:"-- Create new screen --"})]})};DestinationPicker.displayName="DestinationPicker";var DestinationLabel=function DestinationLabel(_ref6){var path=_ref6.path,screens=_ref6.screens,screenTitle=path.destinationScreenId&&screens?screens[path.destinationScreenId]:"Unknown";return(0,jsx_runtime.jsx)("span",{className:"path-param",children:screenTitle})};DestinationLabel.displayName="DestinationLabel";try{PathEditBox.displayName="PathEditBox",PathEditBox.__docgenInfo={description:"",displayName:"PathEditBox",props:{screenId:{defaultValue:null,description:"",name:"screenId",required:!0,type:{name:"EntityId"}},questionType:{defaultValue:null,description:"",name:"questionType",required:!0,type:{name:"string"}},availablePaths:{defaultValue:null,description:"",name:"availablePaths",required:!0,type:{name:"AllPaths[]"}},path:{defaultValue:null,description:"",name:"path",required:!0,type:{name:"AllPaths"}},questionId:{defaultValue:null,description:"",name:"questionId",required:!0,type:{name:"string | null"}},screens:{defaultValue:null,description:"",name:"screens",required:!0,type:{name:"Record<string, string>"}},usedPathIds:{defaultValue:null,description:"",name:"usedPathIds",required:!0,type:{name:"string[]"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/sidebar/PathEditor.tsx#PathEditBox"]={docgenInfo:PathEditBox.__docgenInfo,name:"PathEditBox",path:"src/apps/authoring/components/Flowchart/sidebar/PathEditor.tsx#PathEditBox"})}catch(__react_docgen_typescript_loader_error){}function _toConsumableArray(arr){return function _arrayWithoutHoles(arr){if(Array.isArray(arr))return PathsEditor_arrayLikeToArray(arr)}(arr)||function _iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||function PathsEditor_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return PathsEditor_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return PathsEditor_arrayLikeToArray(o,minLen)}(arr)||function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function PathsEditor_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var PathsEditor=function PathsEditor(_ref){var screenId=_ref.screenId,questionId=_ref.questionId,questionType=_ref.questionType,availablePaths=_ref.availablePaths,paths=_ref.paths,screens=_ref.screens,sortedPath=_toConsumableArray(paths).sort(path_utils.Ih),usedPathIds=paths.map((function(p){return p.id}));return(0,jsx_runtime.jsx)("div",{children:sortedPath.map((function(path,index){return(0,jsx_runtime.jsx)(PathEditBox,{screens,questionId,screenId,questionType,availablePaths,usedPathIds,path},path.id+String(index))}))})};PathsEditor.displayName="PathsEditor";try{PathsEditor.displayName="PathsEditor",PathsEditor.__docgenInfo={description:"",displayName:"PathsEditor",props:{questionType:{defaultValue:null,description:"",name:"questionType",required:!0,type:{name:"string"}},availablePaths:{defaultValue:null,description:"",name:"availablePaths",required:!0,type:{name:"AllPaths[]"}},paths:{defaultValue:null,description:"",name:"paths",required:!0,type:{name:"AllPaths[]"}},screenId:{defaultValue:null,description:"",name:"screenId",required:!0,type:{name:"EntityId"}},questionId:{defaultValue:null,description:"",name:"questionId",required:!0,type:{name:"string | null"}},screens:{defaultValue:null,description:"",name:"screens",required:!0,type:{name:"Record<string, string>"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/sidebar/PathsEditor.tsx#PathsEditor"]={docgenInfo:PathsEditor.__docgenInfo,name:"PathsEditor",path:"src/apps/authoring/components/Flowchart/sidebar/PathsEditor.tsx#PathsEditor"})}catch(__react_docgen_typescript_loader_error){}var ScreenEditIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/chart-components/ScreenEditIcon.tsx"),ScreenIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/chart-components/ScreenIcon.tsx"),screen_icons=__webpack_require__("./src/apps/authoring/components/Flowchart/screen-icons/screen-icons.tsx");function ScreenTitle_slicedToArray(arr,i){return function ScreenTitle_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ScreenTitle_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ScreenTitle_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ScreenTitle_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ScreenTitle_arrayLikeToArray(o,minLen)}(arr,i)||function ScreenTitle_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ScreenTitle_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ScreenTitle=function ScreenTitle(_ref){var screenType=_ref.screenType,title=_ref.title,validated=_ref.validated,onChange=_ref.onChange,_useState2=ScreenTitle_slicedToArray((0,react.useState)(!1),2),editingTitle=_useState2[0],setEditingTitle=_useState2[1],_useState4=ScreenTitle_slicedToArray((0,react.useState)(title),2),newTitle=_useState4[0],setNewTitle=_useState4[1],handleTitleClick=(0,react.useCallback)((function(){setEditingTitle(!0)}),[]),handleTitleChange=(0,react.useCallback)((function(event){setNewTitle(event.target.value)}),[]),handleTitleSubmit=(0,react.useCallback)((function(){title!==newTitle&&onChange(newTitle),setEditingTitle(!1)}),[newTitle,onChange,title]),handleRenameButtonClick=(0,react.useCallback)((function(){editingTitle?handleTitleSubmit():setEditingTitle(!0)}),[editingTitle,handleTitleSubmit]),handleKeyPress=(0,react.useCallback)((function(event){"Enter"===event.key&&handleTitleSubmit()}),[handleTitleSubmit]);return(0,jsx_runtime.jsxs)("div",{className:"screen-title",onClick:handleTitleClick,children:[(0,jsx_runtime.jsx)(ScreenIcon.p,{screenType,bgColor:validated?screen_icons.Bw.VALIDATED:screen_icons.Bw.NOT_VALIDATED}),editingTitle?(0,jsx_runtime.jsx)("input",{className:"form-control",type:"text",value:newTitle,autoFocus:!0,onChange:handleTitleChange,onBlur:handleTitleSubmit,onKeyPress:handleKeyPress}):(0,jsx_runtime.jsx)("span",{children:newTitle}),(0,jsx_runtime.jsx)(ScreenButton.c,{tooltip:"Rename Screen",onClick:handleRenameButtonClick,children:(0,jsx_runtime.jsx)(ScreenEditIcon.s,{})})]})};ScreenTitle.displayName="ScreenTitle";const sidebar_ScreenTitle=ScreenTitle;try{ScreenTitle.displayName="ScreenTitle",ScreenTitle.__docgenInfo={description:"",displayName:"ScreenTitle",props:{screenType:{defaultValue:null,description:"",name:"screenType",required:!1,type:{name:"string"}},title:{defaultValue:null,description:"",name:"title",required:!0,type:{name:"string"}},validated:{defaultValue:null,description:"",name:"validated",required:!1,type:{name:"boolean"}},onChange:{defaultValue:null,description:"",name:"onChange",required:!0,type:{name:"(newTitle: string) => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/sidebar/ScreenTitle.tsx#ScreenTitle"]={docgenInfo:ScreenTitle.__docgenInfo,name:"ScreenTitle",path:"src/apps/authoring/components/Flowchart/sidebar/ScreenTitle.tsx#ScreenTitle"})}catch(__react_docgen_typescript_loader_error){}function FlowchartSidebar_typeof(obj){return FlowchartSidebar_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},FlowchartSidebar_typeof(obj)}function FlowchartSidebar_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function FlowchartSidebar_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?FlowchartSidebar_ownKeys(Object(source),!0).forEach((function(key){FlowchartSidebar_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):FlowchartSidebar_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function FlowchartSidebar_defineProperty(obj,key,value){return(key=function FlowchartSidebar_toPropertyKey(arg){var key=function FlowchartSidebar_toPrimitive(input,hint){if("object"!==FlowchartSidebar_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==FlowchartSidebar_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===FlowchartSidebar_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}var FlowchartSidebar=function FlowchartSidebar(){var selected=(0,es.v9)(slice.by);return(0,jsx_runtime.jsxs)("div",{className:"flowchart-sidebar",children:[selected&&(0,jsx_runtime.jsx)(SelectedScreen,{screen:selected}),!!selected||(0,jsx_runtime.jsxs)("div",{className:"none-selected",children:[(0,jsx_runtime.jsx)(InfoIcon,{}),(0,jsx_runtime.jsxs)("span",{children:["Please ",(0,jsx_runtime.jsx)("b",{children:"select screen"})," to build the logic between screens."]})]})]})};FlowchartSidebar.displayName="FlowchartSidebar";var SelectedScreen=function SelectedScreen(_ref){var _screen$authoring,_screen$authoring$flo,_screen$authoring2,_screen$authoring2$fl,_screen$authoring3,_screen$authoring3$fl,screen=_ref.screen,primaryQuestion=(0,path_options.Kw)(screen),questionType=(0,path_options.oI)(screen),questionTypeLabel=path_options.im[questionType],activities=(0,es.v9)(slice.N3),sequence=(0,es.v9)(deck.nu),validations=(0,screen_validation.vj)(screen,activities,sequence),dispatch=(0,es.I0)(),onChangeTitle=(0,react.useCallback)((function(newTitle){dispatch(changeTitle({screenId:screen.id,newTitle}))}),[dispatch,screen.id]),onDeselectScreen=(0,react.useCallback)((function(){dispatch((0,slice.i6)({activityId:null}))}),[dispatch]),screens=(0,react.useMemo)((function(){return activities.reduce((function(acc,activity){return FlowchartSidebar_objectSpread(FlowchartSidebar_objectSpread({},acc),{},FlowchartSidebar_defineProperty({},activity.id,activity.title||"Untitled"))}),{})}),[activities]),paths=(null===(_screen$authoring=screen.authoring)||void 0===_screen$authoring||null===(_screen$authoring$flo=_screen$authoring.flowchart)||void 0===_screen$authoring$flo?void 0:_screen$authoring$flo.paths)||[],addPathDisabled="none"===questionType&&paths.length>0;return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsxs)("h2",{className:"edit-logic-header",children:["Edit logic for",(0,jsx_runtime.jsx)(ScreenButton.c,{onClick:onDeselectScreen,tooltip:"Deselect screen",children:(0,jsx_runtime.jsx)(CloseIcon,{})})]}),(0,jsx_runtime.jsx)(sidebar_ScreenTitle,{screenType:null===(_screen$authoring2=screen.authoring)||void 0===_screen$authoring2||null===(_screen$authoring2$fl=_screen$authoring2.flowchart)||void 0===_screen$authoring2$fl?void 0:_screen$authoring2$fl.screenType,title:screen.title||"Untitled",validated:0===validations.length,onChange:onChangeTitle},screen.id),(0,jsx_runtime.jsxs)("div",{className:"sidebar-scroller",children:[validations,"end_screen"!==(null===(_screen$authoring3=screen.authoring)||void 0===_screen$authoring3||null===(_screen$authoring3$fl=_screen$authoring3.flowchart)||void 0===_screen$authoring3$fl?void 0:_screen$authoring3$fl.screenType)&&(0,jsx_runtime.jsx)(PathsEditor,{screens,questionId:(null==primaryQuestion?void 0:primaryQuestion.id)||"",screenId:screen.id,questionType:questionTypeLabel,availablePaths:(0,path_options.S1)(screen),paths})]}),(0,jsx_runtime.jsx)("button",{disabled:addPathDisabled,onClick:function addRule(){dispatch((0,add_path.Q)({screenId:screen.id}))},className:"btn btn-primary flowchart-sidebar-button",children:"Add Rule"})]})};try{FlowchartSidebar.displayName="FlowchartSidebar",FlowchartSidebar.__docgenInfo={description:"",displayName:"FlowchartSidebar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/sidebar/FlowchartSidebar.tsx#FlowchartSidebar"]={docgenInfo:FlowchartSidebar.__docgenInfo,name:"FlowchartSidebar",path:"src/apps/authoring/components/Flowchart/sidebar/FlowchartSidebar.tsx#FlowchartSidebar"})}catch(__react_docgen_typescript_loader_error){}var OverlayTrigger=__webpack_require__("./node_modules/react-bootstrap/esm/OverlayTrigger.js"),Tooltip=__webpack_require__("./node_modules/react-bootstrap/esm/Tooltip.js"),parts_slice=__webpack_require__("./src/apps/authoring/store/parts/slice.ts");const hooks_useEventListener=function useEventListener(eventName,handler,element,options){var savedHandler=(0,react.useRef)(handler);(0,react.useEffect)((function(){savedHandler.current=handler}),[handler]),(0,react.useEffect)((function(){var _element$current,targetElement=null!==(_element$current=null==element?void 0:element.current)&&void 0!==_element$current?_element$current:window;if(targetElement&&targetElement.addEventListener){var listener=function listener(event){return savedHandler.current(event)};return targetElement.addEventListener(eventName,listener,options),function(){targetElement.removeEventListener(eventName,listener,options)}}}),[eventName,element,options])};function useHover_slicedToArray(arr,i){return function useHover_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function useHover_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function useHover_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return useHover_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return useHover_arrayLikeToArray(o,minLen)}(arr,i)||function useHover_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function useHover_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}const hooks_useHover=function useHover(elementRef){var _useState2=useHover_slicedToArray((0,react.useState)(!1),2),value=_useState2[0],setValue=_useState2[1];return hooks_useEventListener("mouseenter",(function handleMouseEnter(){return setValue(!0)}),elementRef),hooks_useEventListener("mouseleave",(function handleMouseLeave(){return setValue(!1)}),elementRef),value};var guid=__webpack_require__("./src/utils/guid.ts"),app_slice=__webpack_require__("./src/apps/authoring/store/app/slice.ts"),redo=__webpack_require__("./src/apps/authoring/store/history/actions/redo.ts"),undo=__webpack_require__("./src/apps/authoring/store/history/actions/undo.ts"),history_slice=__webpack_require__("./src/apps/authoring/store/history/slice.ts"),actions_sequence=__webpack_require__("./src/apps/delivery/store/features/groups/actions/sequence.ts"),parts_name=__webpack_require__("./src/apps/authoring/store/parts/name.ts");function addPart_typeof(obj){return addPart_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},addPart_typeof(obj)}function addPart_regeneratorRuntime(){addPart_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==addPart_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function addPart_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function addPart_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?addPart_ownKeys(Object(source),!0).forEach((function(key){addPart_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):addPart_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function addPart_defineProperty(obj,key,value){return(key=function addPart_toPropertyKey(arg){var key=function addPart_toPrimitive(input,hint){if("object"!==addPart_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==addPart_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===addPart_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function addPart_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}var addPart=(0,redux_toolkit_esm.hg)("".concat(parts_name.H,"/addPart"),function(){var _ref2=function addPart_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){addPart_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){addPart_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}(addPart_regeneratorRuntime().mark((function _callee(payload,_ref){var _sequenceEntry$custom,getState,dispatch,activityId,newPartData,rootState,activity,activityClone,sequence,sequenceEntry,partIdentifier,childrenToUpdate,_sequenceEntry$custom2,activityHierarchy,activitiesToUpdate;return addPart_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(getState=_ref.getState,dispatch=_ref.dispatch,activityId=payload.activityId,newPartData=payload.newPartData,rootState=getState(),activity=(0,slice.ho)(rootState,activityId)){_context.next=6;break}throw new Error("Activity: ".concat(activityId," not found!"));case 6:activityClone=(0,common.d9)(activity),sequence=(0,deck.nu)(rootState),sequenceEntry=(0,actions_sequence.xw)(sequence,activityClone.resourceId),partIdentifier={id:newPartData.id,type:newPartData.type,owner:(null==sequenceEntry||null===(_sequenceEntry$custom=sequenceEntry.custom)||void 0===_sequenceEntry$custom?void 0:_sequenceEntry$custom.sequenceId)||"",inherited:!1},"janus-text-flow"!==newPartData.type&&"janus-image"!==newPartData.type&&activityClone.authoring.parts.push(partIdentifier),activityClone.content.partsLayout.push(newPartData),childrenToUpdate=[],"janus-text-flow"!==newPartData.type&&"janus-image"!==newPartData.type&&(activityHierarchy=(0,actions_sequence._y)(sequence,null==sequenceEntry||null===(_sequenceEntry$custom2=sequenceEntry.custom)||void 0===_sequenceEntry$custom2?void 0:_sequenceEntry$custom2.sequenceId)).length&&(0,actions_sequence.Uv)(activityHierarchy).forEach((function(child){var childActivity=(0,slice.ho)(rootState,child.resourceId),childClone=(0,common.d9)(childActivity);childClone.authoring.parts.push(addPart_objectSpread(addPart_objectSpread({},partIdentifier),{},{inherited:!0})),childrenToUpdate.push(childClone)})),activitiesToUpdate=[activityClone].concat(childrenToUpdate),dispatch((0,saveActivity.V)({activities:activitiesToUpdate,undoable:!0}));case 16:case"end":return _context.stop()}}),_callee)})));return function(_x,_x2){return _ref2.apply(this,arguments)}}()),RightMenu=__webpack_require__("./src/apps/authoring/components/RightMenu/RightMenu.tsx"),groups_slice=__webpack_require__("./src/apps/delivery/store/features/groups/slice.ts"),savePage=__webpack_require__("./src/apps/authoring/store/page/actions/savePage.ts"),page_slice=__webpack_require__("./src/apps/authoring/store/page/slice.ts"),path_factories=__webpack_require__("./src/apps/authoring/components/Flowchart/paths/path-factories.ts"),rule_compilation=__webpack_require__("./src/apps/authoring/components/Flowchart/rules/rule-compilation.ts"),add_screen=__webpack_require__("./src/apps/authoring/components/Flowchart/flowchart-actions/add-screen.ts");function verify_flowchart_lesson_typeof(obj){return verify_flowchart_lesson_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},verify_flowchart_lesson_typeof(obj)}function verify_flowchart_lesson_toConsumableArray(arr){return function verify_flowchart_lesson_arrayWithoutHoles(arr){if(Array.isArray(arr))return verify_flowchart_lesson_arrayLikeToArray(arr)}(arr)||function verify_flowchart_lesson_iterableToArray(iter){if("undefined"!=typeof Symbol&&null!=iter[Symbol.iterator]||null!=iter["@@iterator"])return Array.from(iter)}(arr)||verify_flowchart_lesson_unsupportedIterableToArray(arr)||function verify_flowchart_lesson_nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function verify_flowchart_lesson_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function verify_flowchart_lesson_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?verify_flowchart_lesson_ownKeys(Object(source),!0).forEach((function(key){verify_flowchart_lesson_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):verify_flowchart_lesson_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function verify_flowchart_lesson_defineProperty(obj,key,value){return(key=function verify_flowchart_lesson_toPropertyKey(arg){var key=function verify_flowchart_lesson_toPrimitive(input,hint){if("object"!==verify_flowchart_lesson_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==verify_flowchart_lesson_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===verify_flowchart_lesson_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _createForOfIteratorHelper(o,allowArrayLike){var it="undefined"!=typeof Symbol&&o[Symbol.iterator]||o["@@iterator"];if(!it){if(Array.isArray(o)||(it=verify_flowchart_lesson_unsupportedIterableToArray(o))||allowArrayLike&&o&&"number"==typeof o.length){it&&(o=it);var i=0,F=function F(){};return{s:F,n:function n(){return i>=o.length?{done:!0}:{done:!1,value:o[i++]}},e:function e(_e){throw _e},f:F}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var err,normalCompletion=!0,didErr=!1;return{s:function s(){it=it.call(o)},n:function n(){var step=it.next();return normalCompletion=step.done,step},e:function e(_e2){didErr=!0,err=_e2},f:function f(){try{normalCompletion||null==it.return||it.return()}finally{if(didErr)throw err}}}}function verify_flowchart_lesson_unsupportedIterableToArray(o,minLen){if(o){if("string"==typeof o)return verify_flowchart_lesson_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);return"Object"===n&&o.constructor&&(n=o.constructor.name),"Map"===n||"Set"===n?Array.from(o):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?verify_flowchart_lesson_arrayLikeToArray(o,minLen):void 0}}function verify_flowchart_lesson_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}function verify_flowchart_lesson_regeneratorRuntime(){verify_flowchart_lesson_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==verify_flowchart_lesson_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function verify_flowchart_lesson_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function verify_flowchart_lesson_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){verify_flowchart_lesson_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){verify_flowchart_lesson_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}var verifyFlowchartLesson=(0,redux_toolkit_esm.hg)("".concat(flowchart_name.D,"/verifyFlowchartLesson"),function(){var _ref2=verify_flowchart_lesson_asyncToGenerator(verify_flowchart_lesson_regeneratorRuntime().mark((function _callee(payload,_ref){var dispatch,getState,rootState;return verify_flowchart_lesson_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:if(dispatch=_ref.dispatch,getState=_ref.getState,_context.prev=1,rootState=getState(),"flowchart"===(0,app_slice.Xi)(rootState)){_context.next=6;break}throw new Error("verifyFlowchartLesson can only be called when appMode is flowchart");case 6:return console.info("Verifying flowchart lesson data"),_context.next=9,verifySingleEmptyRule(getState,dispatch);case 9:return _context.next=11,verifyMaxAttempts(getState,dispatch);case 11:return _context.next=13,verifyStartScreenExists(getState,dispatch);case 13:return _context.next=15,verifyEndScreenExists(getState,dispatch);case 15:return _context.next=17,verifyEndScreenIsLastScreen(getState,dispatch);case 17:return _context.next=19,verifyEndScreenHasOnlyExitLessonPath(getState,dispatch);case 19:return _context.next=21,verifyFinishMessageExists(getState,dispatch);case 21:return _context.next=23,verifyAllRules(getState,dispatch);case 23:_context.next=29;break;case 25:throw _context.prev=25,_context.t0=_context.catch(1),dispatch((0,flowchart_slice.Hr)({error:JSON.stringify(_context.t0,Object.getOwnPropertyNames(_context.t0),2),title:"Could not validate lesson",message:"Something went wrong when attempting to validate this lesson. There is likely a problem with the lesson data that needs to be fixed before it can be delivered to learners. Please contact support for assistance.",failedActivity:null,info:null})),_context.t0;case 29:case"end":return _context.stop()}}),_callee,null,[[1,25]])})));return function(_x,_x2){return _ref2.apply(this,arguments)}}()),verifySingleEmptyRule=function(){var _ref3=verify_flowchart_lesson_asyncToGenerator(verify_flowchart_lesson_regeneratorRuntime().mark((function _callee2(getState,dispatch){var allActivities,_iterator,_step,_activity$authoring,_activity$authoring$f,_activity$authoring2,_activity$authoring2$,_activity$authoring3,_activity$authoring3$,activity,onlyPath;return verify_flowchart_lesson_regeneratorRuntime().wrap((function _callee2$(_context2){for(;;)switch(_context2.prev=_context2.next){case 0:allActivities=(0,slice.N3)(getState()),_iterator=_createForOfIteratorHelper(allActivities),_context2.prev=2,_iterator.s();case 4:if((_step=_iterator.n()).done){_context2.next=16;break}if(activity=_step.value,null!==(_activity$authoring=activity.authoring)&&void 0!==_activity$authoring&&null!==(_activity$authoring$f=_activity$authoring.flowchart)&&void 0!==_activity$authoring$f&&_activity$authoring$f.paths){_context2.next=8;break}return _context2.abrupt("continue",14);case 8:if(1===(null===(_activity$authoring2=activity.authoring)||void 0===_activity$authoring2||null===(_activity$authoring2$=_activity$authoring2.flowchart)||void 0===_activity$authoring2$?void 0:_activity$authoring2$.paths.length)){_context2.next=10;break}return _context2.abrupt("continue",14);case 10:if(onlyPath=null===(_activity$authoring3=activity.authoring)||void 0===_activity$authoring3||null===(_activity$authoring3$=_activity$authoring3.flowchart)||void 0===_activity$authoring3$?void 0:_activity$authoring3$.paths[0],!(0,path_utils.bU)(onlyPath)){_context2.next=14;break}return _context2.next=14,dispatch((0,replace_path.u)({oldPathId:onlyPath.id,newPath:(0,path_factories.WL)(onlyPath.destinationScreenId),screenId:activity.id}));case 14:_context2.next=4;break;case 16:_context2.next=21;break;case 18:_context2.prev=18,_context2.t0=_context2.catch(2),_iterator.e(_context2.t0);case 21:return _context2.prev=21,_iterator.f(),_context2.finish(21);case 24:case"end":return _context2.stop()}}),_callee2,null,[[2,18,21,24]])})));return function verifySingleEmptyRule(_x3,_x4){return _ref3.apply(this,arguments)}}(),verifyMaxAttempts=function(){var _ref4=verify_flowchart_lesson_asyncToGenerator(verify_flowchart_lesson_regeneratorRuntime().mark((function _callee3(getState,dispatch){var allActivities,_iterator2,_step2,_activity$content,activity,modifiedActivity;return verify_flowchart_lesson_regeneratorRuntime().wrap((function _callee3$(_context3){for(;;)switch(_context3.prev=_context3.next){case 0:allActivities=(0,slice.N3)(getState()),_iterator2=_createForOfIteratorHelper(allActivities),_context3.prev=2,_iterator2.s();case 4:if((_step2=_iterator2.n()).done){_context3.next=16;break}if(activity=_step2.value,null!==(_activity$content=activity.content)&&void 0!==_activity$content&&_activity$content.custom){_context3.next=8;break}return _context3.abrupt("continue",14);case 8:if(!(activity.content.custom.maxScore>0&&2!==activity.content.custom.maxAttempt)){_context3.next=14;break}return(modifiedActivity=(0,common.d9)(activity)).content.custom.maxAttempt=2,dispatch((0,saveActivity.d)({activity:modifiedActivity,undoable:!1,immediate:!0})),_context3.next=14,dispatch((0,slice.Xx)({activity:modifiedActivity}));case 14:_context3.next=4;break;case 16:_context3.next=21;break;case 18:_context3.prev=18,_context3.t0=_context3.catch(2),_iterator2.e(_context3.t0);case 21:return _context3.prev=21,_iterator2.f(),_context3.finish(21);case 24:case"end":return _context3.stop()}}),_callee3,null,[[2,18,21,24]])})));return function verifyMaxAttempts(_x5,_x6){return _ref4.apply(this,arguments)}}(),verifyAllRules=function(){var _ref5=verify_flowchart_lesson_asyncToGenerator(verify_flowchart_lesson_regeneratorRuntime().mark((function _callee4(getState,dispatch){var _allActivities$find,allActivities,sequence,defaultDestination,_iterator3,_step3,_activity$authoring4,_activity$authoring5,activity,calculatedRules,modifiedActivity;return verify_flowchart_lesson_regeneratorRuntime().wrap((function _callee4$(_context4){for(;;)switch(_context4.prev=_context4.next){case 0:allActivities=(0,slice.N3)(getState()),sequence=(0,deck.nu)(getState()),defaultDestination=(null===(_allActivities$find=allActivities.find((function(s){var _s$authoring,_s$authoring$flowchar;return"end_screen"===(null===(_s$authoring=s.authoring)||void 0===_s$authoring||null===(_s$authoring$flowchar=_s$authoring.flowchart)||void 0===_s$authoring$flowchar?void 0:_s$authoring$flowchar.screenType)})))||void 0===_allActivities$find?void 0:_allActivities$find.resourceId)||-1,_iterator3=_createForOfIteratorHelper(allActivities),_context4.prev=4,_iterator3.s();case 6:if((_step3=_iterator3.n()).done){_context4.next=21;break}if(activity=_step3.value,null!==(_activity$authoring4=activity.authoring)&&void 0!==_activity$authoring4&&_activity$authoring4.flowchart){_context4.next=10;break}return _context4.abrupt("continue",19);case 10:if(calculatedRules=(0,rule_compilation.$0)(activity,sequence,defaultDestination),(0,rule_compilation.Ft)(calculatedRules.rules,(null===(_activity$authoring5=activity.authoring)||void 0===_activity$authoring5?void 0:_activity$authoring5.rules)||[])){_context4.next=19;break}return console.info("Rules didn't match for activity",activity.resourceId),(modifiedActivity=(0,common.d9)(activity)).authoring.rules=calculatedRules.rules,modifiedActivity.authoring.variablesRequiredForEvaluation=calculatedRules.variables,dispatch((0,saveActivity.d)({activity:modifiedActivity,undoable:!1,immediate:!0})),_context4.next=19,dispatch((0,slice.Xx)({activity:modifiedActivity}));case 19:_context4.next=6;break;case 21:_context4.next=26;break;case 23:_context4.prev=23,_context4.t0=_context4.catch(4),_iterator3.e(_context4.t0);case 26:return _context4.prev=26,_iterator3.f(),_context4.finish(26);case 29:case"end":return _context4.stop()}}),_callee4,null,[[4,23,26,29]])})));return function verifyAllRules(_x7,_x8){return _ref5.apply(this,arguments)}}(),verifyFinishMessageExists=function(){var _ref6=verify_flowchart_lesson_asyncToGenerator(verify_flowchart_lesson_regeneratorRuntime().mark((function _callee5(getState,dispatch){var _page$custom,rootState,page,customPropExists,logoutMessage,newPage;return verify_flowchart_lesson_regeneratorRuntime().wrap((function _callee5$(_context5){for(;;)switch(_context5.prev=_context5.next){case 0:if(rootState=getState(),page=(0,page_slice.bz)(rootState),customPropExists=!!page.custom,logoutMessage=((null===(_page$custom=page.custom)||void 0===_page$custom?void 0:_page$custom.logoutMessage)||"").trim(),!customPropExists||0!==logoutMessage.length){_context5.next=9;break}return(newPage=(0,common.Cw)(page)).custom.logoutMessage="Thank you for completing this exercise.",_context5.next=9,dispatch((0,savePage.J)(verify_flowchart_lesson_objectSpread(verify_flowchart_lesson_objectSpread({},newPage),{},{undoable:!0})));case 9:case"end":return _context5.stop()}}),_callee5)})));return function verifyFinishMessageExists(_x9,_x10){return _ref6.apply(this,arguments)}}(),verifyStartScreenExists=function(){var _ref7=verify_flowchart_lesson_asyncToGenerator(verify_flowchart_lesson_regeneratorRuntime().mark((function _callee6(getState,dispatch){var rootState,sequence,screens,firstActivity;return verify_flowchart_lesson_regeneratorRuntime().wrap((function _callee6$(_context6){for(;;)switch(_context6.prev=_context6.next){case 0:if(rootState=getState(),sequence=(0,deck.nu)(rootState),screens=(0,slice.N3)(rootState),firstActivity=sequence.find((function(c){var _c$authoring,_c$authoring$flowchar;return!!c.resourceId&&"end_screen"!==(null===(_c$authoring=c.authoring)||void 0===_c$authoring||null===(_c$authoring$flowchar=_c$authoring.flowchart)||void 0===_c$authoring$flowchar?void 0:_c$authoring$flowchar.screenType)})),screens.find((function(s){return s.resourceId===(null==firstActivity?void 0:firstActivity.resourceId)}))){_context6.next=9;break}return console.info("Creating welcome screen"),_context6.next=9,dispatch((0,add_screen.m)({title:"Welcome Screen",screenType:"welcome_screen"}));case 9:case"end":return _context6.stop()}}),_callee6)})));return function verifyStartScreenExists(_x11,_x12){return _ref7.apply(this,arguments)}}(),verifyEndScreenExists=function(){var _ref8=verify_flowchart_lesson_asyncToGenerator(verify_flowchart_lesson_regeneratorRuntime().mark((function _callee7(getState,dispatch){var rootState,screens;return verify_flowchart_lesson_regeneratorRuntime().wrap((function _callee7$(_context7){for(;;)switch(_context7.prev=_context7.next){case 0:if(rootState=getState(),screens=(0,slice.N3)(rootState),screens.find((function(s){var _s$authoring2,_s$authoring2$flowcha;return"end_screen"===(null===(_s$authoring2=s.authoring)||void 0===_s$authoring2||null===(_s$authoring2$flowcha=_s$authoring2.flowchart)||void 0===_s$authoring2$flowcha?void 0:_s$authoring2$flowcha.screenType)}))){_context7.next=7;break}return console.info("Creating end screen"),_context7.next=7,dispatch((0,add_screen.m)({title:"End of Lesson",screenType:"end_screen",skipPathToNewScreen:!0}));case 7:case"end":return _context7.stop()}}),_callee7)})));return function verifyEndScreenExists(_x13,_x14){return _ref8.apply(this,arguments)}}(),verifyEndScreenIsLastScreen=function(){var _ref9=verify_flowchart_lesson_asyncToGenerator(verify_flowchart_lesson_regeneratorRuntime().mark((function _callee8(getState,dispatch){var rootState,sequence,screens,endScreen,index,newSequence,endSeq,currentGroup,newGroup;return verify_flowchart_lesson_regeneratorRuntime().wrap((function _callee8$(_context8){for(;;)switch(_context8.prev=_context8.next){case 0:if(rootState=getState(),sequence=(0,deck.nu)(rootState),screens=(0,slice.N3)(rootState),endScreen=screens.find((function(s){var _s$authoring3,_s$authoring3$flowcha;return"end_screen"===(null===(_s$authoring3=s.authoring)||void 0===_s$authoring3||null===(_s$authoring3$flowcha=_s$authoring3.flowchart)||void 0===_s$authoring3$flowcha?void 0:_s$authoring3$flowcha.screenType)})),(index=sequence.findIndex((function(s){return s.resourceId===(null==endScreen?void 0:endScreen.resourceId)})))===sequence.length-1){_context8.next=16;break}if(console.info("Moving end screen to the end of the sequence"),newSequence=verify_flowchart_lesson_toConsumableArray(sequence),endSeq=newSequence.splice(index,1),newSequence.push(endSeq[0]),!(currentGroup=(0,groups_slice.Ks)(rootState))){_context8.next=16;break}return newGroup=verify_flowchart_lesson_objectSpread(verify_flowchart_lesson_objectSpread({},currentGroup),{},{children:newSequence}),dispatch((0,groups_slice.V9)({group:newGroup})),_context8.next=16,dispatch((0,savePage.J)({undoable:!1}));case 16:case"end":return _context8.stop()}}),_callee8)})));return function verifyEndScreenIsLastScreen(_x15,_x16){return _ref9.apply(this,arguments)}}(),verifyEndScreenHasOnlyExitLessonPath=function(){var _ref10=verify_flowchart_lesson_asyncToGenerator(verify_flowchart_lesson_regeneratorRuntime().mark((function _callee9(getState,dispatch){var rootState,screens,_iterator4,_step4,_screen$authoring,_screen$authoring$flo,screen,_screen$authoring2,_screen$authoring2$fl,paths,modifiedScreen;return verify_flowchart_lesson_regeneratorRuntime().wrap((function _callee9$(_context9){for(;;)switch(_context9.prev=_context9.next){case 0:rootState=getState(),screens=(0,slice.N3)(rootState),_iterator4=_createForOfIteratorHelper(screens),_context9.prev=3,_iterator4.s();case 5:if((_step4=_iterator4.n()).done){_context9.next=18;break}if(screen=_step4.value,"end_screen"!==(null===(_screen$authoring=screen.authoring)||void 0===_screen$authoring||null===(_screen$authoring$flo=_screen$authoring.flowchart)||void 0===_screen$authoring$flo?void 0:_screen$authoring$flo.screenType)){_context9.next=16;break}if(1===(paths=null===(_screen$authoring2=screen.authoring)||void 0===_screen$authoring2||null===(_screen$authoring2$fl=_screen$authoring2.flowchart)||void 0===_screen$authoring2$fl?void 0:_screen$authoring2$fl.paths).length&&"exit-activity"===paths[0].type){_context9.next=16;break}return console.info("Replacing the paths in the end-screen with a single exit path"),(modifiedScreen=(0,common.d9)(screen)).authoring.flowchart.paths=[(0,path_factories.oK)()],dispatch((0,saveActivity.d)({activity:modifiedScreen,undoable:!1,immediate:!0})),_context9.next=16,dispatch((0,slice.Xx)({activity:modifiedScreen}));case 16:_context9.next=5;break;case 18:_context9.next=23;break;case 20:_context9.prev=20,_context9.t0=_context9.catch(3),_iterator4.e(_context9.t0);case 23:return _context9.prev=23,_iterator4.f(),_context9.finish(23);case 26:case"end":return _context9.stop()}}),_callee9,null,[[3,20,23,26]])})));return function verifyEndScreenHasOnlyExitLessonPath(_x17,_x18){return _ref10.apply(this,arguments)}}(),Modal=__webpack_require__("./node_modules/react-bootstrap/esm/Modal.js"),AdvancedAuthoringModal=__webpack_require__("./src/apps/authoring/components/AdvancedAuthoringModal.tsx"),InvalidScreenWarning=function InvalidScreenWarning(_ref){var screens=_ref.screens,onAccept=_ref.onAccept,onCancel=_ref.onCancel;return(0,jsx_runtime.jsxs)(AdvancedAuthoringModal.tv,{show:!0,onHide:onCancel,children:[(0,jsx_runtime.jsx)(Modal.Z.Header,{closeButton:!0,children:(0,jsx_runtime.jsx)("h3",{className:"modal-title",children:"Invalid screens detected"})}),(0,jsx_runtime.jsx)(Modal.Z.Body,{children:(0,jsx_runtime.jsxs)("p",{children:["Screens that don't pass validation may not function as expected. Please check the paths for the following screens:",(0,jsx_runtime.jsx)("ul",{className:"invalid-screen-list",children:screens.map((function(screen){return(0,jsx_runtime.jsx)("li",{children:screen.title},screen.id)}))})]})}),(0,jsx_runtime.jsxs)(Modal.Z.Footer,{children:[(0,jsx_runtime.jsx)("button",{onClick:onCancel,className:"btn btn-secondary",children:"Cancel"}),(0,jsx_runtime.jsx)("button",{onClick:onAccept,className:"btn btn-primary",children:"Preview Anyways"})]})]})};InvalidScreenWarning.displayName="InvalidScreenWarning";try{InvalidScreenWarning.displayName="InvalidScreenWarning",InvalidScreenWarning.__docgenInfo={description:"",displayName:"InvalidScreenWarning",props:{screens:{defaultValue:null,description:"",name:"screens",required:!0,type:{name:"IActivity[]"}},onAccept:{defaultValue:null,description:"",name:"onAccept",required:!0,type:{name:"() => void"}},onCancel:{defaultValue:null,description:"",name:"onCancel",required:!0,type:{name:"() => void"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/toolbar/InvalidScreenWarning.tsx#InvalidScreenWarning"]={docgenInfo:InvalidScreenWarning.__docgenInfo,name:"InvalidScreenWarning",path:"src/apps/authoring/components/Flowchart/toolbar/InvalidScreenWarning.tsx#InvalidScreenWarning"})}catch(__react_docgen_typescript_loader_error){}function PasteIcon_typeof(obj){return PasteIcon_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},PasteIcon_typeof(obj)}var _excluded=["color","size"];function PasteIcon_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function PasteIcon_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?PasteIcon_ownKeys(Object(source),!0).forEach((function(key){PasteIcon_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):PasteIcon_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function PasteIcon_defineProperty(obj,key,value){return(key=function PasteIcon_toPropertyKey(arg){var key=function PasteIcon_toPrimitive(input,hint){if("object"!==PasteIcon_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==PasteIcon_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===PasteIcon_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function _objectWithoutProperties(source,excluded){if(null==source)return{};var key,i,target=function _objectWithoutPropertiesLoose(source,excluded){if(null==source)return{};var key,i,target={},sourceKeys=Object.keys(source);for(i=0;i<sourceKeys.length;i++)key=sourceKeys[i],excluded.indexOf(key)>=0||(target[key]=source[key]);return target}(source,excluded);if(Object.getOwnPropertySymbols){var sourceSymbolKeys=Object.getOwnPropertySymbols(source);for(i=0;i<sourceSymbolKeys.length;i++)key=sourceSymbolKeys[i],excluded.indexOf(key)>=0||Object.prototype.propertyIsEnumerable.call(source,key)&&(target[key]=source[key])}return target}var PasteIcon=function PasteIcon(_ref){var _ref$color=_ref.color,color=void 0===_ref$color?"#000":_ref$color,_ref$size=_ref.size,size=void 0===_ref$size?32:_ref$size,props=_objectWithoutProperties(_ref,_excluded);return(0,jsx_runtime.jsxs)("svg",PasteIcon_objectSpread(PasteIcon_objectSpread({xmlns:"http://www.w3.org/2000/svg",x:"0px",y:"0px",width:"".concat(size,"px"),height:"".concat(size,"px"),viewBox:"0 0 409.084 409.084",xmlSpace:"preserve"},props),{},{children:[(0,jsx_runtime.jsx)("path",{fill:color,d:"M315.409 47.848c-2.164-17.512-17.084-31.071-35.181-31.071h-37.787v-4.686C242.442 5.413 237.028 0 230.35 0h-51.617c-6.678 0-12.091 5.413-12.091 12.091v4.686h-37.786c-18.097 0-33.017 13.559-35.181 31.071-33.161 6.37-58.299 35.586-58.299 70.578v192.991a71.862 71.862 0 0017.516 47.025 71.957 71.957 0 0037.391 22.829v12.813c0 8.284 6.716 15 15 15h200.182c8.284 0 15-6.716 15-15V380.87l1.403-.407c30.524-8.847 51.843-37.239 51.843-69.047V118.425c-.002-34.991-25.14-64.207-58.302-70.577zM120.281 379.084V167.156h112.494v56.56h57.688v155.367H120.281zm223.428-67.667c0 16.01-9.267 30.528-23.246 37.509V212.489c0-4.035-1.626-7.9-4.51-10.722l-61.666-60.333a15 15 0 00-10.49-4.278H105.281c-8.284 0-15 6.716-15 15v197.536c-14.737-6.604-24.906-21.538-24.906-38.275V118.425c0-18.236 11.72-33.778 28.019-39.514v7.799H315.69v-7.799c16.3 5.735 28.019 21.278 28.019 39.514v192.992z"}),(0,jsx_runtime.jsx)("path",{fill:color,d:"M144.702 249.531H266.04200000000003V269.531H144.702z"}),(0,jsx_runtime.jsx)("path",{fill:color,d:"M144.702 278.956H266.04200000000003V298.956H144.702z"}),(0,jsx_runtime.jsx)("path",{fill:color,d:"M144.702 308.382H266.04200000000003V328.382H144.702z"}),(0,jsx_runtime.jsx)("path",{fill:color,d:"M144.702 337.807H266.04200000000003V357.807H144.702z"})]}))};PasteIcon.displayName="PasteIcon";const toolbar_PasteIcon=PasteIcon;try{PasteIcon.displayName="PasteIcon",PasteIcon.__docgenInfo={description:"",displayName:"PasteIcon",props:{color:{defaultValue:{value:"#000"},description:"",name:"color",required:!1,type:{name:"string"}},size:{defaultValue:{value:"32"},description:"",name:"size",required:!1,type:{name:"number"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/toolbar/PasteIcon.tsx#PasteIcon"]={docgenInfo:PasteIcon.__docgenInfo,name:"PasteIcon",path:"src/apps/authoring/components/Flowchart/toolbar/PasteIcon.tsx#PasteIcon"})}catch(__react_docgen_typescript_loader_error){}var PreviewIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/PreviewIcon.tsx"),RedoIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/RedoIcon.tsx"),ScoringIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/ScoringIcon.tsx"),UndoIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/UndoIcon.tsx"),AudioIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/AudioIcon.tsx"),CarouselIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/CarouselIcon.tsx"),CheckboxIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/CheckboxIcon.tsx"),DropdownIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/DropdownIcon.tsx"),IframeIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/IframeIcon.tsx"),ImageIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/ImageIcon.tsx"),MultilineIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/MultilineIcon.tsx"),NumberInputIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/NumberInputIcon.tsx"),ParagraphIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/ParagraphIcon.tsx"),PopupIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/PopupIcon.tsx"),SliderIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/SliderIcon.tsx"),TextInputIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/TextInputIcon.tsx"),VideoIcon=__webpack_require__("./src/apps/authoring/components/Flowchart/toolbar/VideoIcon.tsx"),toolbarIcons={janus_text_flow:ParagraphIcon.l,janus_image:ImageIcon.X,janus_video:VideoIcon.O,janus_image_carousel:CarouselIcon._,janus_popup:PopupIcon.w,janus_audio:AudioIcon.f,janus_capi_iframe:IframeIcon.J,janus_mcq:CheckboxIcon.P,janus_input_text:TextInputIcon.c,janus_dropdown:DropdownIcon.K,janus_input_number:NumberInputIcon.o,janus_slider:SliderIcon.j,janus_multi_line_text:MultilineIcon.w},toolbarTooltips={janus_text_flow:"Text block",janus_image:"Image",janus_video:"Video",janus_image_carousel:"Image carousel",janus_popup:"Popup",janus_audio:"Audio",janus_capi_iframe:"Iframe / Webpage",janus_mcq:"Multiple choice question",janus_input_text:"Text input",janus_dropdown:"Dropdown",janus_input_number:"Number input",janus_slider:"Slider",janus_multi_line_text:"Multiline text input"};function FlowchartHeaderNav_typeof(obj){return FlowchartHeaderNav_typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(obj){return typeof obj}:function(obj){return obj&&"function"==typeof Symbol&&obj.constructor===Symbol&&obj!==Symbol.prototype?"symbol":typeof obj},FlowchartHeaderNav_typeof(obj)}function FlowchartHeaderNav_ownKeys(object,enumerableOnly){var keys=Object.keys(object);if(Object.getOwnPropertySymbols){var symbols=Object.getOwnPropertySymbols(object);enumerableOnly&&(symbols=symbols.filter((function(sym){return Object.getOwnPropertyDescriptor(object,sym).enumerable}))),keys.push.apply(keys,symbols)}return keys}function FlowchartHeaderNav_objectSpread(target){for(var i=1;i<arguments.length;i++){var source=null!=arguments[i]?arguments[i]:{};i%2?FlowchartHeaderNav_ownKeys(Object(source),!0).forEach((function(key){FlowchartHeaderNav_defineProperty(target,key,source[key])})):Object.getOwnPropertyDescriptors?Object.defineProperties(target,Object.getOwnPropertyDescriptors(source)):FlowchartHeaderNav_ownKeys(Object(source)).forEach((function(key){Object.defineProperty(target,key,Object.getOwnPropertyDescriptor(source,key))}))}return target}function FlowchartHeaderNav_defineProperty(obj,key,value){return(key=function FlowchartHeaderNav_toPropertyKey(arg){var key=function FlowchartHeaderNav_toPrimitive(input,hint){if("object"!==FlowchartHeaderNav_typeof(input)||null===input)return input;var prim=input[Symbol.toPrimitive];if(void 0!==prim){var res=prim.call(input,hint||"default");if("object"!==FlowchartHeaderNav_typeof(res))return res;throw new TypeError("@@toPrimitive must return a primitive value.")}return("string"===hint?String:Number)(input)}(arg,"string");return"symbol"===FlowchartHeaderNav_typeof(key)?key:String(key)}(key))in obj?Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}):obj[key]=value,obj}function FlowchartHeaderNav_regeneratorRuntime(){FlowchartHeaderNav_regeneratorRuntime=function _regeneratorRuntime(){return exports};var exports={},Op=Object.prototype,hasOwn=Op.hasOwnProperty,defineProperty=Object.defineProperty||function(obj,key,desc){obj[key]=desc.value},$Symbol="function"==typeof Symbol?Symbol:{},iteratorSymbol=$Symbol.iterator||"@@iterator",asyncIteratorSymbol=$Symbol.asyncIterator||"@@asyncIterator",toStringTagSymbol=$Symbol.toStringTag||"@@toStringTag";function define(obj,key,value){return Object.defineProperty(obj,key,{value,enumerable:!0,configurable:!0,writable:!0}),obj[key]}try{define({},"")}catch(err){define=function define(obj,key,value){return obj[key]=value}}function wrap(innerFn,outerFn,self,tryLocsList){var protoGenerator=outerFn&&outerFn.prototype instanceof Generator?outerFn:Generator,generator=Object.create(protoGenerator.prototype),context=new Context(tryLocsList||[]);return defineProperty(generator,"_invoke",{value:makeInvokeMethod(innerFn,self,context)}),generator}function tryCatch(fn,obj,arg){try{return{type:"normal",arg:fn.call(obj,arg)}}catch(err){return{type:"throw",arg:err}}}exports.wrap=wrap;var ContinueSentinel={};function Generator(){}function GeneratorFunction(){}function GeneratorFunctionPrototype(){}var IteratorPrototype={};define(IteratorPrototype,iteratorSymbol,(function(){return this}));var getProto=Object.getPrototypeOf,NativeIteratorPrototype=getProto&&getProto(getProto(values([])));NativeIteratorPrototype&&NativeIteratorPrototype!==Op&&hasOwn.call(NativeIteratorPrototype,iteratorSymbol)&&(IteratorPrototype=NativeIteratorPrototype);var Gp=GeneratorFunctionPrototype.prototype=Generator.prototype=Object.create(IteratorPrototype);function defineIteratorMethods(prototype){["next","throw","return"].forEach((function(method){define(prototype,method,(function(arg){return this._invoke(method,arg)}))}))}function AsyncIterator(generator,PromiseImpl){function invoke(method,arg,resolve,reject){var record=tryCatch(generator[method],generator,arg);if("throw"!==record.type){var result=record.arg,value=result.value;return value&&"object"==FlowchartHeaderNav_typeof(value)&&hasOwn.call(value,"__await")?PromiseImpl.resolve(value.__await).then((function(value){invoke("next",value,resolve,reject)}),(function(err){invoke("throw",err,resolve,reject)})):PromiseImpl.resolve(value).then((function(unwrapped){result.value=unwrapped,resolve(result)}),(function(error){return invoke("throw",error,resolve,reject)}))}reject(record.arg)}var previousPromise;defineProperty(this,"_invoke",{value:function value(method,arg){function callInvokeWithMethodAndArg(){return new PromiseImpl((function(resolve,reject){invoke(method,arg,resolve,reject)}))}return previousPromise=previousPromise?previousPromise.then(callInvokeWithMethodAndArg,callInvokeWithMethodAndArg):callInvokeWithMethodAndArg()}})}function makeInvokeMethod(innerFn,self,context){var state="suspendedStart";return function(method,arg){if("executing"===state)throw new Error("Generator is already running");if("completed"===state){if("throw"===method)throw arg;return doneResult()}for(context.method=method,context.arg=arg;;){var delegate=context.delegate;if(delegate){var delegateResult=maybeInvokeDelegate(delegate,context);if(delegateResult){if(delegateResult===ContinueSentinel)continue;return delegateResult}}if("next"===context.method)context.sent=context._sent=context.arg;else if("throw"===context.method){if("suspendedStart"===state)throw state="completed",context.arg;context.dispatchException(context.arg)}else"return"===context.method&&context.abrupt("return",context.arg);state="executing";var record=tryCatch(innerFn,self,context);if("normal"===record.type){if(state=context.done?"completed":"suspendedYield",record.arg===ContinueSentinel)continue;return{value:record.arg,done:context.done}}"throw"===record.type&&(state="completed",context.method="throw",context.arg=record.arg)}}}function maybeInvokeDelegate(delegate,context){var methodName=context.method,method=delegate.iterator[methodName];if(void 0===method)return context.delegate=null,"throw"===methodName&&delegate.iterator.return&&(context.method="return",context.arg=void 0,maybeInvokeDelegate(delegate,context),"throw"===context.method)||"return"!==methodName&&(context.method="throw",context.arg=new TypeError("The iterator does not provide a '"+methodName+"' method")),ContinueSentinel;var record=tryCatch(method,delegate.iterator,context.arg);if("throw"===record.type)return context.method="throw",context.arg=record.arg,context.delegate=null,ContinueSentinel;var info=record.arg;return info?info.done?(context[delegate.resultName]=info.value,context.next=delegate.nextLoc,"return"!==context.method&&(context.method="next",context.arg=void 0),context.delegate=null,ContinueSentinel):info:(context.method="throw",context.arg=new TypeError("iterator result is not an object"),context.delegate=null,ContinueSentinel)}function pushTryEntry(locs){var entry={tryLoc:locs[0]};1 in locs&&(entry.catchLoc=locs[1]),2 in locs&&(entry.finallyLoc=locs[2],entry.afterLoc=locs[3]),this.tryEntries.push(entry)}function resetTryEntry(entry){var record=entry.completion||{};record.type="normal",delete record.arg,entry.completion=record}function Context(tryLocsList){this.tryEntries=[{tryLoc:"root"}],tryLocsList.forEach(pushTryEntry,this),this.reset(!0)}function values(iterable){if(iterable){var iteratorMethod=iterable[iteratorSymbol];if(iteratorMethod)return iteratorMethod.call(iterable);if("function"==typeof iterable.next)return iterable;if(!isNaN(iterable.length)){var i=-1,next=function next(){for(;++i<iterable.length;)if(hasOwn.call(iterable,i))return next.value=iterable[i],next.done=!1,next;return next.value=void 0,next.done=!0,next};return next.next=next}}return{next:doneResult}}function doneResult(){return{value:void 0,done:!0}}return GeneratorFunction.prototype=GeneratorFunctionPrototype,defineProperty(Gp,"constructor",{value:GeneratorFunctionPrototype,configurable:!0}),defineProperty(GeneratorFunctionPrototype,"constructor",{value:GeneratorFunction,configurable:!0}),GeneratorFunction.displayName=define(GeneratorFunctionPrototype,toStringTagSymbol,"GeneratorFunction"),exports.isGeneratorFunction=function(genFun){var ctor="function"==typeof genFun&&genFun.constructor;return!!ctor&&(ctor===GeneratorFunction||"GeneratorFunction"===(ctor.displayName||ctor.name))},exports.mark=function(genFun){return Object.setPrototypeOf?Object.setPrototypeOf(genFun,GeneratorFunctionPrototype):(genFun.__proto__=GeneratorFunctionPrototype,define(genFun,toStringTagSymbol,"GeneratorFunction")),genFun.prototype=Object.create(Gp),genFun},exports.awrap=function(arg){return{__await:arg}},defineIteratorMethods(AsyncIterator.prototype),define(AsyncIterator.prototype,asyncIteratorSymbol,(function(){return this})),exports.AsyncIterator=AsyncIterator,exports.async=function(innerFn,outerFn,self,tryLocsList,PromiseImpl){void 0===PromiseImpl&&(PromiseImpl=Promise);var iter=new AsyncIterator(wrap(innerFn,outerFn,self,tryLocsList),PromiseImpl);return exports.isGeneratorFunction(outerFn)?iter:iter.next().then((function(result){return result.done?result.value:iter.next()}))},defineIteratorMethods(Gp),define(Gp,toStringTagSymbol,"Generator"),define(Gp,iteratorSymbol,(function(){return this})),define(Gp,"toString",(function(){return"[object Generator]"})),exports.keys=function(val){var object=Object(val),keys=[];for(var key in object)keys.push(key);return keys.reverse(),function next(){for(;keys.length;){var key=keys.pop();if(key in object)return next.value=key,next.done=!1,next}return next.done=!0,next}},exports.values=values,Context.prototype={constructor:Context,reset:function reset(skipTempReset){if(this.prev=0,this.next=0,this.sent=this._sent=void 0,this.done=!1,this.delegate=null,this.method="next",this.arg=void 0,this.tryEntries.forEach(resetTryEntry),!skipTempReset)for(var name in this)"t"===name.charAt(0)&&hasOwn.call(this,name)&&!isNaN(+name.slice(1))&&(this[name]=void 0)},stop:function stop(){this.done=!0;var rootRecord=this.tryEntries[0].completion;if("throw"===rootRecord.type)throw rootRecord.arg;return this.rval},dispatchException:function dispatchException(exception){if(this.done)throw exception;var context=this;function handle(loc,caught){return record.type="throw",record.arg=exception,context.next=loc,caught&&(context.method="next",context.arg=void 0),!!caught}for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i],record=entry.completion;if("root"===entry.tryLoc)return handle("end");if(entry.tryLoc<=this.prev){var hasCatch=hasOwn.call(entry,"catchLoc"),hasFinally=hasOwn.call(entry,"finallyLoc");if(hasCatch&&hasFinally){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0);if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}else if(hasCatch){if(this.prev<entry.catchLoc)return handle(entry.catchLoc,!0)}else{if(!hasFinally)throw new Error("try statement without catch or finally");if(this.prev<entry.finallyLoc)return handle(entry.finallyLoc)}}}},abrupt:function abrupt(type,arg){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc<=this.prev&&hasOwn.call(entry,"finallyLoc")&&this.prev<entry.finallyLoc){var finallyEntry=entry;break}}finallyEntry&&("break"===type||"continue"===type)&&finallyEntry.tryLoc<=arg&&arg<=finallyEntry.finallyLoc&&(finallyEntry=null);var record=finallyEntry?finallyEntry.completion:{};return record.type=type,record.arg=arg,finallyEntry?(this.method="next",this.next=finallyEntry.finallyLoc,ContinueSentinel):this.complete(record)},complete:function complete(record,afterLoc){if("throw"===record.type)throw record.arg;return"break"===record.type||"continue"===record.type?this.next=record.arg:"return"===record.type?(this.rval=this.arg=record.arg,this.method="return",this.next="end"):"normal"===record.type&&afterLoc&&(this.next=afterLoc),ContinueSentinel},finish:function finish(finallyLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.finallyLoc===finallyLoc)return this.complete(entry.completion,entry.afterLoc),resetTryEntry(entry),ContinueSentinel}},catch:function _catch(tryLoc){for(var i=this.tryEntries.length-1;i>=0;--i){var entry=this.tryEntries[i];if(entry.tryLoc===tryLoc){var record=entry.completion;if("throw"===record.type){var thrown=record.arg;resetTryEntry(entry)}return thrown}}throw new Error("illegal catch attempt")},delegateYield:function delegateYield(iterable,resultName,nextLoc){return this.delegate={iterator:values(iterable),resultName,nextLoc},"next"===this.method&&(this.arg=void 0),ContinueSentinel}},exports}function FlowchartHeaderNav_asyncGeneratorStep(gen,resolve,reject,_next,_throw,key,arg){try{var info=gen[key](arg),value=info.value}catch(error){return void reject(error)}info.done?resolve(value):Promise.resolve(value).then(_next,_throw)}function FlowchartHeaderNav_asyncToGenerator(fn){return function(){var self=this,args=arguments;return new Promise((function(resolve,reject){var gen=fn.apply(self,args);function _next(value){FlowchartHeaderNav_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"next",value)}function _throw(err){FlowchartHeaderNav_asyncGeneratorStep(gen,resolve,reject,_next,_throw,"throw",err)}_next(void 0)}))}}function FlowchartHeaderNav_slicedToArray(arr,i){return function FlowchartHeaderNav_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function FlowchartHeaderNav_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function FlowchartHeaderNav_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return FlowchartHeaderNav_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return FlowchartHeaderNav_arrayLikeToArray(o,minLen)}(arr,i)||function FlowchartHeaderNav_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function FlowchartHeaderNav_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var staticComponents=["janus_text_flow","janus_image","janus_video","janus_popup","janus_audio","janus_capi_iframe"],questionComponents=["janus_mcq","janus_input_text","janus_dropdown","janus_input_number","janus_slider","janus_multi_line_text"],ToolbarOption=function ToolbarOption(_ref){var component=_ref.component,onClick=_ref.onClick,_ref$disabled=_ref.disabled,disabled=void 0!==_ref$disabled&&_ref$disabled,ref=(0,react.useRef)(null),hover=hooks_useHover(ref),Icon=toolbarIcons[component];return(0,jsx_runtime.jsx)("button",{onClick,className:"component-button",disabled,ref,children:(0,jsx_runtime.jsx)(OverlayTrigger.Z,{placement:"bottom",delay:{show:150,hide:150},overlay:(0,jsx_runtime.jsxs)(Tooltip.Z,{placement:"top",id:"button-tooltip",style:{fontSize:"12px"},children:[(0,jsx_runtime.jsx)("strong",{children:toolbarTooltips[component]}),disabled&&(0,jsx_runtime.jsx)("div",{children:"Only one question component per screen is allowed"})]}),children:(0,jsx_runtime.jsx)(Icon,{fill:disabled?"#F3F5F8":hover?"#dce7f9":void 0,stroke:disabled?"#696974":void 0})},component)},component)};ToolbarOption.displayName="ToolbarOption";var FlowchartHeaderNav=function FlowchartHeaderNav(){var projectSlug=(0,es.v9)(app_slice.LJ),revisionSlug=(0,es.v9)(app_slice.T7),availablePartComponents=(0,es.v9)(app_slice.bo),currentActivityTree=(0,es.v9)(deck.kv),activities=(0,es.v9)(slice.N3),sequence=(0,es.v9)(deck.nu),dispatch=(0,es.I0)(),hasRedo=(0,es.v9)(history_slice.Z),hasUndo=(0,es.v9)(history_slice.NG),_React$useState2=FlowchartHeaderNav_slicedToArray(react.useState([]),2),invalidScreens=_React$useState2[0],setInvalidScreens=_React$useState2[1],paths=(0,es.v9)(app_slice.Dw),copiedPart=(0,es.v9)(app_slice.Yj),currentActivity=(0,es.v9)(slice.by),hasQuestion="none"!==(0,path_options.oI)(currentActivity),url="/authoring/project/".concat(projectSlug,"/preview/").concat(revisionSlug),windowName="preview-".concat(projectSlug),previewLesson=(0,react.useCallback)(FlowchartHeaderNav_asyncToGenerator(FlowchartHeaderNav_regeneratorRuntime().mark((function _callee(){var invalidScreens;return FlowchartHeaderNav_regeneratorRuntime().wrap((function _callee$(_context){for(;;)switch(_context.prev=_context.next){case 0:return _context.next=2,dispatch(verifyFlowchartLesson({}));case 2:(invalidScreens=activities.filter((function(activity){return(0,screen_validation.vj)(activity,activities,sequence).length>0}))).length>0?setInvalidScreens(invalidScreens):window.open(url,windowName);case 4:case"end":return _context.stop()}}),_callee)}))),[activities,dispatch,sequence,url,windowName]),onAcceptInvalid=(0,react.useCallback)((function(){setInvalidScreens([]),window.open(url,windowName)}),[url,windowName]),handleAddComponent=(0,react.useCallback)((function(partComponentType){return function(){if(availablePartComponents){var partComponent=availablePartComponents.find((function(p){return p.slug===partComponentType}));if(partComponent){var PartClass=customElements.get(partComponent.authoring_element);if(PartClass){var part=new PartClass,newPartData={id:"".concat(partComponentType,"-").concat((0,guid.Z)()),type:partComponent.delivery_element,custom:{x:10,y:10,z:0,width:100,height:100}},creationContext={transform:FlowchartHeaderNav_objectSpread({},newPartData.custom)};if(part.createSchema&&(newPartData.custom=FlowchartHeaderNav_objectSpread(FlowchartHeaderNav_objectSpread({},newPartData.custom),part.createSchema(creationContext))),currentActivityTree){var _currentActivity2=FlowchartHeaderNav_slicedToArray(currentActivityTree.slice(-1),1)[0];dispatch(addPart({activityId:_currentActivity2.id,newPartData}))}}}else console.warn("No part ".concat(partComponentType," found in registry!"),{availablePartComponents})}}}),[availablePartComponents,currentActivityTree,dispatch]);return paths&&(0,jsx_runtime.jsxs)("div",{className:"component-toolbar",children:[(0,jsx_runtime.jsxs)("div",{className:"toolbar-column",style:{flexBasis:"10%",maxWidth:50},children:[(0,jsx_runtime.jsx)("label",{children:"Undo"}),(0,jsx_runtime.jsx)("button",{className:"undo-redo-button",onClick:function handleUndo(){dispatch((0,undo.Y)(null))},disabled:!hasUndo,children:(0,jsx_runtime.jsx)(UndoIcon.U,{})})]}),(0,jsx_runtime.jsxs)("div",{className:"toolbar-column",style:{flexBasis:"10%",maxWidth:50},children:[(0,jsx_runtime.jsx)("label",{children:"Redo"}),(0,jsx_runtime.jsx)("button",{className:"undo-redo-button",onClick:function handleRedo(){dispatch((0,redo.K)(null))},disabled:!hasRedo,children:(0,jsx_runtime.jsx)(RedoIcon.z,{})})]}),(0,jsx_runtime.jsxs)("div",{className:"toolbar-column",style:{flexBasis:"42%"},children:[(0,jsx_runtime.jsx)("label",{children:"Static Components"}),(0,jsx_runtime.jsx)("div",{className:"toolbar-buttons",children:staticComponents.map((function(component){return(0,jsx_runtime.jsx)(ToolbarOption,{component,onClick:handleAddComponent(component)},component)}))})]}),(0,jsx_runtime.jsxs)("div",{className:"toolbar-column",style:{flexBasis:"42%"},children:[(0,jsx_runtime.jsx)("label",{children:"Question Components"}),(0,jsx_runtime.jsx)("div",{className:"toolbar-buttons",children:questionComponents.map((function(component){return(0,jsx_runtime.jsx)(ToolbarOption,{disabled:hasQuestion,component,onClick:handleAddComponent(component)},component)}))})]}),(0,jsx_runtime.jsxs)("div",{className:"toolbar-column",style:{flexBasis:"14%"},children:[(0,jsx_runtime.jsx)("label",{children:"Overview"}),(0,jsx_runtime.jsxs)("div",{className:"toolbar-buttons",children:[(0,jsx_runtime.jsx)(OverlayTrigger.Z,{placement:"bottom",delay:{show:150,hide:150},overlay:(0,jsx_runtime.jsx)(Tooltip.Z,{id:"button-tooltip",style:{fontSize:"12px"},children:"Preview Lesson"}),children:(0,jsx_runtime.jsx)("button",{onClick:previewLesson,className:"component-button",children:(0,jsx_runtime.jsx)(PreviewIcon.P,{})})}),(0,jsx_runtime.jsx)(OverlayTrigger.Z,{placement:"bottom",delay:{show:150,hide:150},overlay:(0,jsx_runtime.jsx)(Tooltip.Z,{id:"button-tooltip",style:{fontSize:"12px"},children:"Scoring Overview"}),children:(0,jsx_runtime.jsx)("button",{onClick:function handleScoringOverviewClick(){dispatch((0,app_slice.hu)({show:!0}))},className:"component-button",children:(0,jsx_runtime.jsx)(ScoringIcon.I,{})})}),copiedPart&&(0,jsx_runtime.jsx)(OverlayTrigger.Z,{placement:"bottom",delay:{show:150,hide:150},overlay:(0,jsx_runtime.jsx)(Tooltip.Z,{id:"button-tooltip",style:{fontSize:"12px"},children:"Paste Component"}),children:(0,jsx_runtime.jsx)("button",{className:"component-button",onClick:function handlePartPasteClick(){var newPartData={id:"".concat(copiedPart.type,"-").concat((0,guid.Z)()),type:copiedPart.type,custom:copiedPart.custom};!function addPartToCurrentScreen(newPartData){if(currentActivityTree){var _currentActivity=FlowchartHeaderNav_slicedToArray(currentActivityTree.slice(-1),1)[0];dispatch(addPart({activityId:_currentActivity.id,newPartData}))}}(newPartData),dispatch((0,parts_slice.ah)({selection:newPartData.id})),dispatch((0,app_slice.IJ)({rightPanelActiveTab:RightMenu.n.COMPONENT}))},children:(0,jsx_runtime.jsx)(toolbar_PasteIcon,{size:18,color:"#222439"})})})]})]}),invalidScreens.length>0&&(0,jsx_runtime.jsx)(InvalidScreenWarning,{screens:invalidScreens,onAccept:onAcceptInvalid,onCancel:function onCancel(){return setInvalidScreens([])}})]})};try{FlowchartHeaderNav.displayName="FlowchartHeaderNav",FlowchartHeaderNav.__docgenInfo={description:"",displayName:"FlowchartHeaderNav",props:{panelState:{defaultValue:null,description:"",name:"panelState",required:!0,type:{name:"any"}},isVisible:{defaultValue:null,description:"",name:"isVisible",required:!0,type:{name:"boolean"}},authoringContainer:{defaultValue:null,description:"",name:"authoringContainer",required:!0,type:{name:"RefObject<HTMLElement>"}},onToggleExport:{defaultValue:null,description:"",name:"onToggleExport",required:!1,type:{name:"(() => void)"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/toolbar/FlowchartHeaderNav.tsx#FlowchartHeaderNav"]={docgenInfo:FlowchartHeaderNav.__docgenInfo,name:"FlowchartHeaderNav",path:"src/apps/authoring/components/Flowchart/toolbar/FlowchartHeaderNav.tsx#FlowchartHeaderNav"})}catch(__react_docgen_typescript_loader_error){}var registration=__webpack_require__("./node_modules/react-dnd/dist/esm/internals/registration.mjs"),useIsomorphicLayoutEffect=__webpack_require__("./node_modules/react-dnd/dist/esm/hooks/useIsomorphicLayoutEffect.mjs");class DragSourceImpl{beginDrag(){const spec=this.spec,monitor=this.monitor;let result=null;return result="object"==typeof spec.item?spec.item:"function"==typeof spec.item?spec.item(monitor):{},null!=result?result:null}canDrag(){const spec=this.spec,monitor=this.monitor;return"boolean"==typeof spec.canDrag?spec.canDrag:"function"!=typeof spec.canDrag||spec.canDrag(monitor)}isDragging(globalMonitor,target){const spec=this.spec,monitor=this.monitor,{isDragging}=spec;return isDragging?isDragging(monitor):target===globalMonitor.getSourceId()}endDrag(){const spec=this.spec,monitor=this.monitor,connector=this.connector,{end}=spec;end&&end(monitor.getItem(),monitor),connector.reconnect()}constructor(spec,monitor,connector){this.spec=spec,this.monitor=monitor,this.connector=connector}}var useDragDropManager=__webpack_require__("./node_modules/react-dnd/dist/esm/hooks/useDragDropManager.mjs"),esm=__webpack_require__("./node_modules/react-dnd/node_modules/@react-dnd/invariant/dist/esm/index.mjs");function useRegisteredDragSource(spec,monitor,connector){const manager=(0,useDragDropManager.N)(),handler=function useDragSource(spec,monitor,connector){const handler=(0,react.useMemo)((()=>new DragSourceImpl(spec,monitor,connector)),[monitor,connector]);return(0,react.useEffect)((()=>{handler.spec=spec}),[spec]),handler}(spec,monitor,connector),itemType=function useDragType(spec){return(0,react.useMemo)((()=>{const result=spec.type;return(0,esm.k)(null!=result,"spec.type must be defined"),result}),[spec])}(spec);(0,useIsomorphicLayoutEffect.L)((function registerDragSource(){if(null!=itemType){const[handlerId,unregister]=(0,registration.w)(itemType,handler,manager);return monitor.receiveHandlerId(handlerId),connector.receiveHandlerId(handlerId),unregister}}),[manager,monitor,connector,handler,itemType])}var useOptionalFactory=__webpack_require__("./node_modules/react-dnd/dist/esm/hooks/useOptionalFactory.mjs");let isCallingCanDrag=!1,isCallingIsDragging=!1;class DragSourceMonitorImpl{receiveHandlerId(sourceId){this.sourceId=sourceId}getHandlerId(){return this.sourceId}canDrag(){(0,esm.k)(!isCallingCanDrag,"You may not call monitor.canDrag() inside your canDrag() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return isCallingCanDrag=!0,this.internalMonitor.canDragSource(this.sourceId)}finally{isCallingCanDrag=!1}}isDragging(){if(!this.sourceId)return!1;(0,esm.k)(!isCallingIsDragging,"You may not call monitor.isDragging() inside your isDragging() implementation. Read more: http://react-dnd.github.io/react-dnd/docs/api/drag-source-monitor");try{return isCallingIsDragging=!0,this.internalMonitor.isDraggingSource(this.sourceId)}finally{isCallingIsDragging=!1}}subscribeToStateChange(listener,options){return this.internalMonitor.subscribeToStateChange(listener,options)}isDraggingSource(sourceId){return this.internalMonitor.isDraggingSource(sourceId)}isOverTarget(targetId,options){return this.internalMonitor.isOverTarget(targetId,options)}getTargetIds(){return this.internalMonitor.getTargetIds()}isSourcePublic(){return this.internalMonitor.isSourcePublic()}getSourceId(){return this.internalMonitor.getSourceId()}subscribeToOffsetChange(listener){return this.internalMonitor.subscribeToOffsetChange(listener)}canDragSource(sourceId){return this.internalMonitor.canDragSource(sourceId)}canDropOnTarget(targetId){return this.internalMonitor.canDropOnTarget(targetId)}getItemType(){return this.internalMonitor.getItemType()}getItem(){return this.internalMonitor.getItem()}getDropResult(){return this.internalMonitor.getDropResult()}didDrop(){return this.internalMonitor.didDrop()}getInitialClientOffset(){return this.internalMonitor.getInitialClientOffset()}getInitialSourceClientOffset(){return this.internalMonitor.getInitialSourceClientOffset()}getSourceClientOffset(){return this.internalMonitor.getSourceClientOffset()}getClientOffset(){return this.internalMonitor.getClientOffset()}getDifferenceFromInitialOffset(){return this.internalMonitor.getDifferenceFromInitialOffset()}constructor(manager){this.sourceId=null,this.internalMonitor=manager.getMonitor()}}var wrapConnectorHooks=__webpack_require__("./node_modules/react-dnd/dist/esm/internals/wrapConnectorHooks.mjs"),isRef=__webpack_require__("./node_modules/react-dnd/dist/esm/internals/isRef.mjs"),dist_esm=__webpack_require__("./node_modules/@react-dnd/shallowequal/dist/esm/index.mjs");class SourceConnector{receiveHandlerId(newHandlerId){this.handlerId!==newHandlerId&&(this.handlerId=newHandlerId,this.reconnect())}get connectTarget(){return this.dragSource}get dragSourceOptions(){return this.dragSourceOptionsInternal}set dragSourceOptions(options){this.dragSourceOptionsInternal=options}get dragPreviewOptions(){return this.dragPreviewOptionsInternal}set dragPreviewOptions(options){this.dragPreviewOptionsInternal=options}reconnect(){const didChange=this.reconnectDragSource();this.reconnectDragPreview(didChange)}reconnectDragSource(){const dragSource=this.dragSource,didChange=this.didHandlerIdChange()||this.didConnectedDragSourceChange()||this.didDragSourceOptionsChange();return didChange&&this.disconnectDragSource(),this.handlerId?dragSource?(didChange&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragSource=dragSource,this.lastConnectedDragSourceOptions=this.dragSourceOptions,this.dragSourceUnsubscribe=this.backend.connectDragSource(this.handlerId,dragSource,this.dragSourceOptions)),didChange):(this.lastConnectedDragSource=dragSource,didChange):didChange}reconnectDragPreview(forceDidChange=!1){const dragPreview=this.dragPreview,didChange=forceDidChange||this.didHandlerIdChange()||this.didConnectedDragPreviewChange()||this.didDragPreviewOptionsChange();didChange&&this.disconnectDragPreview(),this.handlerId&&(dragPreview?didChange&&(this.lastConnectedHandlerId=this.handlerId,this.lastConnectedDragPreview=dragPreview,this.lastConnectedDragPreviewOptions=this.dragPreviewOptions,this.dragPreviewUnsubscribe=this.backend.connectDragPreview(this.handlerId,dragPreview,this.dragPreviewOptions)):this.lastConnectedDragPreview=dragPreview)}didHandlerIdChange(){return this.lastConnectedHandlerId!==this.handlerId}didConnectedDragSourceChange(){return this.lastConnectedDragSource!==this.dragSource}didConnectedDragPreviewChange(){return this.lastConnectedDragPreview!==this.dragPreview}didDragSourceOptionsChange(){return!(0,dist_esm.w)(this.lastConnectedDragSourceOptions,this.dragSourceOptions)}didDragPreviewOptionsChange(){return!(0,dist_esm.w)(this.lastConnectedDragPreviewOptions,this.dragPreviewOptions)}disconnectDragSource(){this.dragSourceUnsubscribe&&(this.dragSourceUnsubscribe(),this.dragSourceUnsubscribe=void 0)}disconnectDragPreview(){this.dragPreviewUnsubscribe&&(this.dragPreviewUnsubscribe(),this.dragPreviewUnsubscribe=void 0,this.dragPreviewNode=null,this.dragPreviewRef=null)}get dragSource(){return this.dragSourceNode||this.dragSourceRef&&this.dragSourceRef.current}get dragPreview(){return this.dragPreviewNode||this.dragPreviewRef&&this.dragPreviewRef.current}clearDragSource(){this.dragSourceNode=null,this.dragSourceRef=null}clearDragPreview(){this.dragPreviewNode=null,this.dragPreviewRef=null}constructor(backend){this.hooks=(0,wrapConnectorHooks.p)({dragSource:(node,options)=>{this.clearDragSource(),this.dragSourceOptions=options||null,(0,isRef.d)(node)?this.dragSourceRef=node:this.dragSourceNode=node,this.reconnectDragSource()},dragPreview:(node,options)=>{this.clearDragPreview(),this.dragPreviewOptions=options||null,(0,isRef.d)(node)?this.dragPreviewRef=node:this.dragPreviewNode=node,this.reconnectDragPreview()}}),this.handlerId=null,this.dragSourceRef=null,this.dragSourceOptionsInternal=null,this.dragPreviewRef=null,this.dragPreviewOptionsInternal=null,this.lastConnectedHandlerId=null,this.lastConnectedDragSource=null,this.lastConnectedDragSourceOptions=null,this.lastConnectedDragPreview=null,this.lastConnectedDragPreviewOptions=null,this.backend=backend}}var useCollectedProps=__webpack_require__("./node_modules/react-dnd/dist/esm/hooks/useCollectedProps.mjs");function useConnectDragSource(connector){return(0,react.useMemo)((()=>connector.hooks.dragSource()),[connector])}function useConnectDragPreview(connector){return(0,react.useMemo)((()=>connector.hooks.dragPreview()),[connector])}function useDrag(specArg,deps){const spec=(0,useOptionalFactory.w)(specArg,deps);(0,esm.k)(!spec.begin,"useDrag::spec.begin was deprecated in v14. Replace spec.begin() with spec.item(). (see more here - https://react-dnd.github.io/react-dnd/docs/api/use-drag)");const monitor=function useDragSourceMonitor(){const manager=(0,useDragDropManager.N)();return(0,react.useMemo)((()=>new DragSourceMonitorImpl(manager)),[manager])}(),connector=function useDragSourceConnector(dragSourceOptions,dragPreviewOptions){const manager=(0,useDragDropManager.N)(),connector=(0,react.useMemo)((()=>new SourceConnector(manager.getBackend())),[manager]);return(0,useIsomorphicLayoutEffect.L)((()=>(connector.dragSourceOptions=dragSourceOptions||null,connector.reconnect(),()=>connector.disconnectDragSource())),[connector,dragSourceOptions]),(0,useIsomorphicLayoutEffect.L)((()=>(connector.dragPreviewOptions=dragPreviewOptions||null,connector.reconnect(),()=>connector.disconnectDragPreview())),[connector,dragPreviewOptions]),connector}(spec.options,spec.previewOptions);return useRegisteredDragSource(spec,monitor,connector),[(0,useCollectedProps.J)(spec.collect,monitor,connector),useConnectDragSource(connector),useConnectDragPreview(connector)]}function ToolbarItem_slicedToArray(arr,i){return function ToolbarItem_arrayWithHoles(arr){if(Array.isArray(arr))return arr}(arr)||function ToolbarItem_iterableToArrayLimit(arr,i){var _i=null==arr?null:"undefined"!=typeof Symbol&&arr[Symbol.iterator]||arr["@@iterator"];if(null!=_i){var _s,_e,_x,_r,_arr=[],_n=!0,_d=!1;try{if(_x=(_i=_i.call(arr)).next,0===i){if(Object(_i)!==_i)return;_n=!1}else for(;!(_n=(_s=_x.call(_i)).done)&&(_arr.push(_s.value),_arr.length!==i);_n=!0);}catch(err){_d=!0,_e=err}finally{try{if(!_n&&null!=_i.return&&(_r=_i.return(),Object(_r)!==_r))return}finally{if(_d)throw _e}}return _arr}}(arr,i)||function ToolbarItem_unsupportedIterableToArray(o,minLen){if(!o)return;if("string"==typeof o)return ToolbarItem_arrayLikeToArray(o,minLen);var n=Object.prototype.toString.call(o).slice(8,-1);"Object"===n&&o.constructor&&(n=o.constructor.name);if("Map"===n||"Set"===n)return Array.from(o);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return ToolbarItem_arrayLikeToArray(o,minLen)}(arr,i)||function ToolbarItem_nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function ToolbarItem_arrayLikeToArray(arr,len){(null==len||len>arr.length)&&(len=arr.length);for(var i=0,arr2=new Array(len);i<len;i++)arr2[i]=arr[i];return arr2}var ToolbarItem=function ToolbarItem(_ref){var label=_ref.label,border=_ref.border,screenType=_ref.screenType,_useDrag2=ToolbarItem_slicedToArray(useDrag((function(){return{type:screenType,item:{label,screenType},collect:function collect(monitor){return{isDragging:monitor.isDragging(),handlerId:monitor.getHandlerId()}}}})),2),isDragging=_useDrag2[0].isDragging,drag=_useDrag2[1],className=border?"toolbar-option right-border":"toolbar-option",opacity=isDragging?.4:1,Icon=screen_icons._F[screenType];return(0,jsx_runtime.jsxs)("div",{className,ref:drag,style:{opacity},children:[(0,jsx_runtime.jsx)("div",{className:"toolbar-icon",children:(0,jsx_runtime.jsx)(Icon,{fill:"#F3F5F8"})}),label]})};ToolbarItem.displayName="ToolbarItem",ToolbarItem.defaultProps={border:!1};try{ToolbarItem.displayName="ToolbarItem",ToolbarItem.__docgenInfo={description:"",displayName:"ToolbarItem",props:{label:{defaultValue:null,description:"",name:"label",required:!0,type:{name:"string"}},screenType:{defaultValue:null,description:"",name:"screenType",required:!0,type:{name:"string"}},border:{defaultValue:{value:"false"},description:"",name:"border",required:!1,type:{name:"boolean"}}}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/toolbar/ToolbarItem.tsx#ToolbarItem"]={docgenInfo:ToolbarItem.__docgenInfo,name:"ToolbarItem",path:"src/apps/authoring/components/Flowchart/toolbar/ToolbarItem.tsx#ToolbarItem"})}catch(__react_docgen_typescript_loader_error){}var FlowchartTopToolbar=function FlowchartTopToolbar(){return(0,jsx_runtime.jsxs)("div",{className:"top-toolbar",children:[(0,jsx_runtime.jsx)("div",{className:"left-header",children:"Basic"}),(0,jsx_runtime.jsx)("div",{className:"right-header",children:"Screen with choices component"}),(0,jsx_runtime.jsx)(ToolbarItem,{label:"Blank screen",screenType:"blank_screen"}),(0,jsx_runtime.jsx)(ToolbarItem,{label:"Multiple choice",screenType:"multiple_choice"}),(0,jsx_runtime.jsx)(ToolbarItem,{label:"Multiline text input",screenType:"multiline_text"}),(0,jsx_runtime.jsx)(ToolbarItem,{label:"Slider",screenType:"slider"}),(0,jsx_runtime.jsx)("div",{}),(0,jsx_runtime.jsx)(ToolbarItem,{label:"Number input",screenType:"number_input"}),(0,jsx_runtime.jsx)(ToolbarItem,{label:"Text input",screenType:"text_input"}),(0,jsx_runtime.jsx)(ToolbarItem,{label:"Dropdown",screenType:"dropdown"})]})};FlowchartTopToolbar.displayName="FlowchartTopToolbar";try{FlowchartTopToolbar.displayName="FlowchartTopToolbar",FlowchartTopToolbar.__docgenInfo={description:"",displayName:"FlowchartTopToolbar",props:{}},"undefined"!=typeof STORYBOOK_REACT_CLASSES&&(STORYBOOK_REACT_CLASSES["src/apps/authoring/components/Flowchart/toolbar/FlowchartTopToolbar.tsx#FlowchartTopToolbar"]={docgenInfo:FlowchartTopToolbar.__docgenInfo,name:"FlowchartTopToolbar",path:"src/apps/authoring/components/Flowchart/toolbar/FlowchartTopToolbar.tsx#FlowchartTopToolbar"})}catch(__react_docgen_typescript_loader_error){}__webpack_require__("./styles/index.scss"),__webpack_require__("./src/stories/TorusBG.tsx");var AdvancedAuthorStorybookContext=__webpack_require__("./src/stories/advanced-authoring/AdvancedAuthorStorybookContext.tsx");function _createMdxContent(props){const _components=Object.assign({h1:"h1"},(0,lib.ah)(),props.components);return(0,jsx_runtime.jsxs)(jsx_runtime.Fragment,{children:[(0,jsx_runtime.jsx)(dist.h_,{title:"Advanced Authoring/Flowchart Components"}),"\n",(0,jsx_runtime.jsx)(_components.h1,{id:"top-page-edit-mode-toolbar",children:"Top Page Edit Mode Toolbar"}),"\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{name:"Top Page Edit Mode Toolbar",children:(0,jsx_runtime.jsx)(AdvancedAuthorStorybookContext.A,{className:"w-full",children:(0,jsx_runtime.jsx)("div",{className:"flex flex-row",style:{marginLeft:-240,marginRight:-240},children:(0,jsx_runtime.jsx)(FlowchartHeaderNav,{})})})})}),"\n",(0,jsx_runtime.jsx)(_components.h1,{id:"top-flowchart-mode-toolbar",children:"Top Flowchart Mode Toolbar"}),"\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{name:"Top Flowchart Mode Toolbar",children:(0,jsx_runtime.jsx)(AdvancedAuthorStorybookContext.A,{className:"w-full",children:(0,jsx_runtime.jsx)("div",{className:"w-full flex flex-row",children:(0,jsx_runtime.jsx)("div",{className:"flowchart-right",children:(0,jsx_runtime.jsx)(FlowchartTopToolbar,{})})})})})}),"\n",(0,jsx_runtime.jsx)(_components.h1,{id:"sidebar",children:"Sidebar"}),"\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{name:"Sidebar",children:(0,jsx_runtime.jsx)(AdvancedAuthorStorybookContext.A,{children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-row min-h-[300px]",children:[(0,jsx_runtime.jsx)(FlowchartSidebar,{}),(0,jsx_runtime.jsx)("div",{children:"Rest of content"})]})})})}),"\n",(0,jsx_runtime.jsx)(_components.h1,{id:"screen-node",children:"Screen Node"}),"\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{name:"Screen Node",children:(0,jsx_runtime.jsx)(AdvancedAuthorStorybookContext.A,{children:(0,jsx_runtime.jsx)(ScreenNode.K,{data:{id:"1",resourceId:1001,title:"Sample Screen",type:"screen",custom:{sequenceName:"Screen 1"}}})})})}),"\n",(0,jsx_runtime.jsx)(_components.h1,{id:"screen-button",children:"Screen Button"}),"\n",(0,jsx_runtime.jsx)(dist.Xz,{children:(0,jsx_runtime.jsx)(dist.oG,{name:"Screen Button",children:(0,jsx_runtime.jsx)(AdvancedAuthorStorybookContext.A,{children:(0,jsx_runtime.jsx)(ScreenButton.c,{tooltip:"Example Button",children:"Example"})})})})]})}const topPageEditModeToolbar=()=>(0,jsx_runtime.jsx)(AdvancedAuthorStorybookContext.A,{className:"w-full",children:(0,jsx_runtime.jsx)("div",{className:"flex flex-row",style:{marginLeft:-240,marginRight:-240},children:(0,jsx_runtime.jsx)(FlowchartHeaderNav,{})})});topPageEditModeToolbar.storyName="Top Page Edit Mode Toolbar",topPageEditModeToolbar.parameters={storySource:{source:'<AdvancedAuthorStorybookContext className="w-full"><div className="flex flex-row" style={{\n    marginLeft: -240,\n    marginRight: -240\n  }}><FlowchartHeaderNav /></div></AdvancedAuthorStorybookContext>'}};const topFlowchartModeToolbar=()=>(0,jsx_runtime.jsx)(AdvancedAuthorStorybookContext.A,{className:"w-full",children:(0,jsx_runtime.jsx)("div",{className:"w-full flex flex-row",children:(0,jsx_runtime.jsx)("div",{className:"flowchart-right",children:(0,jsx_runtime.jsx)(FlowchartTopToolbar,{})})})});topFlowchartModeToolbar.storyName="Top Flowchart Mode Toolbar",topFlowchartModeToolbar.parameters={storySource:{source:'<AdvancedAuthorStorybookContext className="w-full"><div className="w-full flex flex-row"><div className="flowchart-right"><FlowchartTopToolbar /></div></div></AdvancedAuthorStorybookContext>'}};const sidebar=()=>(0,jsx_runtime.jsx)(AdvancedAuthorStorybookContext.A,{children:(0,jsx_runtime.jsxs)("div",{className:"flex flex-row min-h-[300px]",children:[(0,jsx_runtime.jsx)(FlowchartSidebar,{}),(0,jsx_runtime.jsx)("div",{children:"Rest of content"})]})});sidebar.storyName="Sidebar",sidebar.parameters={storySource:{source:'<AdvancedAuthorStorybookContext><div className="flex flex-row min-h-[300px]"><FlowchartSidebar /><div>{"Rest of content"}</div></div></AdvancedAuthorStorybookContext>'}};const screenNode=()=>(0,jsx_runtime.jsx)(AdvancedAuthorStorybookContext.A,{children:(0,jsx_runtime.jsx)(ScreenNode.K,{data:{id:"1",resourceId:1001,title:"Sample Screen",type:"screen",custom:{sequenceName:"Screen 1"}}})});screenNode.storyName="Screen Node",screenNode.parameters={storySource:{source:'<AdvancedAuthorStorybookContext><ScreenNodeBody data={{\n    id: "1",\n    resourceId: 1001,\n    title: "Sample Screen",\n    type: "screen",\n    custom: {\n      sequenceName: "Screen 1"\n    }\n  }} /></AdvancedAuthorStorybookContext>'}};const screenButton=()=>(0,jsx_runtime.jsx)(AdvancedAuthorStorybookContext.A,{children:(0,jsx_runtime.jsx)(ScreenButton.c,{tooltip:"Example Button",children:"Example"})});screenButton.storyName="Screen Button",screenButton.parameters={storySource:{source:'<AdvancedAuthorStorybookContext><ScreenButton tooltip="Example Button">{"Example"}</ScreenButton></AdvancedAuthorStorybookContext>'}};const componentMeta={title:"Advanced Authoring/Flowchart Components",tags:["stories-mdx"],includeStories:["topPageEditModeToolbar","topFlowchartModeToolbar","sidebar","screenNode","screenButton"]};componentMeta.parameters=componentMeta.parameters||{},componentMeta.parameters.docs={...componentMeta.parameters.docs||{},page:function MDXContent(props={}){const{wrapper:MDXLayout}=Object.assign({},(0,lib.ah)(),props.components);return MDXLayout?(0,jsx_runtime.jsx)(MDXLayout,{...props,children:(0,jsx_runtime.jsx)(_createMdxContent,{...props})}):_createMdxContent(props)}};const FlowchartComponents_stories=componentMeta}}]);