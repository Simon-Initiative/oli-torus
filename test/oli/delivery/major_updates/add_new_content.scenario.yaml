# Scenario: Adding new content triggers a major update
# This scenario creates a project, section, then adds new pages and containers

# Create initial project structure
- project:
    name: "course_v1"
    title: "Introduction to Computer Science"
    root:
      children:
        - container: "Module 1"
          children:
            - page: "Introduction"
            - page: "Basic Concepts"
        - page: "Course Overview"

# Create a section from the project
- section:
    name: "cs101_section"
    from: "course_v1"
    title: "CS 101 - Fall 2024"

# Add new content (major update)
- manipulate:
    target: "course_v1"
    ops:
      - add_container:
          title: "Module 2"

      - add_page:
          title: "Advanced Topics"
          parent: "Module 2"

      - add_page:
          title: "Lab Exercise"
          parent: "Module 2"
      
      # Module 2 is already attached to root by default when created

- publish:
    target: "course_v1"
    description: "Adding Module 2 with new content"

# Apply the update to the section
- update:
    from: "course_v1"
    to: "cs101_section"

- verify:
    target: "cs101_section"
    structure:
      root:
        children:
            - container: "Module 1"
              children:
                - page: "Introduction"
                - page: "Basic Concepts"
            - page: "Course Overview"
            - container: "Module 2"
              children:
                - page: "Advanced Topics"
                - page: "Lab Exercise"