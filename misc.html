<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.28.5">
    <meta name="project" content="OLI Torus v0.25.0">

    <title>Miscelleanous — OLI Torus v0.25.0</title>
    <link rel="stylesheet" href="dist/elixir-64c5e2b63575bddb1c5b.css" />

    <script src="dist/sidebar_items-8dacb68999.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-b5f3440501744dc8be3d.js"></script>


  </head>
  <body data-type="extras">
    <script>

      try {
        var settings = JSON.parse(localStorage.getItem('ex_doc:settings') || '{}');

        if (settings.theme === 'dark' ||
           ((settings.theme === 'system' || settings.theme == null) &&
             window.matchMedia('(prefers-color-scheme: dark)').matches)
           ) {
          document.body.classList.add('dark')
        }
      } catch (error) { }
    </script>

<div class="main">


<section class="sidebar">
  <button class="sidebar-button sidebar-toggle" aria-label="toggle sidebar">
    <i class="ri-menu-line ri-lg" title="Collapse/expand sidebar"></i>
  </button>

  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <i class="ri-search-2-line" aria-hidden="true" title="Submit search"></i>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <i class="ri-close-line ri-lg" aria-hidden="true" title="Cancel search"></i>
    </button>
    <label class="search-label">
      <p class="sr-only">Search</p>
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">

      <a href="http://oli.cmu.edu">
        <img src="assets/logo.png" alt="OLI Torus" class="sidebar-projectImage">
      </a>

    <div class="sidebar-projectDetails">
      <a href="http://oli.cmu.edu" class="sidebar-projectName" translate="no">
OLI Torus
      </a>
      <strong class="sidebar-projectVersion" translate="no">
        v0.25.0
      </strong>
    </div>
    <ul class="sidebar-listNav">
      <li><a id="extras-list-link" href="#full-list">GUIDES</a></li>


    </ul>
  </div>

  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <output role="status" id="toast"></output>
  <div class="content-outer">
    <div id="content" class="content-inner">

<h1>
<button class="settings display-settings">
  <i class="ri-settings-3-line"></i>
  <span class="sr-only">Settings</span>
</button>


    <a href="https://github.com/Simon-Initiative/oli-torus/blob/main/guides/design/misc.md#L1" title="View Source" class="view-source" rel="help">
      <i class="ri-code-s-slash-line" aria-hidden="true"></i>
      <span class="sr-only">View Source</span>
    </a>

  <span>Miscelleanous</span>
</h1>

<h2 id="general-notes" class="section-heading">
  <a href="#general-notes" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">general-notes</p>
  </a>
  General Notes
</h2>
<ul><li><a href="https://github.com/riverrun/bcrypt_elixir">bcrypt_elixir</a> requires &gt;1 CPU core to function. If you have only one core, on say a small VPS, your release will crash without giving a useful error message!! For a single core host, use Pbkdf2 instead of Bcrypt. See here for more on this: <a href="https://github.com/riverrun/comeonin/wiki/Deployment">https://github.com/riverrun/comeonin/wiki/Deployment</a></li><li>Link account using social login will not work out of the box in development mode! This is because you must configure an exact url with the OAuth provider, and therefore a local ngrok tunnel address will not work. If you really need this to work, you can configure your OAuth provider with your temporary ngrok address e.g. <code class="inline">https://163400959f6a.ngrok.io/auth/google/link/callback</code>. Be sure to also set your HOST in oli.env to your ngrok address as well (e.g. <code class="inline">HOST=https://163400959f6a.ngrok.io</code>) or else you will be redirected to localhost by default after login and the user session will not be present for linking, because it was stored in the session for the ngrok address. Because of this complexity, it is recommended to simply use an email account to link accounts, which does not experience this issue.</li></ul><h2 id="access-generated-emails-in-development" class="section-heading">
  <a href="#access-generated-emails-in-development" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">access-generated-emails-in-development</p>
  </a>
  Access Generated Emails in Development
</h2>
<p>When the system generates email in production, generally it will be handed to an email service such as Amazon SES. Any email service supported by Bamboo can be configured in config/prod.exs. Refer to the Bamboo and Pow docs to see a list of all supported email adapters and how to configure them <a href="https://hexdocs.pm/pow/configuring_mailer.html#content">https://hexdocs.pm/pow/configuring_mailer.html#content</a>, <a href="https://hexdocs.pm/bamboo/readme.html">https://hexdocs.pm/bamboo/readme.html</a></p><p>In development mode, the system will use the Bamboo.LocalAdapter mailer, which stores sent mail in memory and is accessible via web browser at <code class="inline">https://localhost/dev/sent_emails</code>. There is also a specific test adapter configured for unit testing.</p><h2 id="create-registrations-from-seed" class="section-heading">
  <a href="#create-registrations-from-seed" class="hover-link"><i class="ri-link-m" aria-hidden="true"></i>
  <p class="sr-only">create-registrations-from-seed</p>
  </a>
  Create Registrations from seed
</h2>
<p>To ease the burden of creating a new registration after every database reset, there is the option to automatically create LTI registrations
attached to the default institution in dev environment by creating a registrations.json file in the project root.</p><p>Example:</p><pre><code class="makeup elixir" translate="no"><span class="p" data-group-id="4925833275-1">[</span><span class="p" data-group-id="4925833275-2">{</span><span class="w">
  </span><span class="ss">&quot;issuer&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://canvas.oli.cmu.edu&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;client_id&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;XXXXXXXXXXXXX&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;key_set_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://canvas.oli.cmu.edu/api/lti/security/jwks&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;auth_token_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://canvas.oli.cmu.edu/login/oauth2/token&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;auth_login_url&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://canvas.oli.cmu.edu/api/lti/authorize_redirect&quot;</span><span class="p">,</span><span class="w">
  </span><span class="ss">&quot;auth_server&quot;</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;https://canvas.oli.cmu.edu/login/oauth2/token&quot;</span><span class="w">
</span><span class="p" data-group-id="4925833275-2">}</span><span class="p" data-group-id="4925833275-1">]</span></code></pre><p>With this file, now when you run <code class="inline">mix ecto.seed</code> or <code class="inline">mix ecto.reset</code>, a registration with these details will be created for you.</p>
<div class="bottom-actions">
  <div class="bottom-actions-item">

      <a href="gdpr.html" class="bottom-actions-button" rel="prev">
        <span class="subheader">
          ← Previous Page
        </span>
        <span class="title">
GDPR compliance
        </span>
      </a>

  </div>
  <div class="bottom-actions-item">

      <a href="overview.html" class="bottom-actions-button" rel="next">
        <span class="subheader">
          Next Page →
        </span>
        <span class="title">
Overview
        </span>
      </a>

  </div>
</div>

      <footer class="footer">

        <p>
          Built using
          <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener" translate="no">ExDoc</a> (v0.28.5) for the

            <a href="https://elixir-lang.org" title="Elixir" target="_blank" translate="no">Elixir programming language</a>

        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
