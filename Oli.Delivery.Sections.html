<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8">
    <meta http-equiv="x-ua-compatible" content="ie=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="generator" content="ExDoc v0.25.2">
    <meta name="project" content="OLI Torus v0.18.4">

    <title>Oli.Delivery.Sections â€” OLI Torus v0.18.4</title>
    <link rel="stylesheet" href="dist/elixir-37545fd2f35b96531434.css" />

    <script src="dist/sidebar_items-d90147cd23.js"></script>

      <script src="docs_config.js"></script>

    <script async src="dist/app-f97730d45ef67f3e6188.js"></script>


  </head>
  <body data-type="modules">
    <script>

      try {
        if (localStorage.getItem('night-mode') === 'true') {
          document.body.classList.add('night-mode');
        }
      } catch (error) { }
    </script>

<div class="main">

<button class="sidebar-button sidebar-toggle">
  <span class="icon-menu" title="Collapse/expand sidebar"></span>
</button>

<section class="sidebar">
  <form class="sidebar-search" action="search.html">
    <button type="submit" class="search-button" aria-label="Submit Search">
      <span class="icon-search" aria-hidden="true" title="Submit search"></span>
    </button>
    <button type="button" tabindex="-1" class="search-close-button" aria-label="Cancel Search">
      <span class="icon-cross" aria-hidden="true" title="Cancel search"></span>
    </button>
    <label class="search-label">
      <input name="q" type="text" class="search-input" placeholder="Search..." aria-label="Input your search terms" autocomplete="off" />
    </label>
  </form>

  <div class="autocomplete">
    <div class="autocomplete-results">
    </div>
  </div>

  <div class="sidebar-header">
    <div class="sidebar-projectDetails">
      <a href="http://oli.cmu.edu" class="sidebar-projectName">
OLI Torus
      </a>
      <strong class="sidebar-projectVersion">
        v0.18.4
      </strong>
    </div>

      <a href="http://oli.cmu.edu">
        <img src="assets/logo.png" alt="OLI Torus" class="sidebar-projectImage">
      </a>

  </div>

  <ul class="sidebar-listNav">
    <li><a id="extras-list-link" href="#full-list">Pages</a></li>

      <li><a id="modules-list-link" href="#full-list">Modules</a></li>


      <li><a id="tasks-list-link" href="#full-list">Mix Tasks</a></li>

  </ul>
  <div class="gradient"></div>
  <ul id="full-list" class="sidebar-fullList"></ul>
</section>

<section class="content">
  <div class="content-outer">
    <div id="content" class="content-inner">

      <h1>
Oli.Delivery.Sections <small class="app-vsn">(OLI Torus v0.18.4)</small>

          <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L1" title="View Source" class="view-source" rel="help">
            <span class="icon-code" aria-hidden="true"></span>
            <span class="sr-only">View Source</span>
          </a>

      </h1>


        <section id="moduledoc">
<p>The Sections context.</p>
        </section>


        <section id="summary" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#summary">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
            Summary
          </h1>

  <div class="summary-functions summary">
    <h2>
      <a href="#functions">Functions</a>
    </h2>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#add_source_project/3">add_source_project(section, project_id, publication_id)</a>

  </div>

    <div class="summary-synopsis"><p>Adds a source project to the section pinned to the specified publication.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#apply_publication_update/2">apply_publication_update(section, publication_id)</a>

  </div>

    <div class="summary-synopsis"><p>Gracefully applies the specified publication update to a given section by leaving the existing
curriculum and section modifications in-tact while applying the structural changes that
occurred between the old and new publication.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#available?/1">available?(section)</a>

  </div>

    <div class="summary-synopsis"><p>Returns {:available, section} if the section is available fo enrollment.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#browse_enrollments/4">browse_enrollments(section, paging, sorting, options)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#change_independent_learner_section/2">change_independent_learner_section(section, attrs \\ %{})</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#change_open_and_free_section/2">change_open_and_free_section(section, attrs \\ %{})</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#change_section/2">change_section(section, attrs \\ %{})</a>

  </div>

    <div class="summary-synopsis"><p>Returns an <code class="inline">%Ecto.Changeset{}</code> for tracking section changes.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#check_for_available_publication_updates/1">check_for_available_publication_updates(section)</a>

  </div>

    <div class="summary-synopsis"><p>Returns a map of project_id to the latest available publication for that project
if a newer publication is available.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#check_for_updates_in_progress/1">check_for_updates_in_progress(section)</a>

  </div>

    <div class="summary-synopsis"><p>Returns a map of publication ids as keys for which updates are in progress for the
given section</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#create_section/1">create_section(attrs \\ %{})</a>

  </div>

    <div class="summary-synopsis"><p>Creates a section.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#create_section_project_publication/1">create_section_project_publication(attrs \\ %{})</a>

  </div>

    <div class="summary-synopsis"><p>Creates a section projects publication record.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#create_section_resource/1">create_section_resource(attrs \\ %{})</a>

  </div>

    <div class="summary-synopsis"><p>Creates a section resource.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#create_section_resources/2">create_section_resources(section, publication)</a>

  </div>

    <div class="summary-synopsis"><p>Create all section resources from the given section and publication using the
root resource's revision tree. Returns the root section resource record.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#delete_section/1">delete_section(section)</a>

  </div>

    <div class="summary-synopsis"><p>Deletes a section.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#enroll/3">enroll(user_id, section_id, context_roles)</a>

  </div>

    <div class="summary-synopsis"><p>Enrolls a user in a course section</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_current_publication/2">get_current_publication(section_id, project_id)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_deployment_registration_from_section/1">get_deployment_registration_from_section(section)</a>

  </div>

    <div class="summary-synopsis"><p>Gets the associated deployment and registration from the given section</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_enrollment/2">get_enrollment(section_slug, user_id)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_pinned_project_publications/1">get_pinned_project_publications(section_id)</a>

  </div>

    <div class="summary-synopsis"><p>Returns the map of project_id to publication of all the section's pinned project publications</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_project_by_section_resource/2">get_project_by_section_resource(section_id, resource_id)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_section!/1">get_section!(id)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a single section.
Raises <a href="https://hexdocs.pm/ecto/3.7.1/Ecto.NoResultsError.html"><code class="inline">Ecto.NoResultsError</code></a> if the Section does not exist.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_section_by/1">get_section_by(clauses)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a single section by query parameter</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_section_by_slug/1">get_section_by_slug(slug)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a single section by slug and preloads associations</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_section_from_lti_params/1">get_section_from_lti_params(lti_params)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a section using the given LTI params</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_section_preloaded!/1">get_section_preloaded!(id)</a>

  </div>

    <div class="summary-synopsis"><p>Gets a single section with preloaded associations.
Raises <a href="https://hexdocs.pm/ecto/3.7.1/Ecto.NoResultsError.html"><code class="inline">Ecto.NoResultsError</code></a> if the Section does not exist.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_sections_by_base_project/1">get_sections_by_base_project(project)</a>

  </div>

    <div class="summary-synopsis"><p>Gets all sections that use a particular base project</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#get_sections_by_publication/1">get_sections_by_publication(publication)</a>

  </div>

    <div class="summary-synopsis"><p>Gets all sections that use a particular publication</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#has_instructor_role?/2">has_instructor_role?(user, section_slug)</a>

  </div>

    <div class="summary-synopsis"><p>Determines if user has instructor role.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#has_student_data?/1">has_student_data?(section_slug)</a>

  </div>

    <div class="summary-synopsis"><p>Returns true if there is student data associated to the given section.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#is_admin?/2">is_admin?(user, section_slug)</a>

  </div>

    <div class="summary-synopsis"><p>Determines if a user is an administrator in a given section.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#is_enrolled?/2">is_enrolled?(user_id, section_slug)</a>

  </div>

    <div class="summary-synopsis"><p>Determines if a particular user is enrolled in a section.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#is_independent_instructor?/1">is_independent_instructor?(user)</a>

  </div>

    <div class="summary-synopsis"><p>Can a user create independent, enrollable sections through OLI's LMS?</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#is_institution_instructor?/1">is_institution_instructor?(user)</a>

  </div>

    <div class="summary-synopsis"><p>Determines if a user is a platform (institution) instructor.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#is_instructor?/2">is_instructor?(user, section_slug)</a>

  </div>

    <div class="summary-synopsis"><p>Determines if a user is an instructor in a given section.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_blueprint_sections/0">list_blueprint_sections()</a>

  </div>

    <div class="summary-synopsis"><p>List all sections of type blueprint.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_enrollable_sections/0">list_enrollable_sections()</a>

  </div>

    <div class="summary-synopsis"><p>List all sections of type enrollable.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_enrollments/1">list_enrollments(section_slug)</a>

  </div>

    <div class="summary-synopsis"><p>Returns a listing of all enrollments for a given section.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_open_and_free_sections/0">list_open_and_free_sections()</a>

  </div>

    <div class="summary-synopsis"><p>Returns the list of open and free sections.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_sections/0">list_sections()</a>

  </div>

    <div class="summary-synopsis"><p>Returns the list of sections.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#list_user_open_and_free_sections/1">list_user_open_and_free_sections(user)</a>

  </div>

    <div class="summary-synopsis"><p>Returns a listing of all open and free sections for a given user.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#localize_section_start_end_datetimes/1">localize_section_start_end_datetimes(section)</a>

  </div>

    <div class="summary-synopsis"><p>Converts a section's start_date and end_date to the gievn timezone's local datetimes</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#parse_and_convert_start_end_dates_to_utc/3">parse_and_convert_start_end_dates_to_utc(start_date, end_date, from_timezone)</a>

  </div>

    <div class="summary-synopsis"><p>Parses a ISO 8601 formatted local timestamps to DateTimes if they are not empty or nil.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#published_resources_map/1">published_resources_map(publication_ids)</a>

  </div>

    <div class="summary-synopsis"><p>Returns a map of resource_id to published resource</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#rebuild_section_curriculum/3">rebuild_section_curriculum(section, hierarchy, project_publications)</a>

  </div>

    <div class="summary-synopsis"><p>Rebuilds a section curriculum by upserting any new or existing section resources
and removing any deleted section resources based on the given hierarchy. Also updates
the project publication mappings based on the given project_publications map.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#rebuild_section_resources/1">rebuild_section_resources(list)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#soft_delete_section/1">soft_delete_section(section)</a>

  </div>

    <div class="summary-synopsis"><p>Deletes a section by marking the record as deleted.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#unenroll/3">unenroll(user_id, section_id, context_roles)</a>

  </div>

    <div class="summary-synopsis"><p>Unenrolls a user from a section by removing the provided context roles. If no context roles are provided, no change is made. If all context roles are removed from the user, the enrollment is deleted.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#unenroll_learner/2">unenroll_learner(user_id, section_id)</a>

  </div>

    <div class="summary-synopsis"><p>Unenrolls a student from a section by removing the :context_learner role. If this is their only context_role, the enrollment is deleted.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_enrollment/2">update_enrollment(e, attrs)</a>

  </div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_section/2">update_section(section, attrs)</a>

  </div>

    <div class="summary-synopsis"><p>Updates a section.</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_section_project_publication/3">update_section_project_publication(section, project_id, publication_id)</a>

  </div>

    <div class="summary-synopsis"><p>Updates a single project in a section to use the specified publication</p></div>

</div>
<div class="summary-row">
  <div class="summary-signature">
    <a href="#update_section_resource/2">update_section_resource(section, attrs)</a>

  </div>

    <div class="summary-synopsis"><p>Updates a section resource.</p></div>

</div>

  </div>

        </section>


        <section id="functions" class="details-list">
          <h1 class="section-heading">
            <a class="hover-link" href="#functions">
              <span class="icon-link" aria-hidden="true"></span>
              <span class="sr-only">Link to this section</span>
            </a>
Functions
          </h1>
          <div class="functions-list">
<section class="detail" id="add_source_project/3">

  <div class="detail-header">
    <a href="#add_source_project/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">add_source_project(section, project_id, publication_id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L877" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Adds a source project to the section pinned to the specified publication.</p>
  </section>
</section>
<section class="detail" id="apply_publication_update/2">

  <div class="detail-header">
    <a href="#apply_publication_update/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">apply_publication_update(section, publication_id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L1039" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gracefully applies the specified publication update to a given section by leaving the existing
curriculum and section modifications in-tact while applying the structural changes that
occurred between the old and new publication.</p><p>This implementation makes the assumption that a resource_id is unique within a curriculum.
That is, a resource can only allowed to be added once in a single location within a curriculum.
This makes it simpler to apply changes to the existing curriculum but if necessary, this implementation
could be extended to not just apply the changes to the first node found that contains the changed resource,
but any/all nodes in the hierarchy which reference the changed resource.</p>
  </section>
</section>
<section class="detail" id="available?/1">

  <div class="detail-header">
    <a href="#available?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">available?(section)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L1440" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns {:available, section} if the section is available fo enrollment.</p><p>Otherwise returns {:unavailable, reason} where reasons is one of:
:registration_closed, :before_start_date, :after_end_date</p>
  </section>
</section>
<section class="detail" id="browse_enrollments/4">

  <div class="detail-header">
    <a href="#browse_enrollments/4" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">browse_enrollments(section, paging, sorting, options)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L36" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="change_independent_learner_section/2">

    <span id="change_independent_learner_section/1"></span>

  <div class="detail-header">
    <a href="#change_independent_learner_section/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">change_independent_learner_section(section, attrs \\ %{})</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L662" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="change_open_and_free_section/2">

    <span id="change_open_and_free_section/1"></span>

  <div class="detail-header">
    <a href="#change_open_and_free_section/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">change_open_and_free_section(section, attrs \\ %{})</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L666" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="change_section/2">

    <span id="change_section/1"></span>

  <div class="detail-header">
    <a href="#change_section/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">change_section(section, attrs \\ %{})</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L658" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns an <code class="inline">%Ecto.Changeset{}</code> for tracking section changes.</p><h2 id="change_section/2-examples" class="section-heading">
  <a href="#change_section/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">change_section</span><span class="p" data-group-id="3869372176-1">(</span><span class="n">section</span><span class="p" data-group-id="3869372176-1">)</span><span class="w">
</span><span class="p" data-group-id="3869372176-2">%</span><span class="nc" data-group-id="3869372176-2">Ecto.Changeset</span><span class="p" data-group-id="3869372176-2">{</span><span class="ss">source</span><span class="p">:</span><span class="w"> </span><span class="p" data-group-id="3869372176-3">%</span><span class="nc" data-group-id="3869372176-3">Section</span><span class="p" data-group-id="3869372176-3">{</span><span class="p" data-group-id="3869372176-3">}</span><span class="p" data-group-id="3869372176-2">}</span></code></pre>
  </section>
</section>
<section class="detail" id="check_for_available_publication_updates/1">

  <div class="detail-header">
    <a href="#check_for_available_publication_updates/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">check_for_available_publication_updates(section)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L819" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns a map of project_id to the latest available publication for that project
if a newer publication is available.</p>
  </section>
</section>
<section class="detail" id="check_for_updates_in_progress/1">

  <div class="detail-header">
    <a href="#check_for_updates_in_progress/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">check_for_updates_in_progress(section)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L863" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns a map of publication ids as keys for which updates are in progress for the
given section</p><h2 id="check_for_updates_in_progress/1-examples" class="section-heading">
  <a href="#check_for_updates_in_progress/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">check_for_updates_in_progress</span><span class="p" data-group-id="0595627637-1">(</span><span class="n">section</span><span class="p" data-group-id="0595627637-1">)</span><span class="w">
</span><span class="p" data-group-id="0595627637-2">%{</span><span class="mi">1</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="no">true</span><span class="p">,</span><span class="w"> </span><span class="mi">3</span><span class="w"> </span><span class="o">=</span><span class="o">&gt;</span><span class="w"> </span><span class="no">true</span><span class="p" data-group-id="0595627637-2">}</span></code></pre>
  </section>
</section>
<section class="detail" id="create_section/1">

    <span id="create_section/0"></span>

  <div class="detail-header">
    <a href="#create_section/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">create_section(attrs \\ %{})</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L608" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Creates a section.</p><h2 id="create_section/1-examples" class="section-heading">
  <a href="#create_section/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">create_section</span><span class="p" data-group-id="7926278551-1">(</span><span class="p" data-group-id="7926278551-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="7926278551-2">}</span><span class="p" data-group-id="7926278551-1">)</span><span class="w">
</span><span class="p" data-group-id="7926278551-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7926278551-4">%</span><span class="nc" data-group-id="7926278551-4">Section</span><span class="p" data-group-id="7926278551-4">{</span><span class="p" data-group-id="7926278551-4">}</span><span class="p" data-group-id="7926278551-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">create_section</span><span class="p" data-group-id="7926278551-5">(</span><span class="p" data-group-id="7926278551-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="7926278551-6">}</span><span class="p" data-group-id="7926278551-5">)</span><span class="w">
</span><span class="p" data-group-id="7926278551-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="7926278551-8">%</span><span class="nc" data-group-id="7926278551-8">Ecto.Changeset</span><span class="p" data-group-id="7926278551-8">{</span><span class="p" data-group-id="7926278551-8">}</span><span class="p" data-group-id="7926278551-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="create_section_project_publication/1">

    <span id="create_section_project_publication/0"></span>

  <div class="detail-header">
    <a href="#create_section_project_publication/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">create_section_project_publication(attrs \\ %{})</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L594" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Creates a section projects publication record.</p><h2 id="create_section_project_publication/1-examples" class="section-heading">
  <a href="#create_section_project_publication/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">create_section_project_publication</span><span class="p" data-group-id="6590326775-1">(</span><span class="p" data-group-id="6590326775-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="6590326775-2">}</span><span class="p" data-group-id="6590326775-1">)</span><span class="w">
</span><span class="p" data-group-id="6590326775-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6590326775-4">%</span><span class="nc" data-group-id="6590326775-4">SectionsProjectsPublications</span><span class="p" data-group-id="6590326775-4">{</span><span class="p" data-group-id="6590326775-4">}</span><span class="p" data-group-id="6590326775-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">create_section_project_publication</span><span class="p" data-group-id="6590326775-5">(</span><span class="p" data-group-id="6590326775-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="6590326775-6">}</span><span class="p" data-group-id="6590326775-5">)</span><span class="w">
</span><span class="p" data-group-id="6590326775-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6590326775-8">%</span><span class="nc" data-group-id="6590326775-8">Ecto.Changeset</span><span class="p" data-group-id="6590326775-8">{</span><span class="p" data-group-id="6590326775-8">}</span><span class="p" data-group-id="6590326775-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="create_section_resource/1">

    <span id="create_section_resource/0"></span>

  <div class="detail-header">
    <a href="#create_section_resource/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">create_section_resource(attrs \\ %{})</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L566" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Creates a section resource.</p><h2 id="create_section_resource/1-examples" class="section-heading">
  <a href="#create_section_resource/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">create_section_resource</span><span class="p" data-group-id="4357032522-1">(</span><span class="p" data-group-id="4357032522-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">value</span><span class="p" data-group-id="4357032522-2">}</span><span class="p" data-group-id="4357032522-1">)</span><span class="w">
</span><span class="p" data-group-id="4357032522-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4357032522-4">%</span><span class="nc" data-group-id="4357032522-4">SectionResource</span><span class="p" data-group-id="4357032522-4">{</span><span class="p" data-group-id="4357032522-4">}</span><span class="p" data-group-id="4357032522-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">create_section_resource</span><span class="p" data-group-id="4357032522-5">(</span><span class="p" data-group-id="4357032522-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="4357032522-6">}</span><span class="p" data-group-id="4357032522-5">)</span><span class="w">
</span><span class="p" data-group-id="4357032522-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4357032522-8">%</span><span class="nc" data-group-id="4357032522-8">Ecto.Changeset</span><span class="p" data-group-id="4357032522-8">{</span><span class="p" data-group-id="4357032522-8">}</span><span class="p" data-group-id="4357032522-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="create_section_resources/2">

  <div class="detail-header">
    <a href="#create_section_resources/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">create_section_resources(section, publication)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L677" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Create all section resources from the given section and publication using the
root resource's revision tree. Returns the root section resource record.</p><h2 id="create_section_resources/2-examples" class="section-heading">
  <a href="#create_section_resources/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">create_section_resources</span><span class="p" data-group-id="6078440484-1">(</span><span class="n">section</span><span class="p" data-group-id="6078440484-1">)</span><span class="w">
</span><span class="p" data-group-id="6078440484-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="6078440484-3">%</span><span class="nc" data-group-id="6078440484-3">Section</span><span class="p" data-group-id="6078440484-3">{</span><span class="p" data-group-id="6078440484-3">}</span><span class="p" data-group-id="6078440484-2">}</span></code></pre>
  </section>
</section>
<section class="detail" id="delete_section/1">

  <div class="detail-header">
    <a href="#delete_section/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">delete_section(section)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L648" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Deletes a section.</p><h2 id="delete_section/1-examples" class="section-heading">
  <a href="#delete_section/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">delete_section</span><span class="p" data-group-id="9792416369-1">(</span><span class="n">section</span><span class="p" data-group-id="9792416369-1">)</span><span class="w">
</span><span class="p" data-group-id="9792416369-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9792416369-3">%</span><span class="nc" data-group-id="9792416369-3">Section</span><span class="p" data-group-id="9792416369-3">{</span><span class="p" data-group-id="9792416369-3">}</span><span class="p" data-group-id="9792416369-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">delete_section</span><span class="p" data-group-id="9792416369-4">(</span><span class="n">section</span><span class="p" data-group-id="9792416369-4">)</span><span class="w">
</span><span class="p" data-group-id="9792416369-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="9792416369-6">%</span><span class="nc" data-group-id="9792416369-6">Ecto.Changeset</span><span class="p" data-group-id="9792416369-6">{</span><span class="p" data-group-id="9792416369-6">}</span><span class="p" data-group-id="9792416369-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="enroll/3">

  <div class="detail-header">
    <a href="#enroll/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">enroll(user_id, section_id, context_roles)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L187" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

      <h2>Specs</h2>
      <div class="specs">

          <pre>enroll(<a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">number</a>(), <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">number</a>(), [%Lti_1p3.Tool.ContextRole{id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(), uri: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()}]) ::
  {:ok,
   %Oli.Delivery.Sections.Enrollment{
     __meta__: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
     context_roles: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
     id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
     inserted_at: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
     section: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
     section_id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
     state: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
     updated_at: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
     user: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>(),
     user_id: <a href="https://hexdocs.pm/elixir/typespecs.html#built-in-types">term</a>()
   }}</pre>

      </div>

<p>Enrolls a user in a course section</p><h2 id="enroll/3-examples" class="section-heading">
  <a href="#enroll/3-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">enroll</span><span class="p" data-group-id="8955372081-1">(</span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">section_id</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8955372081-2">[</span><span class="p" data-group-id="8955372081-3">%</span><span class="nc" data-group-id="8955372081-3">ContextRole</span><span class="p" data-group-id="8955372081-3">{</span><span class="p" data-group-id="8955372081-3">}</span><span class="p" data-group-id="8955372081-2">]</span><span class="p" data-group-id="8955372081-1">)</span><span class="w">
</span><span class="p" data-group-id="8955372081-4">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="8955372081-5">%</span><span class="nc" data-group-id="8955372081-5">Enrollment</span><span class="p" data-group-id="8955372081-5">{</span><span class="p" data-group-id="8955372081-5">}</span><span class="p" data-group-id="8955372081-4">}</span><span class="w"> </span><span class="c1"># Inserted or updated with success</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">enroll</span><span class="p" data-group-id="8955372081-6">(</span><span class="n">user_id</span><span class="p">,</span><span class="w"> </span><span class="n">section_id</span><span class="p">,</span><span class="w"> </span><span class="ss">:open_and_free</span><span class="p" data-group-id="8955372081-6">)</span><span class="w">
</span><span class="p" data-group-id="8955372081-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="n">changeset</span><span class="p" data-group-id="8955372081-7">}</span><span class="w"> </span><span class="c1"># Something went wrong</span></code></pre>
  </section>
</section>
<section class="detail" id="get_current_publication/2">

  <div class="detail-header">
    <a href="#get_current_publication/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_current_publication(section_id, project_id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L886" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="get_deployment_registration_from_section/1">

  <div class="detail-header">
    <a href="#get_deployment_registration_from_section/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_deployment_registration_from_section(section)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L511" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets the associated deployment and registration from the given section</p><h2 id="get_deployment_registration_from_section/1-examples" class="section-heading">
  <a href="#get_deployment_registration_from_section/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_deployment_registration_from_section</span><span class="p" data-group-id="5967776678-1">(</span><span class="n">section</span><span class="p" data-group-id="5967776678-1">)</span><span class="w">
</span><span class="p" data-group-id="5967776678-2">{</span><span class="p" data-group-id="5967776678-3">%</span><span class="nc" data-group-id="5967776678-3">Deployment</span><span class="p" data-group-id="5967776678-3">{</span><span class="p" data-group-id="5967776678-3">}</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="5967776678-4">%</span><span class="nc" data-group-id="5967776678-4">Registration</span><span class="p" data-group-id="5967776678-4">{</span><span class="p" data-group-id="5967776678-4">}</span><span class="p" data-group-id="5967776678-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_deployment_registration_from_section</span><span class="p" data-group-id="5967776678-5">(</span><span class="n">section</span><span class="p" data-group-id="5967776678-5">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="get_enrollment/2">

  <div class="detail-header">
    <a href="#get_enrollment/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_enrollment(section_slug, user_id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L300" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="get_pinned_project_publications/1">

  <div class="detail-header">
    <a href="#get_pinned_project_publications/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_pinned_project_publications(section_id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L1123" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns the map of project_id to publication of all the section's pinned project publications</p>
  </section>
</section>
<section class="detail" id="get_project_by_section_resource/2">

  <div class="detail-header">
    <a href="#get_project_by_section_resource/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_project_by_section_resource(section_id, resource_id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L784" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="get_section!/1">

  <div class="detail-header">
    <a href="#get_section!/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_section!(id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L395" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a single section.
Raises <a href="https://hexdocs.pm/ecto/3.7.1/Ecto.NoResultsError.html"><code class="inline">Ecto.NoResultsError</code></a> if the Section does not exist.</p><h2 id="get_section!/1-examples" class="section-heading">
  <a href="#get_section!/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_section!</span><span class="p" data-group-id="4556398513-1">(</span><span class="mi">123</span><span class="p" data-group-id="4556398513-1">)</span><span class="w">
</span><span class="p" data-group-id="4556398513-2">%</span><span class="nc" data-group-id="4556398513-2">Section</span><span class="p" data-group-id="4556398513-2">{</span><span class="p" data-group-id="4556398513-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_section!</span><span class="p" data-group-id="4556398513-3">(</span><span class="mi">456</span><span class="p" data-group-id="4556398513-3">)</span><span class="w">
</span><span class="gt">** (Ecto.NoResultsError)</span></code></pre>
  </section>
</section>
<section class="detail" id="get_section_by/1">

  <div class="detail-header">
    <a href="#get_section_by/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_section_by(clauses)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L423" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a single section by query parameter</p><h2 id="get_section_by/1-examples" class="section-heading">
  <a href="#get_section_by/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_section_by</span><span class="p" data-group-id="6113396885-1">(</span><span class="ss">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;123&quot;</span><span class="p" data-group-id="6113396885-1">)</span><span class="w">
</span><span class="p" data-group-id="6113396885-2">%</span><span class="nc" data-group-id="6113396885-2">Section</span><span class="p" data-group-id="6113396885-2">{</span><span class="p" data-group-id="6113396885-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_section_by</span><span class="p" data-group-id="6113396885-3">(</span><span class="ss">slug</span><span class="p">:</span><span class="w"> </span><span class="s">&quot;111&quot;</span><span class="p" data-group-id="6113396885-3">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="get_section_by_slug/1">

  <div class="detail-header">
    <a href="#get_section_by_slug/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_section_by_slug(slug)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L435" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a single section by slug and preloads associations</p><h2 id="get_section_by_slug/1-examples" class="section-heading">
  <a href="#get_section_by_slug/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_section_by_slug</span><span class="s">&quot;123&quot;</span><span class="p">)</span><span class="w">
</span><span class="p" data-group-id="8111606610-1">%</span><span class="nc" data-group-id="8111606610-1">Section</span><span class="p" data-group-id="8111606610-1">{</span><span class="p" data-group-id="8111606610-1">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_section_by_slug</span><span class="p" data-group-id="8111606610-2">(</span><span class="s">&quot;111&quot;</span><span class="p" data-group-id="8111606610-2">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="get_section_from_lti_params/1">

  <div class="detail-header">
    <a href="#get_section_from_lti_params/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_section_from_lti_params(lti_params)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L462" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a section using the given LTI params</p><h2 id="get_section_from_lti_params/1-examples" class="section-heading">
  <a href="#get_section_from_lti_params/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_section_from_lti_params</span><span class="p" data-group-id="5419617848-1">(</span><span class="n">lti_params</span><span class="p" data-group-id="5419617848-1">)</span><span class="w">
</span><span class="p" data-group-id="5419617848-2">%</span><span class="nc" data-group-id="5419617848-2">Section</span><span class="p" data-group-id="5419617848-2">{</span><span class="p" data-group-id="5419617848-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_section_from_lti_params</span><span class="p" data-group-id="5419617848-3">(</span><span class="n">lti_params</span><span class="p" data-group-id="5419617848-3">)</span><span class="w">
</span><span class="no">nil</span></code></pre>
  </section>
</section>
<section class="detail" id="get_section_preloaded!/1">

  <div class="detail-header">
    <a href="#get_section_preloaded!/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_section_preloaded!(id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L406" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets a single section with preloaded associations.
Raises <a href="https://hexdocs.pm/ecto/3.7.1/Ecto.NoResultsError.html"><code class="inline">Ecto.NoResultsError</code></a> if the Section does not exist.</p><h2 id="get_section_preloaded!/1-examples" class="section-heading">
  <a href="#get_section_preloaded!/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_section_preloaded!</span><span class="p" data-group-id="8492929057-1">(</span><span class="mi">123</span><span class="p" data-group-id="8492929057-1">)</span><span class="w">
</span><span class="p" data-group-id="8492929057-2">%</span><span class="nc" data-group-id="8492929057-2">Section</span><span class="p" data-group-id="8492929057-2">{</span><span class="p" data-group-id="8492929057-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">get_section_preloaded!</span><span class="p" data-group-id="8492929057-3">(</span><span class="mi">456</span><span class="p" data-group-id="8492929057-3">)</span><span class="w">
</span><span class="gt">** (Ecto.NoResultsError)</span></code></pre>
  </section>
</section>
<section class="detail" id="get_sections_by_base_project/1">

  <div class="detail-header">
    <a href="#get_sections_by_base_project/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_sections_by_base_project(project)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L553" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets all sections that use a particular base project</p><h2 id="get_sections_by_base_project/1-examples" class="section-heading">
  <a href="#get_sections_by_base_project/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_sections_by_base_project</span><span class="p" data-group-id="6199890697-1">(</span><span class="n">project</span><span class="p" data-group-id="6199890697-1">)</span><span class="w">
</span><span class="p" data-group-id="6199890697-2">[</span><span class="p" data-group-id="6199890697-3">%</span><span class="nc" data-group-id="6199890697-3">Section</span><span class="p" data-group-id="6199890697-3">{</span><span class="p" data-group-id="6199890697-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="6199890697-2">]</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">get_sections_by_base_project</span><span class="p" data-group-id="6199890697-4">(</span><span class="n">invalid_project</span><span class="p" data-group-id="6199890697-4">)</span><span class="w">
</span><span class="gt">** (Ecto.NoResultsError)</span></code></pre>
  </section>
</section>
<section class="detail" id="get_sections_by_publication/1">

  <div class="detail-header">
    <a href="#get_sections_by_publication/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">get_sections_by_publication(publication)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L534" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Gets all sections that use a particular publication</p><h2 id="get_sections_by_publication/1-examples" class="section-heading">
  <a href="#get_sections_by_publication/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">get_sections_by_publication</span><span class="p" data-group-id="9679931739-1">(</span><span class="s">&quot;123&quot;</span><span class="p" data-group-id="9679931739-1">)</span><span class="w">
</span><span class="p" data-group-id="9679931739-2">[</span><span class="p" data-group-id="9679931739-3">%</span><span class="nc" data-group-id="9679931739-3">Section</span><span class="p" data-group-id="9679931739-3">{</span><span class="p" data-group-id="9679931739-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="9679931739-2">]</span><span class="w">

</span><span class="gp unselectable">iex&gt; </span><span class="n">get_sections_by_publication</span><span class="p" data-group-id="9679931739-4">(</span><span class="s">&quot;456&quot;</span><span class="p" data-group-id="9679931739-4">)</span><span class="w">
</span><span class="gt">** (Ecto.NoResultsError)</span></code></pre>
  </section>
</section>
<section class="detail" id="has_instructor_role?/2">

  <div class="detail-header">
    <a href="#has_instructor_role?/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">has_instructor_role?(user, section_slug)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L130" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Determines if user has instructor role.</p>
  </section>
</section>
<section class="detail" id="has_student_data?/1">

  <div class="detail-header">
    <a href="#has_student_data?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">has_student_data?(section_slug)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L288" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns true if there is student data associated to the given section.</p>
  </section>
</section>
<section class="detail" id="is_admin?/2">

  <div class="detail-header">
    <a href="#is_admin?/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">is_admin?(user, section_slug)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L161" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Determines if a user is an administrator in a given section.</p>
  </section>
</section>
<section class="detail" id="is_enrolled?/2">

  <div class="detail-header">
    <a href="#is_enrolled?/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">is_enrolled?(user_id, section_slug)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L252" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Determines if a particular user is enrolled in a section.</p>
  </section>
</section>
<section class="detail" id="is_independent_instructor?/1">

  <div class="detail-header">
    <a href="#is_independent_instructor?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">is_independent_instructor?(user)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L154" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Can a user create independent, enrollable sections through OLI's LMS?</p>
  </section>
</section>
<section class="detail" id="is_institution_instructor?/1">

  <div class="detail-header">
    <a href="#is_institution_instructor?/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">is_institution_instructor?(user)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L141" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Determines if a user is a platform (institution) instructor.</p>
  </section>
</section>
<section class="detail" id="is_instructor?/2">

  <div class="detail-header">
    <a href="#is_instructor?/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">is_instructor?(user, section_slug)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L119" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Determines if a user is an instructor in a given section.</p>
  </section>
</section>
<section class="detail" id="list_blueprint_sections/0">

  <div class="detail-header">
    <a href="#list_blueprint_sections/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_blueprint_sections()</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L349" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>List all sections of type blueprint.</p>
  </section>
</section>
<section class="detail" id="list_enrollable_sections/0">

  <div class="detail-header">
    <a href="#list_enrollable_sections/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_enrollable_sections()</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L356" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>List all sections of type enrollable.</p>
  </section>
</section>
<section class="detail" id="list_enrollments/1">

  <div class="detail-header">
    <a href="#list_enrollments/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_enrollments(section_slug)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L271" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns a listing of all enrollments for a given section.</p>
  </section>
</section>
<section class="detail" id="list_open_and_free_sections/0">

  <div class="detail-header">
    <a href="#list_open_and_free_sections/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_open_and_free_sections()</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L376" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns the list of open and free sections.</p><h2 id="list_open_and_free_sections/0-examples" class="section-heading">
  <a href="#list_open_and_free_sections/0-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">list_open_and_free_sections</span><span class="p" data-group-id="6501799374-1">(</span><span class="p" data-group-id="6501799374-1">)</span><span class="w">
</span><span class="p" data-group-id="6501799374-2">[</span><span class="p" data-group-id="6501799374-3">%</span><span class="nc" data-group-id="6501799374-3">Section</span><span class="p" data-group-id="6501799374-3">{</span><span class="p" data-group-id="6501799374-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="6501799374-2">]</span></code></pre>
  </section>
</section>
<section class="detail" id="list_sections/0">

  <div class="detail-header">
    <a href="#list_sections/0" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_sections()</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L342" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns the list of sections.</p><h2 id="list_sections/0-examples" class="section-heading">
  <a href="#list_sections/0-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">list_sections</span><span class="p" data-group-id="7598752474-1">(</span><span class="p" data-group-id="7598752474-1">)</span><span class="w">
</span><span class="p" data-group-id="7598752474-2">[</span><span class="p" data-group-id="7598752474-3">%</span><span class="nc" data-group-id="7598752474-3">Section</span><span class="p" data-group-id="7598752474-3">{</span><span class="p" data-group-id="7598752474-3">}</span><span class="p">,</span><span class="w"> </span><span class="n">...</span><span class="p" data-group-id="7598752474-2">]</span></code></pre>
  </section>
</section>
<section class="detail" id="list_user_open_and_free_sections/1">

  <div class="detail-header">
    <a href="#list_user_open_and_free_sections/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">list_user_open_and_free_sections(user)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L322" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns a listing of all open and free sections for a given user.</p>
  </section>
</section>
<section class="detail" id="localize_section_start_end_datetimes/1">

  <div class="detail-header">
    <a href="#localize_section_start_end_datetimes/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">localize_section_start_end_datetimes(section)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L1412" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Converts a section's start_date and end_date to the gievn timezone's local datetimes</p>
  </section>
</section>
<section class="detail" id="parse_and_convert_start_end_dates_to_utc/3">

  <div class="detail-header">
    <a href="#parse_and_convert_start_end_dates_to_utc/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">parse_and_convert_start_end_dates_to_utc(start_date, end_date, from_timezone)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L1378" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Parses a ISO 8601 formatted local timestamps to DateTimes if they are not empty or nil.</p><p>Returns a tuple containing the start and end datetimes in UTC: {utc_start_date, utc_end_date}</p>
  </section>
</section>
<section class="detail" id="published_resources_map/1">

  <div class="detail-header">
    <a href="#published_resources_map/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">published_resources_map(publication_ids)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L1109" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Returns a map of resource_id to published resource</p>
  </section>
</section>
<section class="detail" id="rebuild_section_curriculum/3">

  <div class="detail-header">
    <a href="#rebuild_section_curriculum/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">rebuild_section_curriculum(section, hierarchy, project_publications)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L918" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Rebuilds a section curriculum by upserting any new or existing section resources
and removing any deleted section resources based on the given hierarchy. Also updates
the project publication mappings based on the given project_publications map.</p><p>project_publications is a map of the project id to the pinned publication for the section.
%{1 =&gt; %Publication{project_id: 1, ...}, ...}</p>
  </section>
</section>
<section class="detail" id="rebuild_section_resources/1">

  <div class="detail-header">
    <a href="#rebuild_section_resources/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">rebuild_section_resources(list)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L794" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="soft_delete_section/1">

  <div class="detail-header">
    <a href="#soft_delete_section/1" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">soft_delete_section(section)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L636" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Deletes a section by marking the record as deleted.</p><h2 id="soft_delete_section/1-examples" class="section-heading">
  <a href="#soft_delete_section/1-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">soft_delete_section</span><span class="p" data-group-id="0988416773-1">(</span><span class="n">section</span><span class="p" data-group-id="0988416773-1">)</span><span class="w">
</span><span class="p" data-group-id="0988416773-2">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0988416773-3">%</span><span class="nc" data-group-id="0988416773-3">Section</span><span class="p" data-group-id="0988416773-3">{</span><span class="p" data-group-id="0988416773-3">}</span><span class="p" data-group-id="0988416773-2">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">soft_delete_section</span><span class="p" data-group-id="0988416773-4">(</span><span class="n">section</span><span class="p" data-group-id="0988416773-4">)</span><span class="w">
</span><span class="p" data-group-id="0988416773-5">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="0988416773-6">%</span><span class="nc" data-group-id="0988416773-6">Ecto.Changeset</span><span class="p" data-group-id="0988416773-6">{</span><span class="p" data-group-id="0988416773-6">}</span><span class="p" data-group-id="0988416773-5">}</span></code></pre>
  </section>
</section>
<section class="detail" id="unenroll/3">

  <div class="detail-header">
    <a href="#unenroll/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">unenroll(user_id, section_id, context_roles)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L212" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Unenrolls a user from a section by removing the provided context roles. If no context roles are provided, no change is made. If all context roles are removed from the user, the enrollment is deleted.</p><p>To unenroll a student, use unenrolle_learner/2</p>
  </section>
</section>
<section class="detail" id="unenroll_learner/2">

  <div class="detail-header">
    <a href="#unenroll_learner/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">unenroll_learner(user_id, section_id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L244" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Unenrolls a student from a section by removing the :context_learner role. If this is their only context_role, the enrollment is deleted.</p>
  </section>
</section>
<section class="detail" id="update_enrollment/2">

  <div class="detail-header">
    <a href="#update_enrollment/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">update_enrollment(e, attrs)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L313" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">


  </section>
</section>
<section class="detail" id="update_section/2">

  <div class="detail-header">
    <a href="#update_section/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">update_section(section, attrs)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L622" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Updates a section.</p><h2 id="update_section/2-examples" class="section-heading">
  <a href="#update_section/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">update_section</span><span class="p" data-group-id="1871287916-1">(</span><span class="n">section</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1871287916-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">new_value</span><span class="p" data-group-id="1871287916-2">}</span><span class="p" data-group-id="1871287916-1">)</span><span class="w">
</span><span class="p" data-group-id="1871287916-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1871287916-4">%</span><span class="nc" data-group-id="1871287916-4">Section</span><span class="p" data-group-id="1871287916-4">{</span><span class="p" data-group-id="1871287916-4">}</span><span class="p" data-group-id="1871287916-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">update_section</span><span class="p" data-group-id="1871287916-5">(</span><span class="n">section</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1871287916-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="1871287916-6">}</span><span class="p" data-group-id="1871287916-5">)</span><span class="w">
</span><span class="p" data-group-id="1871287916-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="1871287916-8">%</span><span class="nc" data-group-id="1871287916-8">Ecto.Changeset</span><span class="p" data-group-id="1871287916-8">{</span><span class="p" data-group-id="1871287916-8">}</span><span class="p" data-group-id="1871287916-7">}</span></code></pre>
  </section>
</section>
<section class="detail" id="update_section_project_publication/3">

  <div class="detail-header">
    <a href="#update_section_project_publication/3" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">update_section_project_publication(section, project_id, publication_id)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L899" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Updates a single project in a section to use the specified publication</p>
  </section>
</section>
<section class="detail" id="update_section_resource/2">

  <div class="detail-header">
    <a href="#update_section_resource/2" class="detail-link" title="Link to this function">
      <span class="icon-link" aria-hidden="true"></span>
      <span class="sr-only">Link to this function</span>
    </a>
    <h1 class="signature">update_section_resource(section, attrs)</h1>

      <a href="https://github.com/Simon-Initiative/oli-torus/blob/master/lib/oli/delivery/sections.ex#L580" class="view-source" rel="help" title="View Source">
       <span class="icon-code" aria-hidden="true"></span>
       <span class="sr-only">View Source</span>
     </a>


  </div>

  <section class="docstring">

<p>Updates a section resource.</p><h2 id="update_section_resource/2-examples" class="section-heading">
  <a href="#update_section_resource/2-examples" class="hover-link"><span class="icon-link" aria-hidden="true"></span></a>
  Examples
</h2>
<pre><code class="makeup elixir"><span class="gp unselectable">iex&gt; </span><span class="n">update_section_resource</span><span class="p" data-group-id="4293210898-1">(</span><span class="n">section</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4293210898-2">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">new_value</span><span class="p" data-group-id="4293210898-2">}</span><span class="p" data-group-id="4293210898-1">)</span><span class="w">
</span><span class="p" data-group-id="4293210898-3">{</span><span class="ss">:ok</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4293210898-4">%</span><span class="nc" data-group-id="4293210898-4">SectionResource</span><span class="p" data-group-id="4293210898-4">{</span><span class="p" data-group-id="4293210898-4">}</span><span class="p" data-group-id="4293210898-3">}</span><span class="w">
</span><span class="gp unselectable">iex&gt; </span><span class="n">update_section_resource</span><span class="p" data-group-id="4293210898-5">(</span><span class="n">section</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4293210898-6">%{</span><span class="ss">field</span><span class="p">:</span><span class="w"> </span><span class="n">bad_value</span><span class="p" data-group-id="4293210898-6">}</span><span class="p" data-group-id="4293210898-5">)</span><span class="w">
</span><span class="p" data-group-id="4293210898-7">{</span><span class="ss">:error</span><span class="p">,</span><span class="w"> </span><span class="p" data-group-id="4293210898-8">%</span><span class="nc" data-group-id="4293210898-8">Ecto.Changeset</span><span class="p" data-group-id="4293210898-8">{</span><span class="p" data-group-id="4293210898-8">}</span><span class="p" data-group-id="4293210898-7">}</span></code></pre>
  </section>
</section>

          </div>
        </section>

      <footer class="footer">

        <p>
          <span class="line">
            Built using
            <a href="https://github.com/elixir-lang/ex_doc" title="ExDoc" target="_blank" rel="help noopener">ExDoc</a> (v0.25.2) for the
            <a href="https://elixir-lang.org" title="Elixir" target="_blank">Elixir programming language</a>.
          </span>
          <span class="line">
            Designed by
            <a href="https://twitter.com/dignifiedquire" target="_blank" rel="noopener" title="@dignifiedquire">Friedel Ziegelmayer</a>.
          </span>
        </p>
        <p>

            <a href="api-reference.html" title="API reference" class="line footer-button">API Reference</a>

          <button class="line footer-button display-shortcuts-help">
            Display keyboard shortcuts
          </button>
          <button class="line footer-button night-mode-toggle">
            Toggle night mode
          </button>
          <button class="line footer-button display-quick-switch">
            Go to a HexDocs package
          </button>
          <button class="line footer-button tooltips-toggle">
            <span class="tooltips-option-disable">Disable tooltips</span>
            <span class="tooltips-option-enable">Enable tooltips</span>
          </button>
        </p>
      </footer>
    </div>
  </div>
</section>
</div>


  </body>
</html>
